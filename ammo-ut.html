<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Ammo (UT)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Ammo_(UT); path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Ammo (UT)">Ammo (UT)</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut.png"> <a href="unreal-tournament.html">UT</a> :: <a href="actor-ut.html">Actor (UT)</a> &gt;&gt; <a href="inventory-ut.html">Inventory (UT)</a> &gt;&gt; <a href="pickup-ut.html">Pickup (UT)</a> &gt;&gt; Ammo (Package: Engine)<br></div>
<p>Parent class of ammunition types for <a href="weapon-ut.html">Weapon (UT)</a>s.  Child class <a href="tournamentammo.html">TournamentAmmo</a> corresponds with <a href="tournamentweapon.html">TournamentWeapon</a> (UT) weapons.</p>
<p>One does not actually posess a quantity of Ammo inventory items.  Rather, an Ammo item is a placeholder which indicates how much of the corresponding ammunition type the player may expend.</p>
<h2><a name="0.1"></a>Properties</h2>
<dl><dt>int AmmoAmount (travel, replicated to owning client)</dt><dd>In inventory, the amount of ammunition of this type the player may expend.  For a pickup, amount of ammunition to be added to an inventory copy of the ammotype's AmmoAmount.</dd><dt>int MaxAmmo (travel)</dt><dd>Maximum amount AmmoAmount may reach in a player's inventory.</dd><dt>class&lt;Ammo&gt; ParentAmmo</dt><dd>Parent class of Ammotype.  Some ammotypes are smaller, child classes of other types, only different in, say, the size of AmmoAmount.  Providing a link to a parent class prevents the child ammo from being added to a player's inventory separately from its parent.</dd><dt>byte UsedInWeaponSlot[10]</dt><dd>For display purposes AFAIK.  Position in the HUD Ammo and AmmoAmount should be displayed in.</dd><dt>Ammo PAmmo</dt><dd>???Original implementation of ParentAmmo???</dd></dl>
<h2><a name="0.2"></a>Methods</h2>
<h3><a name="0.2.1"></a>Inherited from <a href="inventory-ut.html">Inventory (UT)</a></h3>
<dl><dt>float BotDesireability (<a href="pawn-ut.html">Pawn (UT)</a> Bot)</dt><dd></dd></dl>
<h2><a name="0.3"></a>Known subclasses</h2>
<ul><li><a href="asmdammo.html">ASMDAmmo</a></li>
<li><a href="flakbox.html">FlakBox</a></li>
<li>NullAmmo<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=NullAmmo&referrerid=Ammo_(UT)">?</a></li>
<li>RazorAmmo<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=RazorAmmo&referrerid=Ammo_(UT)">?</a></li>
<li><a href="rifleammo.html">RifleAmmo</a></li>
<li>RocketCan<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=RocketCan&referrerid=Ammo_(UT)">?</a></li>
<li><a href="shellbox.html">ShellBox</a></li>
<li>Shells<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Shells&referrerid=Ammo_(UT)">?</a></li>
<li>Sludge<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Sludge&referrerid=Ammo_(UT)">?</a></li>
<li>StingerAmmo<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=StingerAmmo&referrerid=Ammo_(UT)">?</a></li>
<li><a href="tournamentammo.html">TournamentAmmo</a></li>
</ul>
<h2><a name="0.4"></a>Discussion</h2>
<hr class="thin"><p><em class="em2">Csimbi</em>: How can I change the starting ammo, the maximum ammo, and the pickup ammo settings dynamically (default properties are static)?</p>
<p>The following code adjust starting ammo and maximum ammo correctly, but how can I adjust the amount of ammo that is added when player picks up some ammo?</p>
<pre class="uscript"><span class="uscript-keyword">function</span> GiveWeapon<span class="uscript-operator">(</span>pawn P<span class="uscript-operator">,</span> <span class="uscript-type">string</span> ThisClass<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>weapon<span class="uscript-operator">&gt;</span> WeaponClass<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> weapon NewWeapon<span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>ThisClass<span class="uscript-operator">==</span><span class="uscript-string">"none"</span><span class="uscript-operator">)</span> <span class="uscript-keyword">return</span><span class="uscript-operator">;</span>

    WeaponClass <span class="uscript-operator">=</span> <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>weapon<span class="uscript-operator">&gt;</span><span class="uscript-operator">(</span>DynamicLoadObject<span class="uscript-operator">(</span>ThisClass<span class="uscript-operator">,</span> <span class="uscript-keyword">class</span><span class="uscript-name">'Class'</span><span class="uscript-operator">)</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>WeaponClass<span class="uscript-operator">==</span><span class="uscript-keyword">none</span><span class="uscript-operator">||</span>P<span class="uscript-operator">.</span>FindInventoryType<span class="uscript-operator">(</span>WeaponClass<span class="uscript-operator">)</span><span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span> <span class="uscript-keyword">return</span><span class="uscript-operator">;</span>

    WeaponClass<span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ItemArticle<span class="uscript-operator">=</span>MyArticle<span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">=</span>Spawn<span class="uscript-operator">(</span>WeaponClass<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    WeaponClass<span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ItemArticle<span class="uscript-operator">=</span>NormalArticle<span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>RespawnTime<span class="uscript-operator">=</span><span class="uscript-number">0.0</span><span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>GiveTo<span class="uscript-operator">(</span>P<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>bHeldItem<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>GiveAmmo<span class="uscript-operator">(</span>P<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>SetSwitchPriority<span class="uscript-operator">(</span>P<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>WeaponSet<span class="uscript-operator">(</span>P<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    NewWeapon<span class="uscript-operator">.</span>AmbientGlow <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>P<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'PlayerPawn'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span> NewWeapon<span class="uscript-operator">.</span>SetHand<span class="uscript-operator">(</span>PlayerPawn<span class="uscript-operator">(</span>P<span class="uscript-operator">)</span><span class="uscript-operator">.</span>Handedness<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">else</span> NewWeapon<span class="uscript-operator">.</span>GotoState<span class="uscript-operator">(</span><span class="uscript-name">'Idle'</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    P<span class="uscript-operator">.</span>Weapon<span class="uscript-operator">.</span>GotoState<span class="uscript-operator">(</span><span class="uscript-name">'DownWeapon'</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    P<span class="uscript-operator">.</span>PendingWeapon<span class="uscript-operator">=</span><span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>ThisClass<span class="uscript-operator">==</span>MyWeapon <span class="uscript-operator">&amp;&amp;</span> NewWeapon<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        NewWeapon<span class="uscript-operator">.</span>AmmoType<span class="uscript-operator">.</span>AmmoAmount<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'OptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>InitialAmmo<span class="uscript-operator">;</span>
        NewWeapon<span class="uscript-operator">.</span>AmmoType<span class="uscript-operator">.</span>MaxAmmo<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'OptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>MaxAmmo<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span></pre><p>An example would be nice... Thank You.</p>
<p><em class="em2">Wormbo:</em> You can use one of the various HandlePickupQuery() functions (<a href="inventory-ut.html">Inventory (UT)</a>, <a href="mutator-ut.html">Mutator (UT)</a>, etc.) to handle any type of pickup, but could you please put your questions where people can actually find them? The <a href="help-desk.html">Help Desk</a> would be a  good place, or a coding forum (e.g. <a href="http://forums.beyondunreal.com/forumdisplay.php?f=101">[BUF Coding]</a>).</p>
<p><em class="em2">Ticklemonster:</em> Open the weapon's uc file, browse down to default properties, and look at this line:</p>
<pre class="uscript">     PickupAmmoCount<span class="uscript-operator">=</span><span class="uscript-number">8</span></pre><p>Change the count to say 99.</p>
<p>Then, look for the weapon's ammo, let's say it's AmmoName=Class'botpack.BulletBox', to go open that uc file, and change it to look like this:</p>
<pre class="uscript"><span class="uscript-keyword">class</span> BulletBox99 <span class="uscript-keyword">extends</span> TournamentAmmo<span class="uscript-operator">;</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
     AmmoAmount<span class="uscript-operator">=</span><span class="uscript-number">10</span>
     MaxAmmo<span class="uscript-operator">=</span><span class="uscript-number">99</span>
     UsedInWeaponSlot<span class="uscript-operator">(</span><span class="uscript-number">9</span><span class="uscript-operator">)</span><span class="uscript-operator">=</span><span class="uscript-number">1</span>
     PickupMessage<span class="uscript-operator">=</span><span class="uscript-string">"You got a box of rifle rounds."</span>
     ItemName<span class="uscript-operator">=</span><span class="uscript-string">"Box of Rifle Rounds"</span>
     PickupViewMesh<span class="uscript-operator">=</span>LodMesh<span class="uscript-name">'Botpack.BulletBoxM'</span>
     MaxDesireability<span class="uscript-operator">=</span><span class="uscript-number">0.240000</span>
     Icon<span class="uscript-operator">=</span>Texture<span class="uscript-name">'UnrealI.Icons.I_RIFLEAmmo'</span>
     Physics<span class="uscript-operator">=</span>PHYS_Falling
     Skin<span class="uscript-operator">=</span>Texture<span class="uscript-name">'Botpack.Skins.BulletBoxT'</span>
     Mesh<span class="uscript-operator">=</span>LodMesh<span class="uscript-name">'Botpack.BulletBoxM'</span>
     CollisionRadius<span class="uscript-operator">=</span><span class="uscript-number">15.000000</span>
     CollisionHeight<span class="uscript-operator">=</span><span class="uscript-number">10.000000</span>
     bCollideActors<span class="uscript-operator">=</span><span class="uscript-keyword">True</span>
<span class="uscript-operator">}</span></pre><p>Of course you want to put them in their own class of their own named directory. Say it's a sniper rifle, save the assualtrifle.uc as assualtrifle99.uc and save the bulletbox as bulletbox99.uc. If they are in \AssaultRifle99\Classes, then you will have an AssaultRifle99.u that you can use. You'd want to make a mutator, I guess to make it want to work. </p>
<p>Does that help?</p>
<p><em class="em2">Unknown:</em> (hey Ma, look! I posted on Wiki.beyondunreal!!! Now if I could get someone to tell me how to make a flakslug act like a regular sniper bullet, then make that the primary fire on the flak cannon, I'd be all set... hint hint Mr. Wormbo)</p>
<hr class="thin"><p><a href="category-class-ut.html">Category Class (UT)</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Properties", "#0.1");
menuItemAdd("Methods", "#0.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Inherited from <a href=\"inventory-ut.html\">Inventory (UT)</a>", "#0.2.1");
menuItemAdd("Known subclasses", "#0.3");
menuItemAdd("Discussion", "#0.4");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Ammo_(UT)">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=Ammo_(UT)">View other revisions</a><br>Last edited February 20, 2006 12:46 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Ammo_(UT)">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Ammo_(UT)">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>Worst-case scenario: the UEd Goblin wipes the map and burns down your house.
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
