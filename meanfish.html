<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: MeanFish</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=MeanFish; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=MeanFish">MeanFish</a></h1>
	<div class="wiki"><p>Welcome to my page!  Feel free to add random ponderings if you want in the "Discussion" area, and if you have any suggestions/comments/complaints/threats feel free to put those wherever seems relevant.</p>
<p>The concept of the wiki is strong with this page author, so don't be shy about putting stuff on here!</p>
<h4><a name="0.0.0.1"></a>Contact Information</h4>
<p>AIM:  HopFrog 187</p>
<p>MSN:  <a href="mailto:NinjaGuppy6@hotmail.com">NinjaGuppy6@hotmail.com</a></p>
<p>Yahoo!:  wonko32</p>
<p>ICQ:  89282852</p>
<p>EMail:  <a href="mailto:NinjaGuppy6@hotmail.com">NinjaGuppy6@hotmail.com</a></p>
<h4><a name="0.0.0.2"></a>Current Projects</h4>
<ul><li>Active Projects<ul><li>Carjack! (yes, we've started working on code for this...)</li>
<li>A blitzball-style level for Deathball</li>
</ul>
</li>
<li>Future Projects<ul><li>Gnome Action Cinema (more on this later, name subject to change)</li>
<li>UT2003 Extended SDK</li>
</ul>
</li>
</ul>
<h4><a name="0.0.0.3"></a>Diary of a Madman</h4>
<p>As I traversed through the grassy plains of UnrealScriptLand, I came across the most frightening sight I'd ever witnessed, for there before me was a wall of teepees.  "Natives," I grunted with a slightly depressed tone knowing that the answer I seek is somewhere on the other side of that wall which I will never be able to afford to go over (I love overly long sentences.  Are you out of breath yet?  See below to fix that problem!).  These natives were wielding flamethrowers and boards with nails in them.  I was simply no match with only my car keys available.</p>
<h4><a name="0.0.0.4"></a>AmphibiousWaterVolume is brought to life!</h4>
<p>I'll be sure to post the code here when I'm done making the class more easily manipulated.  Flexible code is good code <img alt=":)" src="emoticons/smile.gif" align="middle">  Ok, ok, I'll post what I have so far.  Any advice would be appreciated.  I'm also still testing it, so if there are bugs I'd love to hear about them so that I can (hopefully) fix them in less time than it took me to figure out how to make this thing work at all!</p>
<pre class="uscript"><span class="uscript-comment">//By:  MeanFish</span>
<span class="uscript-comment">//Purpose:  to make it so that people wont drown inside</span>
<span class="uscript-comment">//of this water volume's loving arms.</span>

<span class="uscript-keyword">class</span> AmphibiousWaterVolume <span class="uscript-keyword">extends</span> WaterVolume<span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> nTempTime<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> nAdjustedBreathingTime<span class="uscript-operator">;</span>

<span class="uscript-comment">//if an Actor enters the volume, set their breathing abilities to</span>
<span class="uscript-comment">//"I could do this for six months!" (literally)</span>
<span class="uscript-keyword">function</span> touch<span class="uscript-operator">(</span>Actor other<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
         <span class="uscript-keyword">local</span> Pawn myPawn<span class="uscript-operator">;</span>

         <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Other<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'Pawn'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
         <span class="uscript-operator">{</span>
            myPawn <span class="uscript-operator">=</span> Pawn<span class="uscript-operator">(</span>other<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            nTempTime <span class="uscript-operator">=</span> myPawn<span class="uscript-operator">.</span>UnderwaterTime<span class="uscript-operator">;</span>
            myPawn<span class="uscript-operator">.</span>UnderwaterTime<span class="uscript-operator">=</span> <span class="uscript-operator">+</span>nAdjustedBreathingTime<span class="uscript-operator">;</span>
         <span class="uscript-operator">}</span>
         
         <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>touch<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">//if an Actor leaves, make sure to set their breathing back to normal, </span>
<span class="uscript-comment">//in case there is a normal water volume in the same level.</span>
<span class="uscript-keyword">function</span> untouch<span class="uscript-operator">(</span>Actor Other<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
         <span class="uscript-keyword">local</span> Pawn myPawn<span class="uscript-operator">;</span>
         <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Other<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'Pawn'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
         <span class="uscript-operator">{</span>
            myPawn <span class="uscript-operator">=</span> Pawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            myPawn<span class="uscript-operator">.</span>UnderwaterTime<span class="uscript-operator">=</span>ntempTime<span class="uscript-operator">;</span>
         <span class="uscript-operator">}</span>
         <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>untouch<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
nAdjustedBreathingTime<span class="uscript-operator">=</span><span class="uscript-number">9999999.0</span>
<span class="uscript-comment">//I'm trying to make it so that projectiles are immune to the slowdown effect</span>
<span class="uscript-comment">//of underwater combat.  translation:  I'm trying to use this for a deathball level.</span>
bMoveProjectiles<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>Oh yeah...and if you decide to use this, dont forget to add whatever package you put it in to your</p>
<p>EditPackages section for UEd (at the bottom of ut2003.ini).  Probably childs play for most of y'all but it was hard for me so BACK OFF! <img alt=":-P" src="emoticons/tongue.gif" align="middle"></p>
<h3><a name="0.0.1"></a>Discussion</h3>
<p><em class="em2">Foxpaw:</em> There's a slight problem with the way that your code resets the breathing times. If Player A enters the water, then Player B enters, then Player A leaves, Player A will get Player B's breathing properties back instead of their own. Most pawns have the same underwater breathing properties, but I wouldn't rule out the possibility of someone making a model with a custom species that has different breathing options. Alternatively, some players could have something like the scuba tanks on that submarine assault level in UT. A way to ensure that each person gets their own breathing properties back is by keeping track of a list of players and their underwater times, like so:</p>
<pre class="uscript"><span class="uscript-keyword">struct</span> BreathingProperties
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">var</span> Pawn Player<span class="uscript-operator">;</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">float</span> StoredTime<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span><span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span> <span class="uscript-keyword">array</span><span class="uscript-operator">&lt;</span>BreathingProperties<span class="uscript-operator">&gt;</span> StoredProperties<span class="uscript-operator">;</span>

<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>

<span class="uscript-keyword">simulated</span> <span class="uscript-keyword">function</span> <span class="uscript-type">int</span> FindBreathingPropsFor<span class="uscript-operator">(</span> Pawn Player <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">;</span>
  
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Player <span class="uscript-operator">==</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span> <span class="uscript-keyword">return</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>

  <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span>i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>i<span class="uscript-operator">&lt;</span>StoredProperties<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span><span class="uscript-operator">;</span>i<span class="uscript-operator">++</span><span class="uscript-operator">)</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> StoredProperties<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Player <span class="uscript-operator">==</span> Player <span class="uscript-operator">)</span> <span class="uscript-keyword">return</span> i<span class="uscript-operator">;</span>

  <span class="uscript-keyword">return</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">simulated</span> <span class="uscript-keyword">function</span> StoreBreathingPropsFor<span class="uscript-operator">(</span> Pawn Player <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">;</span>
  <span class="uscript-keyword">local</span> BreathingProperties NewProperties<span class="uscript-operator">;</span>

  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Player <span class="uscript-operator">==</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span> <span class="uscript-keyword">return</span><span class="uscript-operator">;</span>

  i <span class="uscript-operator">=</span> FindBreathingPropsFor<span class="uscript-operator">(</span> Player <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> i <span class="uscript-operator">&lt;</span> <span class="uscript-number">0</span> <span class="uscript-operator">||</span> i <span class="uscript-operator">&gt;</span> StoredProperties<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span> <span class="uscript-operator">)</span>
  <span class="uscript-operator">{</span>
    NewProperties<span class="uscript-operator">.</span>Player <span class="uscript-operator">=</span> Player<span class="uscript-operator">;</span>
    i <span class="uscript-operator">=</span> StoredProperties<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span><span class="uscript-operator">;</span>
    StoredProperties<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span> <span class="uscript-operator">=</span> NewProperties<span class="uscript-operator">;</span>
  <span class="uscript-operator">}</span>

  StoredProperties<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>StoredTime <span class="uscript-operator">=</span> Player<span class="uscript-operator">.</span>UnderwaterTime<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>

<span class="uscript-keyword">simulated</span> <span class="uscript-keyword">function</span> Touch<span class="uscript-operator">(</span> actor Other <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Other<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span> <span class="uscript-name">'Pawn'</span> <span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
  <span class="uscript-operator">{</span>
    StoreBreathingPropsFor<span class="uscript-operator">(</span> Pawn<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    Pawn<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span><span class="uscript-operator">.</span>UnderwaterTime <span class="uscript-operator">+=</span> nAdjustedBreathingTime<span class="uscript-operator">;</span>
  <span class="uscript-operator">}</span>

  <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>Touch<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">simulated</span> <span class="uscript-keyword">function</span> Untouch<span class="uscript-operator">(</span> actor Other <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">;</span>

  <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>Untouch<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Other<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span> <span class="uscript-name">'Pawn'</span> <span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
  <span class="uscript-operator">{</span>
    i <span class="uscript-operator">=</span> FindBreathingPropsFor<span class="uscript-operator">(</span> Pawn<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> i <span class="uscript-operator">&gt;=</span> <span class="uscript-number">0</span> <span class="uscript-operator">&amp;&amp;</span> i <span class="uscript-operator">&lt;</span> StoredProperties<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
      Pawn<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span><span class="uscript-operator">.</span>UnderwaterTime <span class="uscript-operator">=</span> StoredProperties<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>StoredTime<span class="uscript-operator">;</span>
      StoredProperties<span class="uscript-operator">.</span><span class="uscript-keyword">Remove</span><span class="uscript-operator">(</span> i<span class="uscript-operator">,</span> <span class="uscript-number">1</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
  <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span>
<span class="uscript-comment">// **************************************************************************************** //</span></pre><p><em class="em2">MeanFish:</em> Dude that's awesome...thanks a lot!  I'll be spending some time deciphering it.  I'm still learning, as mentioned previously but I appreciate the help a ton!</p>
<p><a href="category-personal-page.html">Category Personal Page</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Contact Information", "#0.0.0.1");
menuItemAdd("Current Projects", "#0.0.0.2");
menuItemAdd("Diary of a Madman", "#0.0.0.3");
menuItemAdd("AmphibiousWaterVolume is brought to life!", "#0.0.0.4");
menuItemAdd("Discussion", "#0.0.1");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=MeanFish">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=MeanFish">View other revisions</a><br>Last edited December 22, 2003 19:00 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=MeanFish">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/MeanFish">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>Once I get that upgrade to 36-hour days, I will tackle that. (Mychaeel)
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
