<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: PlayerReplicationInfo (UT)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=PlayerReplicationInfo_(UT); path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=PlayerReplicationInfo (UT)">PlayerReplicationInfo (UT)</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut.png"> <a href="unreal-tournament.html">UT</a> :: <a href="actor-ut.html">Actor (UT)</a> &gt;&gt; <a href="info-ut.html">Info (UT)</a> &gt;&gt; <a href="replicationinfo.html">ReplicationInfo</a> &gt;&gt; PlayerReplicationInfo (Package: Engine)<br></div>
<p>This class is responsible for replicating information about a player to all clients in a network game.</p>
<p>You'll find PRI as short version of PlayerReplicationInfo in the names of many variables and functions that deal with PlayerReplicationInfos.</p>
<p>See <a href="playerreplicationinfo.html">PlayerReplicationInfo</a> for the UT2003 version of this class.</p>
<h2><a name="0.1"></a>Properties</h2>
<p>All properties are replicated unless the description tells something different.</p>
<dl><dt>string PlayerName</dt><dd>Player name, or blank if none.</dd><dt>string OldName</dt><dd>Temporary value.</dd><dt>int PlayerID</dt><dd>Unique id number.</dd><dt>string TeamName</dt><dd>Team name, or blank if none.</dd><dt>byte Team</dt><dd>The player's team. (0 = red, 1 = blue, 2 = green, 3 = gold, 255 = none)</dd><dt>int TeamID</dt><dd>Player position in team.</dd><dt>float Score</dt><dd>The player's current score.</dd><dt>float Deaths</dt><dd>How often the player died.</dd><dt>class&lt;VoicePack<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=VoicePack&referrerid=PlayerReplicationInfo_(UT)">?</a>&gt; VoiceType</dt><dd>The voice pack used by the player.</dd><dt><a href="decoration-ut.html">Decoration (UT)</a> HasFlag</dt><dd>Any kind of decorative actor, e.g. the flags in CTF or the ball in Frag*Ball, currently held by the player.</dd><dt>int Ping</dt><dd>The players ping as detected by the server.</dd><dt>byte PacketLoss</dt><dd></dd><dt>bool bIsFemale</dt><dd>The player is female.</dd><dt>bool bIsABot</dt><dd>The player is a <a href="bot-ut.html">Bot (UT)</a>.</dd><dt>bool bFeigningDeath</dt><dd>The player currently feighs death.</dd><dt>bool bIsSpectator</dt><dd>The player just spectates.</dd><dt>bool bWaitingPlayer</dt><dd></dd><dt>bool bAdmin</dt><dd>The player is logged in as an admin.</dd><dt>Texture TalkTexture</dt><dd></dd><dt><a href="zoneinfo-ut.html">ZoneInfo (UT)</a> PlayerZone</dt><dd>The zone the player currently is in.</dd><dt><a href="locationid.html">LocationID</a> PlayerLocation</dt><dd>A more detailed description of the player's location within a big zone.</dd><dt>int StartTime</dt><dd></dd><dt>int TimeAcc</dt><dd>(not replicated)</dd></dl>
<p><em class="em2">Mychaeel:</em> On an admittedly futile note, I wish Epic had provided a means to chain PlayerReplicationInfo with custom <a href="replicationinfo.html">ReplicationInfo</a> subclasses via a linked list... that would save so much trouble when dealing with custom replicated information.  (Even subclassing PlayerReplicationInfo or <a href="botreplicationinfo.html">BotReplicationInfo</a> and replacing the normal one by means of modifying <a href="pawn-ut.html">Pawn (UT)</a>.PlayerReplicationInfoClass or anything else is a rather cumbersome hack on most cases.)</p>
<p><em class="em2">Wormbo:</em> They could have created linked lists in many places like e.g. <a href="weapon-ut.html">Weapon (UT)</a> affectors, but they also missed something important like the <a href="hud-ut.html">HUD (UT)</a> mutator chain and now we have to mess around with those relics-compatible HUD mutators...</p>
<p><em class="em2">Csimbi:</em> Finally I managed to work out a network-proof (and working) replication.</p>
<p>All codes below are directly copied from the rifle I am making - You will need to rename the actors so there won't be a conflict.</p>
<p>First of all, You need and actor. Here it is:</p>
<pre class="uscript"><span class="uscript-comment">//=============================================================================</span>
<span class="uscript-comment">// ClanRifleReplicationInfo.</span>
<span class="uscript-comment">//=============================================================================</span>
<span class="uscript-comment">// Initial version : v3.0 (Csimbi&lt;csimbicsimbi@hotmail.com&gt;)</span>
<span class="uscript-comment">//=============================================================================</span>
<span class="uscript-keyword">class</span> ClanRifleReplicationInfo <span class="uscript-keyword">extends</span> Actor<span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bIsSpawn<span class="uscript-operator">;</span>             <span class="uscript-comment">// Is it spawn protected?</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bPlayHeadShotSound<span class="uscript-operator">;</span>   <span class="uscript-comment">// Headshot sound toggle for clients.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iReticle<span class="uscript-operator">;</span>              <span class="uscript-comment">// ID of the current reticle</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletsFiredTotal<span class="uscript-operator">;</span>    <span class="uscript-comment">// Total number of bullets fired.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletTeamMateHits<span class="uscript-operator">;</span>   <span class="uscript-comment">// Number of bullets that hit a team mate.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletBodyHits<span class="uscript-operator">;</span>       <span class="uscript-comment">// Number of bullets that hit the body of an enemy.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletHeadHits<span class="uscript-operator">;</span>       <span class="uscript-comment">// Number of bullets that hit the head of an enemy.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletSpawnHits<span class="uscript-operator">;</span>      <span class="uscript-comment">// Number of bullets that hit a spawn.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletSpawnFirstHits<span class="uscript-operator">;</span> <span class="uscript-comment">// Number of bullets that hit a spawn for the first time.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iBulletSpawnerHits<span class="uscript-operator">;</span>    <span class="uscript-comment">// Number of bullets that hit while spawn.</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iSpawnPunishCount<span class="uscript-operator">;</span>     <span class="uscript-comment">// Number of times the player was punished (Spawnprotect).</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iTelefragPunishCount<span class="uscript-operator">;</span>  <span class="uscript-comment">// Number of times the player was punished (Telefrag).</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> iOutOfAmmoCount<span class="uscript-operator">;</span>       <span class="uscript-comment">// Number of times the player has been out of ammo.</span>

<span class="uscript-keyword">var</span> ClanRifleReplicationInfo prevCRRI<span class="uscript-operator">;</span> <span class="uscript-comment">// Previous item in the list</span>
<span class="uscript-keyword">var</span> ClanRifleReplicationInfo nextCRRI<span class="uscript-operator">;</span> <span class="uscript-comment">// Next item in the list</span>

<span class="uscript-keyword">replication</span>
<span class="uscript-operator">{</span>
    <span class="uscript-comment">// Things the server should send to the client.</span>
    <span class="uscript-keyword">reliable</span> <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Role<span class="uscript-operator">==</span>ROLE_Authority<span class="uscript-operator">)</span>
        prevCRRI<span class="uscript-operator">,</span> nextCRRI<span class="uscript-operator">,</span> bIsSpawn<span class="uscript-operator">,</span> iReticle<span class="uscript-operator">,</span> bPlayHeadShotSound<span class="uscript-operator">,</span> iBulletBodyHits<span class="uscript-operator">,</span> iBulletHeadHits<span class="uscript-operator">,</span> iBulletSpawnHits<span class="uscript-operator">,</span> iBulletSpawnFirstHits<span class="uscript-operator">,</span> iBulletSpawnerHits<span class="uscript-operator">,</span> iSpawnPunishCount<span class="uscript-operator">,</span> iTelefragPunishCount<span class="uscript-operator">,</span> iBulletTeamMateHits<span class="uscript-operator">;</span>
    <span class="uscript-comment">// Things the client should send to the client.</span>
    <span class="uscript-keyword">reliable</span> <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Role<span class="uscript-operator">&lt;</span>ROLE_Authority<span class="uscript-operator">)</span>
        iBulletsFiredTotal<span class="uscript-operator">,</span> iOutOfAmmoCount<span class="uscript-operator">;</span>
    <span class="uscript-keyword">reliable</span> <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Role<span class="uscript-operator">==</span>ROLE_Authority<span class="uscript-operator">)</span>
        GetCRRI<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">event</span> Spawned <span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    AddToList<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    SetTimer<span class="uscript-operator">(</span><span class="uscript-number">1.0</span><span class="uscript-operator">,</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> AddToList<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>

    <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        prevCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
        nextCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span>
    <span class="uscript-operator">{</span>
        C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetLast<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">==</span><span class="uscript-keyword">None</span> <span class="uscript-operator">||</span> C<span class="uscript-operator">==</span><span class="uscript-keyword">Self</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            prevCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
            nextCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
        <span class="uscript-keyword">else</span>
        <span class="uscript-operator">{</span>
            C<span class="uscript-operator">.</span>nextCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">Self</span><span class="uscript-operator">;</span>
            prevCRRI<span class="uscript-operator">=</span>C<span class="uscript-operator">;</span>
            nextCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> ClanRifleReplicationInfo GetNext<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">return</span> nextCRRI<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> ClanRifleReplicationInfo GetPrevious<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">return</span> prevCRRI<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> ClanRifleReplicationInfo GetFirst<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> done<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>

    done<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">while</span><span class="uscript-operator">(</span><span class="uscript-operator">!</span>done <span class="uscript-operator">&amp;&amp;</span> C<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>prevCRRI<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            done<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
        C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetPrevious<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> ClanRifleReplicationInfo GetLast<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> done<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>

    done<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">while</span><span class="uscript-operator">(</span><span class="uscript-operator">!</span>done <span class="uscript-operator">&amp;&amp;</span> C<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>nextCRRI<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            done<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
        C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetNext<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> RemoveFromList<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-comment">// Lot of extra checks here in case someone from outside manipulates the list and messes it up.</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>prevCRRI<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>nextCRRI<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> nextCRRI<span class="uscript-operator">.</span>prevCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span>
    <span class="uscript-operator">{</span>
        prevCRRI<span class="uscript-operator">.</span>nextCRRI<span class="uscript-operator">=</span>nextCRRI<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>nextCRRI<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>prevCRRI<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> prevCRRI<span class="uscript-operator">.</span>nextCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span>
    <span class="uscript-operator">{</span>
        nextCRRI<span class="uscript-operator">.</span>prevCRRI<span class="uscript-operator">=</span>prevCRRI<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    nextCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    prevCRRI<span class="uscript-operator">=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> ClanRifleReplicationInfo GetCRRI <span class="uscript-operator">(</span>Pawn P<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> found<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>

    <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        found<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>found<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">for</span><span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>GetFirst<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>C<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span>C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetNext<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>Pawn<span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>Owner<span class="uscript-operator">)</span><span class="uscript-operator">==</span>P<span class="uscript-operator">)</span>
            <span class="uscript-operator">{</span>
                <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
            <span class="uscript-operator">}</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">event</span> Timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>Pawn<span class="uscript-operator">(</span>Owner<span class="uscript-operator">)</span><span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        RemoveFromList<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> DumpList<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>

    log <span class="uscript-operator">(</span><span class="uscript-string">"___________Dumped list begin_________________"</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    C<span class="uscript-operator">=</span>GetFirst<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">while</span><span class="uscript-operator">(</span>C<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        log<span class="uscript-operator">(</span><span class="uscript-string">"Prev: "</span><span class="uscript-operator">$</span>C<span class="uscript-operator">.</span>prevCRRI<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        log<span class="uscript-operator">(</span><span class="uscript-string">"Item: "</span><span class="uscript-operator">$</span>C<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        log<span class="uscript-operator">(</span><span class="uscript-string">"Next: "</span><span class="uscript-operator">$</span>C<span class="uscript-operator">.</span>nextCRRI<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>nextCRRI<span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>C<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> log <span class="uscript-operator">(</span><span class="uscript-string">"___________"</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    log <span class="uscript-operator">(</span><span class="uscript-string">"___________Dumped list end___________________"</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
    bHidden<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    NetUpdateFrequency<span class="uscript-operator">=</span><span class="uscript-number">2.00</span><span class="uscript-operator">;</span>
    bAlwaysRelevant<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    bIsSpawn<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    bPlayHeadShotSound<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    iReticle<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletsFiredTotal<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletBodyHits<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletHeadHits<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletSpawnHits<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletSpawnFirstHits<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletSpawnerHits<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iSpawnPunishCount<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iTelefragPunishCount<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iBulletTeamMateHits<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    iOutOfAmmoCount<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>Next, you need to spawn this actor whenever a player enters the game (the actor above is self-destructing, no need to worry about that in if You use this class).</p>
<p>The ListPlayers() is always called from the ModifyPlayer() function of the mutator.</p>
<pre class="uscript"><span class="uscript-keyword">function</span> ListPlayers<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> pawn P<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">,</span>x<span class="uscript-operator">;</span>

    i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">for</span><span class="uscript-operator">(</span>P<span class="uscript-operator">=</span>Level<span class="uscript-operator">.</span>Pawnlist<span class="uscript-operator">;</span> P<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span> P<span class="uscript-operator">=</span>P<span class="uscript-operator">.</span>Nextpawn<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        killers<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">=</span>P<span class="uscript-operator">;</span>
        <span class="uscript-comment">// Create rifle replication info.</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetCRRI<span class="uscript-operator">(</span>P<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            C<span class="uscript-operator">=</span>Spawn<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span>P<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            x<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>Reticle<span class="uscript-operator">;</span>
            <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>x <span class="uscript-operator">&gt;</span> <span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMax<span class="uscript-operator">)</span> x<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMin<span class="uscript-operator">;</span>
            <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>x <span class="uscript-operator">&lt;</span> <span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMin<span class="uscript-operator">)</span> x<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMax<span class="uscript-operator">;</span>
            C<span class="uscript-operator">.</span>iReticle<span class="uscript-operator">=</span>x<span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
        <span class="uscript-comment">// Increase player count</span>
        i<span class="uscript-operator">++</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span></pre><p>Then the variables need to be updated.</p>
<p>Here is function that updates a toggle (implemented within the Mutator - running on the server):</p>
<pre class="uscript"><span class="uscript-keyword">function</span> <span class="uscript-type">bool</span> ToggleCRRIHSS <span class="uscript-operator">(</span>Pawn SP<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> pawn P<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> found<span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>SP<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    found<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">for</span><span class="uscript-operator">(</span>P<span class="uscript-operator">=</span>Level<span class="uscript-operator">.</span>Pawnlist<span class="uscript-operator">;</span> P<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">!</span>found<span class="uscript-operator">;</span> P<span class="uscript-operator">=</span>P<span class="uscript-operator">.</span>Nextpawn<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>SP<span class="uscript-operator">==</span>P<span class="uscript-operator">)</span> found<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
        i<span class="uscript-operator">++</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>found<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
        C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetCRRI<span class="uscript-operator">(</span>SP<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        C<span class="uscript-operator">.</span>bPlayHeadShotSound<span class="uscript-operator">=</span><span class="uscript-operator">!</span>C<span class="uscript-operator">.</span>bPlayHeadShotSound<span class="uscript-operator">;</span>
        <span class="uscript-keyword">return</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>There is function here that updates a counter (implemented within the Mutator - running on the server):</p>
<pre class="uscript"><span class="uscript-keyword">function</span> <span class="uscript-type">bool</span> UpdateCRRICounter <span class="uscript-operator">(</span>Pawn SP<span class="uscript-operator">,</span> <span class="uscript-type">int</span> Type<span class="uscript-operator">,</span> <span class="uscript-type">int</span> Counter<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> pawn P<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">,</span> x<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> found<span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>SP<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
    found<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">for</span><span class="uscript-operator">(</span>P<span class="uscript-operator">=</span>Level<span class="uscript-operator">.</span>Pawnlist<span class="uscript-operator">;</span> P<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">!</span>found<span class="uscript-operator">;</span> P<span class="uscript-operator">=</span>P<span class="uscript-operator">.</span>Nextpawn<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>SP<span class="uscript-operator">==</span>P<span class="uscript-operator">)</span> found<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
        i<span class="uscript-operator">++</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>found<span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
        C<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>GetCRRI<span class="uscript-operator">(</span>SP<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>C<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">switch</span><span class="uscript-operator">(</span>Type<span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_RETICLE:
                x<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>iReticle<span class="uscript-operator">+</span>Counter<span class="uscript-operator">;</span>
                <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>x <span class="uscript-operator">&gt;</span> <span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMax<span class="uscript-operator">)</span> x<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMin<span class="uscript-operator">;</span>
                <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>x <span class="uscript-operator">&lt;</span> <span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMin<span class="uscript-operator">)</span> x<span class="uscript-operator">=</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>ReticleMax<span class="uscript-operator">;</span>
                C<span class="uscript-operator">.</span>iReticle<span class="uscript-operator">=</span>x<span class="uscript-operator">;</span>
                <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_BODY: C<span class="uscript-operator">.</span>iBulletBodyHits<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_HEAD: C<span class="uscript-operator">.</span>iBulletHeadHits<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_SPAWNSHOT: C<span class="uscript-operator">.</span>iBulletSpawnHits<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_SPAWNSHOT_FIRST: C<span class="uscript-operator">.</span>iBulletSpawnFirstHits<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_SPAWNER: C<span class="uscript-operator">.</span>iBulletSpawnerHits<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_SPAWNPUNISH: C<span class="uscript-operator">.</span>iSpawnPunishCount<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_TELEFRAGPUNISH: C<span class="uscript-operator">.</span>iTelefragPunishCount<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">case</span> COUNTER_TYPE_TEAMMATE: C<span class="uscript-operator">.</span>iBulletTeamMateHits<span class="uscript-operator">+=</span>Counter<span class="uscript-operator">;</span> <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
        <span class="uscript-keyword">return</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>Here is a function that reads and updates a variable on the client-side:</p>
<pre class="uscript"><span class="uscript-keyword">simulated</span> <span class="uscript-keyword">function</span> ReplicationTick<span class="uscript-operator">(</span><span class="uscript-type">float</span> DeltaTime<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> ClanRifleReplicationInfo C<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> Pawn PawnOwner<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> PlayerPawn PlayerPawnOwner<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> FoundOwnerC<span class="uscript-operator">;</span>

    PawnOwner<span class="uscript-operator">=</span>Pawn<span class="uscript-operator">(</span>Owner<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    PlayerPawnOwner<span class="uscript-operator">=</span>PlayerPawn<span class="uscript-operator">(</span>Owner<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    FoundOwnerC<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>PawnOwner<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        DT<span class="uscript-operator">+=</span>DeltaTime<span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>DT<span class="uscript-operator">&gt;=</span>RefreshInterval<span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            DT<span class="uscript-operator">=</span><span class="uscript-number">0.000000</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">ForEach</span> AllActors<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClanRifleReplicationInfo'</span><span class="uscript-operator">,</span> C<span class="uscript-operator">)</span>
            <span class="uscript-operator">{</span>
                <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>Pawn<span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>Owner<span class="uscript-operator">)</span><span class="uscript-operator">==</span>PawnOwner<span class="uscript-operator">)</span>
                <span class="uscript-operator">{</span>
                    FoundOwnerC<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
                    <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>
                <span class="uscript-operator">}</span>
            <span class="uscript-operator">}</span>
            <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>FoundOwnerC<span class="uscript-operator">)</span>
            <span class="uscript-operator">{</span>
                OwnerIsASpawn<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>bIsSpawn<span class="uscript-operator">;</span>
                C<span class="uscript-operator">.</span>iBulletsFiredTotal<span class="uscript-operator">+=</span>BulletsFired<span class="uscript-operator">;</span>
                BulletsFired<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>
                <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>OutOfAmmo<span class="uscript-operator">)</span>
                <span class="uscript-operator">{</span>
                    OutOfAmmo<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
                    C<span class="uscript-operator">.</span>iOutOfAmmoCount<span class="uscript-operator">+=</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
                <span class="uscript-operator">}</span>
                <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>PlayerPawnOwner<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-comment">// not for bots.</span>
                <span class="uscript-operator">{</span>
                    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span>bPrevPlayHeadShotSound<span class="uscript-operator">!=</span>C<span class="uscript-operator">.</span>bPlayHeadShotSound<span class="uscript-operator">)</span>
                    <span class="uscript-operator">{</span>
                        bPrevPlayHeadShotSound<span class="uscript-operator">=</span>C<span class="uscript-operator">.</span>bPlayHeadShotSound<span class="uscript-operator">;</span>
                        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>HSAudio<span class="uscript-operator">&gt;</span>HeadshotSoundCount<span class="uscript-number">-1</span><span class="uscript-operator">)</span> PlayerPawnOwner<span class="uscript-operator">.</span>ClientPlaySound<span class="uscript-operator">(</span>HeadshotSound<span class="uscript-operator">[</span>Rand<span class="uscript-operator">(</span>HeadshotSoundCount<span class="uscript-operator">)</span><span class="uscript-operator">]</span><span class="uscript-operator">,</span> <span class="uscript-keyword">false</span><span class="uscript-operator">,</span> <span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
                        <span class="uscript-keyword">else</span> PlayerPawnOwner<span class="uscript-operator">.</span>ClientPlaySound<span class="uscript-operator">(</span>HeadshotSound<span class="uscript-operator">[</span><span class="uscript-keyword">class</span><span class="uscript-name">'ClientOptionsPage'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>HSAudio<span class="uscript-operator">]</span><span class="uscript-operator">,</span> <span class="uscript-keyword">false</span><span class="uscript-operator">,</span> <span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
                    <span class="uscript-operator">}</span>
                <span class="uscript-operator">}</span>
            <span class="uscript-operator">}</span>
            <span class="uscript-keyword">else</span> OwnerIsASpawn<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
            TargetIsASpawn<span class="uscript-operator">=</span>HasSPInventory<span class="uscript-operator">(</span>TP<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            selectedreticle<span class="uscript-operator">=</span>GetCurrentReticle<span class="uscript-operator">(</span>OP<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span></pre><p>A couple of suggestions:</p>
<p>The GetCRRI() function does not work on client side - do not use it. It will only work in Standalone (no network) games.</p>
<p>Do NOT read/write the replicated variables from a PostRender() or Tick() function unless You add there some flow control (as done in the code above), otherwise the network performance will be very poor.</p>
<p><em class="em2">Csimbi:</em> I could not get replication working with NetUpdateFrequency values lower than 2.00. Is there any way to do that?</p>
<p><em class="em2">Iv:</em> I just managed to get that subclassing of PlayerReplicationInfo working by just destroying the actual PlayerReplicationInfo in the Pawn and spawning a new subclassed one in place, all of this from the ModifyPlayer function of the Mutator class. The trick seemed to work fine in here so here I'm posting the snip: </p>
<pre class="uscript"><span class="uscript-keyword">function</span> ModifyPlayer<span class="uscript-operator">(</span>Pawn Other<span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> PlayerPawn pp<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> SpyPlayerReplicationInfo spri<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">string</span> PlayerName<span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> Other<span class="uscript-operator">.</span>isA<span class="uscript-operator">(</span><span class="uscript-name">'PlayerPawn'</span><span class="uscript-operator">)</span> <span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
        pp <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        pp<span class="uscript-operator">.</span>PlayerReplicationInfoClass <span class="uscript-operator">=</span> <span class="uscript-keyword">class</span><span class="uscript-name">'SpyPlayerReplicationInfo'</span><span class="uscript-operator">;</span>

        <span class="uscript-comment">/*
         * We are going to spawn a new replication info
         * and remove the previous one
         */</span>
        
        PlayerName <span class="uscript-operator">=</span> pp<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName<span class="uscript-operator">;</span>
        pp<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        pp<span class="uscript-operator">.</span>PlayerReplicationInfo <span class="uscript-operator">=</span> Spawn<span class="uscript-operator">(</span> <span class="uscript-keyword">class</span> <span class="uscript-name">'SpyPlayerReplicationInfo'</span><span class="uscript-operator">,</span> pp<span class="uscript-operator">,</span><span class="uscript-operator">,</span><span class="uscript-keyword">vect</span><span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">,</span><span class="uscript-keyword">rot</span><span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    
        pp<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">=</span> PlayerName<span class="uscript-operator">;</span>
        pp<span class="uscript-operator">.</span>initPlayerReplicationInfo<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        spri <span class="uscript-operator">=</span> SpyPlayerReplicationInfo<span class="uscript-operator">(</span> pp<span class="uscript-operator">.</span>PlayerReplicationInfo <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        spri<span class="uscript-operator">.</span>ipAddrString <span class="uscript-operator">=</span> pp<span class="uscript-operator">.</span>GetPlayerNetworkAddress<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>       
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>ModifyPlayer<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p><em class="em2">Xian:</em> </p>
<p>Csimbi: That is because the main ClanRifleReplicationInfo is not replicated to all Clients. It exists only on Role=ROLE_Authority. But there are other ways to update variables client-side... I don't get why you had to use a function that is executed each frame <img alt="O_o" src="emoticons/ohoh.gif" align="middle"></p>
<p>Iv: From what I can remember, ModifyPlayer() is called on each respawn. Spawn/Destroy use A LOT of bandwidth, not to mention CPU resources... best way is to use a Mutator like this:</p>
<pre class="uscript"><span class="uscript-keyword">function</span> ModifyLogin<span class="uscript-operator">(</span><span class="uscript-keyword">out</span> <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>playerpawn<span class="uscript-operator">&gt;</span> SpawnClass<span class="uscript-operator">,</span> <span class="uscript-keyword">out</span> <span class="uscript-type">string</span> Portal<span class="uscript-operator">,</span> <span class="uscript-keyword">out</span> <span class="uscript-type">string</span> Options<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> NextMutator <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
        NextMutator<span class="uscript-operator">.</span>ModifyLogin<span class="uscript-operator">(</span>SpawnClass<span class="uscript-operator">,</span> Portal<span class="uscript-operator">,</span> Options<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

        SpawnClass<span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>PlayerReplicationInfoClass <span class="uscript-operator">=</span> <span class="uscript-keyword">Class</span><span class="uscript-name">'SpyPlayerReplicationInfo'</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>Done <img alt=":)" src="emoticons/smile.gif" align="middle"> And even more efficient (note: if other mutators modify it, then you will mess up their functions... also note a SpawnNotify can override your Class)</p>
<h2><a name="0.2"></a>Known Subclasses</h2>
<ul><li><a href="botreplicationinfo.html">BotReplicationInfo</a></li>
</ul>
<h2><a name="0.3"></a>Related Topics</h2>
<ul><li><a href="maintaining-compatibility.html">Maintaining Compatibility</a></li>
</ul>
<hr class="thin"><p><a href="category-class-ut.html">Category Class (UT)</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Properties", "#0.1");
menuItemAdd("Known Subclasses", "#0.2");
menuItemAdd("Related Topics", "#0.3");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited June 6, 2006 12:19 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=PlayerReplicationInfo_(UT)">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/PlayerReplicationInfo_(UT)">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>I'm a doctor, not a mechanic
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
