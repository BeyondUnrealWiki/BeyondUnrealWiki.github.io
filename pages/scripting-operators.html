<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Scripting Operators</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Scripting_Operators; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Scripting Operators">Scripting Operators</a></h1>
	<div class="wiki"><h2><a name="0.1"></a>Using Operators</h2>
<h3><a name="0.1.1"></a>Operators vs. Functions</h3>
<p>In maths, the difference is simply one of notation. The following mean the same, but the first is written as an operator, the second and third as functions: </p>
<pre class="uscript"> <span class="uscript-number">4</span> <span class="uscript-operator">+</span> <span class="uscript-number">5</span>
 <span class="uscript-operator">+</span><span class="uscript-operator">(</span> <span class="uscript-number">4</span> <span class="uscript-operator">,</span> <span class="uscript-number">5</span> <span class="uscript-operator">)</span>
 plus<span class="uscript-operator">(</span> <span class="uscript-number">4</span> <span class="uscript-operator">,</span> <span class="uscript-number">5</span> <span class="uscript-operator">)</span></pre><p>In <a href="unrealscript.html">UnrealScript</a> there is a similar distinction. Both functions and operators are represented by some sort of symbol or group of symbols, but operator's parameters are either side of the name instead of enclosed in brackets:</p>
<pre class="uscript"><span class="uscript-number">4</span> <span class="uscript-operator">+</span> <span class="uscript-number">5</span> <span class="uscript-operator">;</span>
<span class="uscript-number">4</span> plus <span class="uscript-number">5</span> <span class="uscript-operator">;</span>
plus<span class="uscript-operator">(</span> <span class="uscript-number">4</span> <span class="uscript-operator">,</span> <span class="uscript-number">5</span> <span class="uscript-operator">)</span> <span class="uscript-operator">;</span></pre><p>In UnrealScript, operators are limited to having one or two parameters. UnrealScript's built-in operators are defined in the <a href="object.html">Object</a> class.</p>
<h3><a name="0.1.2"></a>Binary operators</h3>
<p>Most operators are <em class="em1">binary</em> &ndash; they take two parameters, one on each side. Defining an operator is very similar to defining a function:</p>
<pre class="uscript"><span class="uscript-keyword">static</span> <span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-operator">&lt;</span>priority<span class="uscript-operator">&gt;</span><span class="uscript-operator">)</span> <span class="uscript-operator">&lt;</span>type<span class="uscript-operator">&gt;</span> <span class="uscript-operator">&lt;</span>opname<span class="uscript-operator">&gt;</span> <span class="uscript-operator">(</span><span class="uscript-operator">&lt;</span>param1<span class="uscript-operator">&gt;</span><span class="uscript-operator">,</span> <span class="uscript-operator">&lt;</span>param2<span class="uscript-operator">&gt;</span><span class="uscript-operator">)</span> <span class="uscript-operator">{</span><span class="uscript-operator">}</span></pre><p>Note that a return value is required for operators, even if they have <a href="function-syntax.html">'out' parameters</a>.</p>
<p>Operators need to be declared as <em class="em1">final</em> (or the compiler will start bitching), but not necessarily as <em class="em1">static</em> &ndash; if you don't declare an operator as <em class="em1">static</em>, you can access object variables in its code.  (Unlike non-<em class="em1">static</em> functions you can use a non-<em class="em1">static</em> operator in a <em class="em1">static</em> function; any object variables you access there yield their default properties in that case.) A function declared as static may execute faster, however note that although it may be static it cannot be referenced from outside of the class it was defined in and its subclasses. The following, for instance, is not valid:</p>
<pre class="uscript">ValueA <span class="uscript-keyword">class</span><span class="uscript-name">'MathFunctions'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span><span class="uscript-operator">+</span> ValueB</pre><p>The number in parenthesis after the keyword "operator" gives the evaluation priority; the lower this value, the earlier a term with this operator will be evaluated when a complete expression is executed. For example, the exponentiation operator's precedence is 12, multiplication is 16, and addition is 20. Consider the expression:</p>
<pre class="uscript">A <span class="uscript-operator">=</span> B <span class="uscript-operator">/</span> <span class="uscript-number">2</span> MyOperator <span class="uscript-number">5</span><span class="uscript-operator">;</span> </pre><p>If MyOperator has a precedence of 10, it'll bind tighter than division (16), so the expression will be evaluated as:</p>
<pre class="uscript">A <span class="uscript-operator">=</span> B <span class="uscript-operator">/</span> <span class="uscript-operator">(</span><span class="uscript-number">2</span> MyOperator <span class="uscript-number">5</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>  </pre><p>On the other hand, if MyOperator has a precedence of 20, it would evaluate as:</p>
<pre class="uscript">A <span class="uscript-operator">=</span> <span class="uscript-operator">(</span>B <span class="uscript-operator">/</span> <span class="uscript-number">2</span><span class="uscript-operator">)</span> MyOperator <span class="uscript-number">5</span><span class="uscript-operator">;</span>  </pre><p>The valid range for precedence values is 0-255. Here's a list of the existing values used in the built in operators: </p>
<table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td><em class="em2">Precedence</em></td>
<td><em class="em2">Operator</em></td>
<td><em class="em2">Operation</em></td>
</tr>
<tr valign=top><td align=right>12</td>
<td align=center><code>**</code></td>
<td>Exponentiation</td>
</tr>
<tr valign=top><td align=right>16</td>
<td align=center><code>*</code></td>
<td>Multiplication</td>
</tr>
<tr valign=top><td align=right>16</td>
<td align=center><code>/</code></td>
<td>Division</td>
</tr>
<tr valign=top><td align=right>16</td>
<td align=center><code>Dot</code></td>
<td>Dot Product</td>
</tr>
<tr valign=top><td align=right>16</td>
<td align=center><code>Cross</code></td>
<td>Cross Product</td>
</tr>
<tr valign=top><td align=right>18</td>
<td align=center><code>%</code></td>
<td>Modulus</td>
</tr>
<tr valign=top><td align=right>20</td>
<td align=center><code>+</code></td>
<td>Addition </td>
</tr>
<tr valign=top><td align=right>20</td>
<td align=center><code>-</code></td>
<td>Subtraction</td>
</tr>
<tr valign=top><td align=right>22</td>
<td align=center><code>&lt;&lt;</code></td>
<td>Left Shift</td>
</tr>
<tr valign=top><td align=right>22</td>
<td align=center><code>&gt;&gt;</code></td>
<td>Right Shift</td>
</tr>
<tr valign=top><td align=right>22</td>
<td align=center><code>&gt;&gt;&gt;</code></td>
<td>Unsigned Right Shift</td>
</tr>
<tr valign=top><td align=right>24</td>
<td align=center><code>&lt;</code></td>
<td>Less Than</td>
</tr>
<tr valign=top><td align=right>24</td>
<td align=center><code>&gt;</code></td>
<td>Greater Than</td>
</tr>
<tr valign=top><td align=right>24</td>
<td align=center><code>&lt;=</code></td>
<td>Less or Equal</td>
</tr>
<tr valign=top><td align=right>24</td>
<td align=center><code>&gt;=</code></td>
<td>Greater or Equal</td>
</tr>
<tr valign=top><td align=right>24</td>
<td align=center><code>==</code></td>
<td>Equality </td>
</tr>
<tr valign=top><td align=right>24</td>
<td align=center><code>~=</code></td>
<td>Approximate Equality </td>
</tr>
<tr valign=top><td align=right>26</td>
<td align=center><code>!=</code></td>
<td>Not Equal </td>
</tr>
<tr valign=top><td align=right>28</td>
<td align=center><code>&amp;</code></td>
<td>Bitwise And </td>
</tr>
<tr valign=top><td align=right>28</td>
<td align=center><code>|</code></td>
<td>Bitwise Or </td>
</tr>
<tr valign=top><td align=right>28</td>
<td align=center><code>^</code></td>
<td>Bitwise Xor </td>
</tr>
<tr valign=top><td align=right>30</td>
<td align=center><code>&amp;&amp;</code></td>
<td>And </td>
</tr>
<tr valign=top><td align=right>30</td>
<td align=center><code>||</code></td>
<td>Or </td>
</tr>
<tr valign=top><td align=right>32</td>
<td align=center><code>^^</code></td>
<td>Xor </td>
</tr>
</table>
<p>(Also see <a href="operators.html">Operators</a>.)</p>
<p>Type is what type the operator will return, if any. This also works the same as a function.</p>
<p>Opname is the name of the operator, similar to the name of a function. However, the name of an operator is more flexible. You can use any of the following as an operator name:</p>
<p>The name/identifier of the operator. This can be: </p>
<ul><li>A string identifier, like a normal function. </li>
<li>A symbol, like +,-,*,/,#,:,etc. </li>
<li>A group of two symbols. The compiler limits you to the symbol groups already recognized by the parser: &lt;&lt;, &gt;&gt;, !=, &lt;=, &gt;=, ++, &ndash;, +=, -=, *=, /=, &amp;&amp;, ||, ^^, ==, **, ~=, @= </li>
<li>The compiler also allows a special three-symbol operator, &gt;&gt;&gt;. </li>
</ul>
<p>The parameters of the operator work the same way as a function, but you must have two and only two parameters for a binary function. The first parameter is the value on the left side of the operator when it is used. The second parameter is the value on the right side of the operator when it is used. Like a function, you can use the out keyword if you want an operator to change the value of one of the values inputted to it.</p>
<p>The code for your operator goes between the curly braces, the same way as a function. An operator is largely a function that is merely called using a different syntax, as as such can do most things that a function can. Use return as you would in a function to return the result of the operator, if any.</p>
<p>The following example is an alternative to %, the built-in modulo operator. This is an extremely handy one to have, as the built-in % operator disagrees with the mathematical modulo function for negative numbers.</p>
<pre class="uscript"><span class="uscript-keyword">static</span> <span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">18</span><span class="uscript-operator">)</span> <span class="uscript-type">float</span> mod <span class="uscript-operator">(</span><span class="uscript-type">float</span> A<span class="uscript-operator">,</span> <span class="uscript-type">float</span> B<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> A <span class="uscript-operator">%</span> B <span class="uscript-operator">&gt;=</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>
        <span class="uscript-keyword">return</span> A <span class="uscript-operator">%</span> B <span class="uscript-operator">;</span>
    <span class="uscript-keyword">else</span>
        <span class="uscript-keyword">return</span> <span class="uscript-operator">(</span> A <span class="uscript-operator">%</span> B <span class="uscript-operator">)</span> <span class="uscript-operator">+</span> B <span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>Note that the operator does not need to be represented by a single special character; it can also be a valid symbol name. With the above example, the new syntax would be:</p>
<pre class="uscript"><span class="uscript-keyword">local</span> <span class="uscript-type">float</span> a<span class="uscript-operator">,</span> b<span class="uscript-operator">,</span> c<span class="uscript-operator">;</span>
c <span class="uscript-operator">=</span> a mod b<span class="uscript-operator">;</span></pre><p>Here's another sample operator that will calculate the average of the left and right side:</p>
<pre class="uscript"><span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">18</span><span class="uscript-operator">)</span> <span class="uscript-type">int</span> : <span class="uscript-operator">(</span> <span class="uscript-type">int</span> A<span class="uscript-operator">,</span> <span class="uscript-type">int</span> B <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">return</span> <span class="uscript-operator">(</span>A <span class="uscript-operator">+</span> B<span class="uscript-operator">)</span> <span class="uscript-operator">/</span> <span class="uscript-number">2</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>
Middle <span class="uscript-operator">=</span> <span class="uscript-number">10</span> : <span class="uscript-number">2</span><span class="uscript-operator">;</span> <span class="uscript-comment">// Middle = 6</span>

Middle <span class="uscript-operator">=</span> <span class="uscript-number">10</span> <span class="uscript-operator">+</span> <span class="uscript-number">2</span> : <span class="uscript-number">4</span><span class="uscript-operator">;</span> <span class="uscript-comment">// Middle = (10 + 2) : 4 = 8</span></pre><pre class="paraverbatim"> </pre><p>I made the priority for this operator 18, so the addition will be evaluated before the : operator in this case. </p>
<h3><a name="0.1.3"></a>Unary operators</h3>
<p>Unary operators are similar, just use "preoperator" or "postoperator" as the keyword. A preoperator and a postoperator has only one parameter, and is prepended or appended to the value to be processed, respectively. An example of a postoperator is <em class="em1">++</em> or <em class="em1">&ndash;</em>. In addition, there is no priority for unary operators, they will always be evaluated first. I am not certain what the result is if a preoperator and a postoperator are called on the same value simultaneously. An example of a unary operator, boolean negation is defined by this line in the <a href="object.html">Object</a> script:</p>
<pre class="uscript"><span class="uscript-keyword">native</span><span class="uscript-operator">(</span><span class="uscript-number">129</span><span class="uscript-operator">)</span> <span class="uscript-keyword">static</span> <span class="uscript-keyword">final</span> <span class="uscript-keyword">preoperator</span> <span class="uscript-type">bool</span> <span class="uscript-operator">!</span> <span class="uscript-operator">(</span><span class="uscript-type">bool</span> A<span class="uscript-operator">)</span><span class="uscript-operator">;</span></pre><h2><a name="0.2"></a>Examples of Operators</h2>
<p>There are many useful examples on the following pages:</p>
<ul><li><a href="useful-maths-functions.html">Useful Maths functions</a> &ndash; number functions, trig functions and vector operators</li>
<li><a href="color-operators.html">Color Operators</a></li>
<li><a href="dynamic-array.html">Dynamic Array</a> implementation (hack for <a href="unreal-tournament.html">UT</a>)</li>
<li><a href="associativearray.html">AssociativeArray</a> </li>
</ul>
<p>More Examples of Operators are provided below.</p>
<h3><a name="0.2.1"></a>Using the Out Keyword</h3>
<pre class="uscript"><span class="uscript-keyword">final</span> <span class="uscript-keyword">postoperator</span> <span class="uscript-type">int</span> # <span class="uscript-operator">(</span> <span class="uscript-keyword">out</span> <span class="uscript-type">int</span> A <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">{</span>   <span class="uscript-keyword">return</span> A <span class="uscript-operator">/=</span> <span class="uscript-number">10</span><span class="uscript-operator">;</span> <span class="uscript-comment">// Notice how A is modified here</span>
<span class="uscript-operator">}</span>

i <span class="uscript-operator">=</span> <span class="uscript-number">100</span><span class="uscript-operator">;</span>

b <span class="uscript-operator">=</span> i#<span class="uscript-operator">;</span> <span class="uscript-comment">// b = 10, i = 10 (i IS affected, because of the out keyword)</span>

i#<span class="uscript-operator">;</span> <span class="uscript-comment">// i = 1</span></pre><h3><a name="0.2.2"></a>String Multiplication</h3>
<p>Here's a simple operator that will take a string, and 'multiply' it by an integer, returning the string repeated that many times:</p>
<pre class="uscript"><span class="uscript-keyword">static</span> <span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">28</span><span class="uscript-operator">)</span> <span class="uscript-type">string</span> <span class="uscript-operator">*</span> <span class="uscript-operator">(</span> <span class="uscript-keyword">coerce</span> <span class="uscript-type">string</span> <span class="uscript-type">String</span><span class="uscript-operator">,</span> <span class="uscript-type">int</span> nRepetitions <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">string</span> Result<span class="uscript-operator">;</span>

  <span class="uscript-keyword">while</span><span class="uscript-operator">(</span>nRepetitions <span class="uscript-operator">&gt;</span> <span class="uscript-number">0</span><span class="uscript-operator">)</span>
  <span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>nRepetitions <span class="uscript-operator">&amp;</span> <span class="uscript-number">1</span><span class="uscript-operator">)</span> <span class="uscript-operator">==</span> <span class="uscript-number">1</span><span class="uscript-operator">)</span>
      Result <span class="uscript-operator">=</span> Result <span class="uscript-operator">$</span> <span class="uscript-type">String</span><span class="uscript-operator">;</span>
    <span class="uscript-type">String</span> <span class="uscript-operator">=</span> <span class="uscript-type">String</span> <span class="uscript-operator">$</span> <span class="uscript-type">String</span><span class="uscript-operator">;</span>
    nRepetitions <span class="uscript-operator">=</span> nRepetitions <span class="uscript-operator">&gt;&gt;</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
  <span class="uscript-operator">}</span>

  <span class="uscript-keyword">return</span> Result<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.2.3"></a>Actor Destruction</h3>
<pre class="uscript"><span class="uscript-keyword">static</span> <span class="uscript-keyword">final</span> <span class="uscript-keyword">postoperator</span> Actor DIEDIEDIE <span class="uscript-operator">(</span> <span class="uscript-keyword">out</span> Actor NearlyDead <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  NearlyDead<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> NearlyDead<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>
SomeActor DIEDIEDIE<span class="uscript-operator">;</span> <span class="uscript-comment">// It is now dead.</span></pre><pre class="paraverbatim"> </pre><h3><a name="0.2.4"></a>Implementing a crude Logf</h3>
<p>This is a simple formatted function that writes to the log file. You use the : operator to group together a bunch of strings and floats (or integers), and then pass the resulting struct into a function that willll parse the format and grab the needed strings/numbers out of the struct.</p>
<pre class="uscript"><span class="uscript-keyword">class</span> TestLogf <span class="uscript-keyword">extends</span> CommandLet<span class="uscript-operator">;</span>

<span class="uscript-comment">// This will hold all of our parameters</span>
<span class="uscript-keyword">struct</span> AnythingGlob
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">string</span> StringGlob<span class="uscript-operator">[</span><span class="uscript-number">20</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> StringNum<span class="uscript-operator">;</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">float</span> NumberGlob<span class="uscript-operator">[</span><span class="uscript-number">20</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> NumberNum<span class="uscript-operator">;</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> num<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span><span class="uscript-operator">;</span>

<span class="uscript-comment">// Add a string to a glob</span>
<span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">98</span><span class="uscript-operator">)</span> AnythingGlob : <span class="uscript-operator">(</span> anythingglob B<span class="uscript-operator">,</span> <span class="uscript-type">string</span> A <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  B<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>B<span class="uscript-operator">.</span>StringNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> A<span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> B<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// Add a float to a glob</span>
<span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">98</span><span class="uscript-operator">)</span> AnythingGlob : <span class="uscript-operator">(</span> anythingglob B<span class="uscript-operator">,</span> <span class="uscript-type">float</span> A <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  B<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>B<span class="uscript-operator">.</span>NumberNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> A<span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> B<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// Create the glob out of 2 strings</span>
<span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">99</span><span class="uscript-operator">)</span> AnythingGlob : <span class="uscript-operator">(</span> <span class="uscript-type">string</span> A<span class="uscript-operator">,</span> <span class="uscript-type">string</span> B <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> AnythingGlob C<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>StringNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> A<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>StringNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> B<span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// Create the glob out of 2 floats</span>
<span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">99</span><span class="uscript-operator">)</span> AnythingGlob : <span class="uscript-operator">(</span> <span class="uscript-type">float</span> A<span class="uscript-operator">,</span> <span class="uscript-type">float</span> B <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> AnythingGlob C<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>NumberNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> A<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>NumberNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> B<span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// Create the glob out of a string and a float</span>
<span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">99</span><span class="uscript-operator">)</span> AnythingGlob : <span class="uscript-operator">(</span> <span class="uscript-type">string</span> A<span class="uscript-operator">,</span> <span class="uscript-type">float</span> B <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> AnythingGlob C<span class="uscript-operator">;</span>

  C<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>StringNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> A<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>NumberNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> B<span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// Create the glob out of a float and a string</span>
<span class="uscript-keyword">final</span> <span class="uscript-keyword">operator</span><span class="uscript-operator">(</span><span class="uscript-number">99</span><span class="uscript-operator">)</span> AnythingGlob : <span class="uscript-operator">(</span> <span class="uscript-type">float</span> B<span class="uscript-operator">,</span> <span class="uscript-type">string</span> A <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> AnythingGlob C<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>StringNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> A<span class="uscript-operator">;</span>
  C<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>C<span class="uscript-operator">.</span>NumberNum<span class="uscript-operator">++</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> B<span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> C<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> <span class="uscript-type">int</span> main<span class="uscript-operator">(</span> <span class="uscript-type">string</span> parm <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> AnythingGlob Test<span class="uscript-operator">;</span>
  Logf<span class="uscript-operator">(</span> <span class="uscript-string">"Testing... with a string '%s', an int '%i', and a float %f"</span>: <span class="uscript-string">"Test"</span>: <span class="uscript-number">6</span>: <span class="uscript-number">6.4</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  Logf<span class="uscript-operator">(</span> <span class="uscript-string">"This commandlet was passed '%s'"</span>: parm <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  Test <span class="uscript-operator">=</span> <span class="uscript-operator">(</span> <span class="uscript-string">"Using prebuilt glob: %s %f %i %s"</span>: <span class="uscript-string">"Hello"</span>: <span class="uscript-number">3.1415926</span>: <span class="uscript-number">4</span>: <span class="uscript-string">"Bye"</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  Logf<span class="uscript-operator">(</span> Test <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  <span class="uscript-keyword">return</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// The actual Logf... an anythingglob of parameters</span>
<span class="uscript-keyword">function</span> Logf<span class="uscript-operator">(</span> AnythingGlob params <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">;</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">string</span> Format<span class="uscript-operator">,</span>FinalS<span class="uscript-operator">,</span> Flag<span class="uscript-operator">;</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> sglbnum<span class="uscript-operator">;</span>
  <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> fglbnum<span class="uscript-operator">;</span>

  Format <span class="uscript-operator">=</span> params<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>sglbnum<span class="uscript-operator">++</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
  <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span>i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span>i<span class="uscript-operator">&lt;=</span>Len<span class="uscript-operator">(</span>format<span class="uscript-operator">)</span><span class="uscript-operator">;</span>i<span class="uscript-operator">++</span><span class="uscript-operator">)</span>
  <span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Mid<span class="uscript-operator">(</span>format<span class="uscript-operator">,</span> i<span class="uscript-operator">,</span> <span class="uscript-number">1</span><span class="uscript-operator">)</span> <span class="uscript-operator">==</span> <span class="uscript-string">"%"</span><span class="uscript-operator">)</span>
  <span class="uscript-operator">{</span>
      i<span class="uscript-operator">++</span><span class="uscript-operator">;</span>
      Flag <span class="uscript-operator">=</span> Mid<span class="uscript-operator">(</span>format<span class="uscript-operator">,</span>i<span class="uscript-operator">,</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Flag <span class="uscript-operator">==</span> <span class="uscript-string">"s"</span> <span class="uscript-operator">)</span>
        FinalS <span class="uscript-operator">=</span> FinalS <span class="uscript-operator">$</span> params<span class="uscript-operator">.</span>StringGlob<span class="uscript-operator">[</span>sglbnum<span class="uscript-operator">++</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
      <span class="uscript-keyword">else</span> <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Flag <span class="uscript-operator">==</span> <span class="uscript-string">"i"</span> <span class="uscript-operator">)</span>
        FinalS <span class="uscript-operator">=</span> FinalS <span class="uscript-operator">$</span> <span class="uscript-type">string</span><span class="uscript-operator">(</span><span class="uscript-type">int</span><span class="uscript-operator">(</span>params<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>fglbnum<span class="uscript-operator">++</span><span class="uscript-operator">]</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-keyword">else</span> <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Flag <span class="uscript-operator">==</span> <span class="uscript-string">"f"</span> <span class="uscript-operator">)</span>
        FinalS <span class="uscript-operator">=</span> FinalS <span class="uscript-operator">$</span> <span class="uscript-type">string</span><span class="uscript-operator">(</span>params<span class="uscript-operator">.</span>NumberGlob<span class="uscript-operator">[</span>fglbnum<span class="uscript-operator">++</span><span class="uscript-operator">]</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-keyword">else</span>
      <span class="uscript-operator">{</span>
        FinalS <span class="uscript-operator">=</span> FinalS <span class="uscript-operator">$</span> <span class="uscript-string">"%"</span><span class="uscript-operator">;</span>
        i<span class="uscript-operator">--</span><span class="uscript-operator">;</span>
      <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span> FinalS <span class="uscript-operator">=</span> FinalS <span class="uscript-operator">$</span> Mid<span class="uscript-operator">(</span>format<span class="uscript-operator">,</span> i<span class="uscript-operator">,</span> <span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
  <span class="uscript-operator">}</span>
  Log<span class="uscript-operator">(</span>FinalS<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h2><a name="0.3"></a>Related topics</h2>
<ul><li>Main <a href="unrealscript.html">UnrealScript</a> topic page</li>
<li><a href="operators.html">Operators</a></li>
</ul>
<hr class="thin"><p><em class="em2">Mychaeel:</em>  Very nice.  <img alt=":tup:" src="emoticons/tup.gif" align="middle">  But please use third- (or fourth-) level headings where they're due...</p>
<p><em class="em2">Tarquin:</em>  cool. <img alt=":D" src="emoticons/biggrin.gif" align="middle"> Maybe split this into several pages of ready-made operators, to sit alongside <a href="useful-maths-functions.html">Useful Maths functions</a></p>
<p><em class="em2">Foxpaw:</em> This page had two separate explanations that were both complete so I merged them into one &ndash; I've tried to ensure no content was lost, but if anything was lost in the merger feel free to put it back. The original author was not credited on the original page, the second explanation was made by Yoda.</p>
<p><em class="em2">Foxpaw:</em> It seems logical to assume that operators are "simulated" due to their nature - is this an accurate assumption?</p>
<p><em class="em2">Mychaeel:</em> Usually operators are <em class="em1">static</em>, so the concept of <em class="em1">simulated</em> doesn't apply; however, if you make a non-<em class="em1">static</em> operator, it's your choice whether it is <em class="em1">simulated</em> (usable on clients) or not.</p>
<script type="text/javascript"><!--
 menuItemAdd("Using Operators", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Operators vs. Functions", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Binary operators", "#0.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Unary operators", "#0.1.3");
menuItemAdd("Examples of Operators", "#0.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Using the Out Keyword", "#0.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>String Multiplication", "#0.2.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Actor Destruction", "#0.2.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Implementing a crude Logf", "#0.2.4");
menuItemAdd("Related topics", "#0.3");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Scripting_Operators">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=Scripting_Operators">View other revisions</a><br>Last edited September 8, 2004 6:15 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Scripting_Operators">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Scripting_Operators">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>There is no spoon
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
