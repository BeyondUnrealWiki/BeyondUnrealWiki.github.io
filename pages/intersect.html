<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Intersect</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Intersect; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Intersect">Intersect</a></h1>
	<div class="wiki"><p><em class="em2">Brush Intersection</em> is an operation which crops the <a href="red-builder-brush.html">red builder brush</a> using current world geometry. There are two types, outlined in the following table. To perform them, select the toolbox button, the menu or use the keyboard shortcut. It doesn't matter what is currently selected, only the RBB can be cropped like this.</p>
<table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td>Name</td>
<td>Intersect</td>
<td>Deintersect</td>
</tr>
<tr valign=top><td>Keeps...</td>
<td>parts of the RBB that are in solid space</td>
<td>parts of the RBB that are in open space </td>
</tr>
<tr valign=top><td>and discards...</td>
<td>parts of the RBB that are in open space</td>
<td>parts of the RBB that are in solid space </td>
</tr>
<tr valign=top><td><a href="toolbox.html">Toolbox</a></td>
<td>4th group, middle-left</td>
<td>4th group, middle-right</td>
</tr>
<tr valign=top><td><a href="unrealed-main-menu.html">UnrealEd Main Menu</a> &rarr; Brush ...</td>
<td>&rarr; Intersect</td>
<td>&rarr; Deintersect </td>
</tr>
<tr valign=top><td>Keyboard</td>
<td>CTRL-N</td>
<td>CTRL-D</td>
</tr>
</table>
<p>It's important to remember that the black "empty space" is solid, and the actual map area is hollow (see <a href="unreal-geometry.html">Unreal Geometry</a> and <a href="csg.html">CSG</a>).</p>
<p><em class="em1">next... basic uses...<em class="em2"></em></em></p>
<h3><a name="0.0.1"></a>Rule one of Intersection</h3>
<p>Don't use it.</p>
<ul><li>you don't need to intersect every new brush</li>
<li>you don't need to intersect to get a "clean" join. Use the <a href="grid.html">grid</a>. For that matter, overlaps are not terribly important.</li>
<li>compound brushes made with intesection do not simplify geometry. They simplify <em class="em1">your</em> work as a mapper, but may confuse the BSP.</li>
</ul>
<hr class="thin"><p><a href="category-to-do.html">Category To Do</a></p>
<p>stuff to refactor:</p>
<p>The term <em class="em2">brush intersection</em> refers to an UnrealEd operation that crops the <a href="red-builder-brush.html">red builder brush</a> using current world geometry. This is accessed either with two buttons in the <a href="toolbox.html">toolbox</a> or from the <i>Brush</i> menu. </p>
<p>The <em class="em1">Intersect</em> command keeps only the volume of the RBB that is within solid space; conversely the <em class="em1">Deintersect</em> command keeps the volume that is in hollow space. (It's important to remember that the black "empty space" is solid, and the actual map area is hollow.)</p>
<p>These operations are two of the most useful basic shape manipulations available in UnrealEd, but they can be intimidating to the novice, and are easily confused. Experienced mappers employ these techniques constantly to achieve the desired shape in a brush. All exported brushes (pre-fabrications) must be intersected first, to retain the applied textures and reduce previous manipulative brush operations to a single, integrated geometry.</p>
<h2><a name="0.1"></a>Basic Procedure</h2>
<p>It's not necessary to select the <a href="red-builder-brush.html">red builder brush</a>. </p>
<p>When the "Intersect" command is performed, either with the <a href="unrealed-main-menu.html">UnrealEd Main Menu</a> &rarr; Brush or with the <a href="toolbox.html">toolbox</a> button, all the parts of the Red Builder Brush that are enclosing actual world matter (or CSG Constructive Solid Geometry) are selected and configured to the exact dimensions of that geometry. This geometry can be quite complex (it can actually be a number of seperate, non-adjacent elements); and, this is the principal advantage of using the Brush Intersect method. This is now one brush; and you can perform a number of other brush operations on it. Note the 'pivot point' of the brush. By default, it will be located at the center of the brush, but it can be moved by merely right clicking another brush vertex. When the 'Snap to Grid' feature is enabled (it is suggested that this always be the case), the 'pivot point' snaps to the closest grid point. </p>
<p>So, for instance, if you made a cube (256*256), added it to the world in a large open space, resized the cube to (512*512), and moved it around the original cube: You could then click intersect to make the brush only the size of the original cube.</p>
<p>Deintersect is obviously the exact opposite. Clicking Deintersect causes all the parts of the red brush that are sticking into existing material to go away. An example is if you made a (256*256*256) cube and subtracted it, Then resized the brush to (512*512*512) cube and moved it around the subtracted cube: You could click "Deintersect" and only the part of the red brush where the original cube was would be left.</p>
<h2><a name="0.2"></a>Further Techniques</h2>
<h3><a name="0.2.1"></a>Compound Brushes</h3>
<p>Often mappers will use essentially the same or (a similar) shape repeatedly when mapping. When you add semi-realistic objects to your levels, like, vehicles, furniture, archtectural decorations, and other detailed fixtures, it is easier to convert what is an amalgamation of number of adjacent primitives into one complex brush. You can then import and export simply, manipulate, and move the brush around with great ease. Also, the brush can be easily modified. <br></p>
<p>Create the brush in a large subtracted area, that is seperate and not interfering with level geometry. Make all the minor adjustments in dimensions, and configuration, and then texture in the optimal cool fashion. When you have this shape just the way you imagined it, right click on the <em class="em1">CUBE</em> <a href="brushbuilders.html">Brushbuilder</a>, and enter dimensions that are larger than the shape you just created, but, will fit easily within the subtracted space that you are working in. Position this <a href="red-builder-brush.html">red builder brush</a> so that it bounds your original amalgamated shape, but, so that it does not merge or intersect it (or coincide on the same grid points). Also, it should not cross the boundary of the working space that this operation is enclosed within.<br></p>
<p>Then, with a maniacal grin on your face, Select, <i>Brush &rarr; Intersect</i>. </p>
<h3><a name="0.2.2"></a>Merging</h3>
<p>One thing that deintersection is good for is merging polygons on uncooperative brushes, such as those created by extruding a shape with the 2D Shape Editor.</p>
<p>Here's a little trick that might help when you're extruding a brush and the top and bottom are going to come out tesselated.</p>
<ol><li>Extrude that brush to a length that is LONGER than what you originally were going to create.</li>
<li>Move the newly-shaped red builder brush into a wide open space in the void and subtract it.  Do NOT move, rotate, or scale the red builder brush after this point!</li>
<li>Open the cylinder brushbuilder properties.  Put in a height that matches the height you wanted your extruded brush to have in the first place.  Put in a radius that is at least large enough to cover the length and width of the subtracted brush.  (Don't put in a radius so large that it to touches other unrelated geometry.)  Click on the "Build" button.</li>
<li>Now deintersect the builder brush with the subtracted brush.</li>
</ol>
<p>Now to explain what you just did and why you did it.  You made the subtracted brush too long so that the cylinder you deintersected it with wouldn't touch the ends, which were tesselated.  You made the cylinder the original height because this is the height you want your final brush to have.  You made the radius so large because you weren't going to change the 2D shape that you used to build the brush.</p>
<ul><li>There is an alternative way of doing this, with the <a href="merge-polygons.html">Merge Polygons</a> command.</li>
</ul>
<h3><a name="0.2.3"></a>De/intersect Caveat</h3>
<p>Having come from the Q3 editing world, I had some unconscious preconceptions about the innerworkings of UED2</p>
<p>In Q3 editing, the different facets of mapediting are relative to each other only in very microscopic ways. the map file that you work on in radiant has absolutely NO resemblance to the .BSP file that you play, let alone the bsp or vis compiling processes. once the BSP compile has created a couple of reference files for the VIS process, they have nothing more to do with each other. . . </p>
<p>So the problem here was that my training led me to think that in UED, edit-level brush data had absolutely nothing to do with bsp data. Here i am with a completed and compiled mountain brush. i fit the BB to the brush. I thought by deleting the brush, it didn't matter that it was still in the BSP info . . . I figure i'm not editing the BSP, i'm editing brushes, and the brush isn't there. So when i deintersect, there's nothing there to get in the way.</p>
<p>wrong. I deleted the brush but the bsp data was still there affecting the deintersect as if it were a brush.</p>
<dl><dt>Moral of the story</dt><dd>It's best to do all your de/intersecting while you're building. cuz it's a pain in the ass to follow the rest of this section.</dd></dl>
<p><em class="em2">&ndash;Monsto</em></p>
<p>See also <a href="welcome-to-unrealed.html">Welcome To UnrealEd</a> to <a href="csg.html">CSG</a> for the basics of brushes &amp; geometry.</p>
<h4><a name="0.2.3.1"></a>If you have existing geometry that you want to clean up via de/intersect:</h4>
<ol><li>Save As a different filename. You're now dealing with a 'working' file and your actual map won't be dorked if you mess up here.</li>
<li>select only the brushes that matter. . . the one to be fixed, and the ones it will be fixed with.</li>
<li>click "show only selected actors." It's the open-eye button with the dotted red box on the <a href="toolbar.html">toolbar</a></li>
<li>go into the <a href="build-window.html">Build Window</a>, check the option for "rebuild only visible actors" and <a href="build.html">build</a>. all views will show only what you're working on.</li>
<li>fit the <a href="red-builder-brush.html">red builder brush</a> to the brush you wanna fix (get a button to do this from <a href="http://www.planetunreal.com/fordy/uedbuttons.htm">http://www.planetunreal.com/fordy/uedbuttons.htm</a> )</li>
<li>delete the brush to be fixed (don't change this brush <em class="em2">AT ALL</em> or you'll be doomed)</li>
<li><a href="build.html">build</a> again . . . in all views you should see the <a href="red-builder-brush.html">red builder brush</a> in the place of the brush to be fixed, and also the other brushes you're working on.</li>
<li>de/intersect</li>
<li><a href="subtraction-and-addition.html">add/subtract</a> your brush.</li>
<li>save.</li>
</ol>
<p>Do that for each brush.</p>
<h2><a name="0.3"></a>Comments</h2>
<p>Just a forum snipe from tarquin:</p>
<p class="indent1">Intersection and deintersecting are used far too often. Use the grid &amp; good choice of initial dimensions to line up brushes perfectly. Int &amp; DeInt are really (IMO) just tools for brush shaping, not for ensuring clean joins. It's in fact fine to overlap subtracts, or have additives poke into solid space.</p>
<p><em class="em2">Bean:</em> It's overused to an extent. Less brushes in a level = less rendering work. It's a no-brainer that combining  two brushes who vertices touch will reduce the amount of work the engine has to do on vertex calculations. But, there is a tradeoff when making complex brushes. The two combined brushes may cut into bsp less than the complex brush, the brush may be too detailed to be rendered efficiently, etc... It's all a matter of trial and error by using the zone portal view to view the bsp node cuts and using "stat fps" to see what reduces the node count. A lot of beginning and ignorant mappers combine brushes because they hear that it improves performance, when it's not always the case. (end rant <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">Tarquin:</em>  "combining  two brushes who vertices touch will reduce the amount of work the engine has to do on vertex calculations." &ndash; IIRC, the vertices will still be there. If you have 2 box brushes side by side, delete one and enlarge the other with <a href="vertex-editing.html">vertex editing</a>. Or delete both and make a new one.</p>
<p><em class="em2">scumble:</em> Just a thought, but what about <a href="http://udn.epicgames.com/Two/IntroToUnrealEd#Making_Additional_BSP_Brushes">[this note]</a> at UDN? It suggests always doing an intersection before subtracting.</p>
<p><em class="em2">Tarquin:</em> Well if Epic says you should, I guess you should. <img alt=":)" src="emoticons/smile.gif" align="middle"> I have seen plenty of Epic maps that overlap brushes though.</p>
<hr class="thin"><p><a href="category-mapping.html">Category Mapping</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Rule one of Intersection", "#0.0.1");
menuItemAdd("Basic Procedure", "#0.1");
menuItemAdd("Further Techniques", "#0.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Compound Brushes", "#0.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Merging", "#0.2.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>De/intersect Caveat", "#0.2.3");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>If you have existing geometry that you want to clean up via de/intersect:", "#0.2.3.1");
menuItemAdd("Comments", "#0.3");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited March 11, 2005 14:56 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Intersect">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Intersect">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>Once I get that upgrade to 36-hour days, I will tackle that. (Mychaeel)
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
