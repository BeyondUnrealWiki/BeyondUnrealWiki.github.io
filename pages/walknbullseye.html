<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: WalknBullseye</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=WalknBullseye; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=WalknBullseye">WalknBullseye</a></h1>
	<div class="wiki"><p>This is my contribution to the Unreal community.</p>
<p>I am pretty new to the coding aspect of gaming.  So new in fact that I had know idea how the game actually worked, internally.  I have had no previous coding experience whatsoever.  Everything that I have learned is self taught thru this site.  Without this resource it would have been impossible for me to have gotten to where I am now.</p>
<p>I started off modifying rifles for sniper/camper clans.  I have progressed to the point where I have actually created a few mutators from scratch.</p>
<p>One thing that I have found difficult to do is actually get a mutator to work.  Meaning to get the mutator assigned to a player and then getting the mutator to function.</p>
<p>I will use as an example a mutator that I recently created.</p>
<p>SID ( Slow It Down ) an Anti-Run mutator</p>
<p>Lets start off with our vars</p>
<h3><a name="0.0.1"></a>Vars</h3>
<pre class="uscript"><span class="uscript-keyword">class</span> RunMonitor <span class="uscript-keyword">extends</span> mutator <span class="uscript-keyword">config</span> <span class="uscript-operator">(</span>SIDvX<span class="uscript-operator">)</span><span class="uscript-operator">;</span>



<span class="uscript-keyword">var</span> pawn Runner<span class="uscript-operator">;</span>
<span class="uscript-keyword">struct</span> PlayerInfo                 <span class="uscript-comment">// Here we store all of the relevant info for the player</span>
<span class="uscript-operator">{</span>                                 
       <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> RT<span class="uscript-operator">;</span>               
       <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> GPTime<span class="uscript-operator">;</span>            
       <span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bGP<span class="uscript-operator">;</span>              
       <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> PlayerID<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">string</span> PlayerName<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> count<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> PCount<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">int</span> TeamID<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">float</span> PositionX<span class="uscript-operator">,</span>
                 PositionY<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bMoved<span class="uscript-operator">;</span>
       <span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bDamage<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> PlayerInfo PI<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>            <span class="uscript-comment">// Now we create an array so each player can have their own info</span>


<span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bInitialized<span class="uscript-operator">,</span>bbInit<span class="uscript-operator">,</span>Init2<span class="uscript-operator">;</span></pre><p>For my mutator I decided to use a struct to handle the storage of the relevant values. The reason I did, is a struct can hold any type of var in it.  In my case I am going to have a lot of info for each player that I am going to have to use and keep track of.  I could have used an array for each var type, like this</p>
<pre class="uscript"><span class="uscript-keyword">var</span> <span class="uscript-type">int</span> RT<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> GPTime<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>            
<span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bGP<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>              
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> PlayerID<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">string</span> PlayerName<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> count<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> PCount<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">int</span> TeamID<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">float</span> PositionX<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">,</span>
                 PositionY<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bMoved<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-type">bool</span> bDamage<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span></pre><p>and got the same effect.  </p>
<p>I found it easier to keep up with by using a struct and then creating an array of that struct</p>
<pre class="uscript"><span class="uscript-keyword">var</span> PlayerInfo PI<span class="uscript-operator">[</span><span class="uscript-number">64</span><span class="uscript-operator">]</span><span class="uscript-operator">;</span></pre><h3><a name="0.0.2"></a>Setting the values</h3>
<p>Now that we have the vars created we need to assign some values to them so we can use them</p>
<pre class="uscript"><span class="uscript-keyword">function</span> FillList <span class="uscript-operator">(</span><span class="uscript-operator">)</span>              <span class="uscript-comment">// Here we fill our PlayerInfo array PI[ ]</span>
<span class="uscript-operator">{</span>


    <span class="uscript-keyword">local</span> Pawn PList<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">,</span>x<span class="uscript-operator">;</span>


    <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span>i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span> i<span class="uscript-operator">&lt;</span><span class="uscript-number">64</span><span class="uscript-operator">;</span> i<span class="uscript-operator">++</span><span class="uscript-operator">)</span>         <span class="uscript-comment">// First off lets fill the entire array with some default values</span>
    <span class="uscript-operator">{</span>
        PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerID <span class="uscript-operator">=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
        PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">=</span> <span class="uscript-string">""</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    i <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span>i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span> i<span class="uscript-operator">&lt;</span><span class="uscript-number">4</span><span class="uscript-operator">;</span> i<span class="uscript-operator">++</span><span class="uscript-operator">)</span>          <span class="uscript-comment">// Same here</span>
    <span class="uscript-operator">{</span>
        TPI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>TPCount <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
        TPI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>TWCount <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>

    i <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>                                                                    <span class="uscript-comment">// We need to fill our array with the correct values</span>
    <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span> PList<span class="uscript-operator">=</span>Level<span class="uscript-operator">.</span>PawnList<span class="uscript-operator">;</span> PList<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">;</span> PList<span class="uscript-operator">=</span>PList<span class="uscript-operator">.</span>nextPawn <span class="uscript-operator">)</span>  <span class="uscript-comment">// Level.Pawnlist is a list of all of the Pawn in a game</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span>  <span class="uscript-operator">(</span>   <span class="uscript-operator">(</span> PList<span class="uscript-operator">.</span>bIsPlayer <span class="uscript-operator">&amp;&amp;</span> PList<span class="uscript-operator">.</span><span class="uscript-keyword">class</span> <span class="uscript-operator">!=</span> <span class="uscript-keyword">class</span><span class="uscript-name">'Spectator'</span> <span class="uscript-operator">)</span>   <span class="uscript-comment">// We check to make sure we do not have a specator</span>
            <span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span> <span class="uscript-operator">!</span>PList<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>bIsSpectator <span class="uscript-operator">)</span>
            <span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span> <span class="uscript-operator">!</span>PList<span class="uscript-operator">.</span>bHidden <span class="uscript-operator">)</span>
            <span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            x <span class="uscript-operator">=</span> PList<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerID<span class="uscript-operator">;</span>   <span class="uscript-comment">// We grab the player ID and assign to to 'x'</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerID <span class="uscript-operator">=</span> PList<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerID<span class="uscript-operator">;</span>  <span class="uscript-comment">// Now we simply assign the values we want to the array PI[x].XXX</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>count <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>RT <span class="uscript-operator">=</span> RunTime<span class="uscript-operator">;</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">=</span> PList<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName<span class="uscript-operator">;</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PCount <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PositionX <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
            PI<span class="uscript-operator">[</span>x<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PositionY <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
            i<span class="uscript-operator">++</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>

<span class="uscript-operator">}</span></pre><p>We now have a function that 'Fill' our array with all of the values we are going to need.  Now we need to find some way of getting this function executed.  A lot of mutators are started in</p>
<pre class="uscript"><span class="uscript-keyword">event</span> PreBeginPlay<span class="uscript-operator">(</span><span class="uscript-operator">)</span></pre><p>or</p>
<pre class="uscript"><span class="uscript-keyword">event</span> PostBeginPlay<span class="uscript-operator">(</span><span class="uscript-operator">)</span></pre><p>This won't work for me because I am basing my array entries on the playerID. At the time that Pre/PostBeginPlay are executed the players do not have IDs yet. So...</p>
<pre class="uscript"><span class="uscript-keyword">function</span> ModifyPlayer<span class="uscript-operator">(</span>Pawn Other<span class="uscript-operator">)</span>     <span class="uscript-comment">// When the player is spawned, this function is called</span>
<span class="uscript-operator">{</span>                                     <span class="uscript-comment">// here is a good place to 'set' the players info</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> TAG<span class="uscript-operator">;</span>                    <span class="uscript-comment">// We cant fill our list any earlier since until this point all of the players are specators</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">!</span>bInit<span class="uscript-operator">)</span>                       <span class="uscript-comment">// We set a bool here to 'Fill' our player list</span>
     <span class="uscript-operator">{</span>                                <span class="uscript-comment">// using a bool we can make sure its only loaded once</span>
        FillList<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                    
        bInit <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
     <span class="uscript-operator">}</span>

    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> <span class="uscript-operator">(</span>Other<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'PlayerPawn'</span><span class="uscript-operator">)</span> <span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> Other<span class="uscript-operator">.</span>bIsPlayer <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">!</span>Other<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'Spectator'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>      
       <span class="uscript-operator">{</span>
         Tag <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerID<span class="uscript-operator">;</span>                
                 <span class="uscript-comment">// We need to have some way of identifying the player so we can access the correct array entry</span>
         <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>TAG<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">==</span> <span class="uscript-string">""</span> <span class="uscript-operator">||</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>TAG<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">!=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName<span class="uscript-operator">)</span><span class="uscript-operator">)</span>   
                <span class="uscript-comment">// We need to verify the player spawning has the correct info</span>
           <span class="uscript-operator">{</span>
               Update<span class="uscript-operator">(</span>PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>     <span class="uscript-comment">// If the player name does not match the player name in the array, we update the array info</span>
           <span class="uscript-operator">}</span> 
          SetMessage <span class="uscript-operator">(</span> <span class="uscript-keyword">class</span><span class="uscript-name">'SIDv5.RunMonitor'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>Message<span class="uscript-operator">[</span><span class="uscript-number">7</span><span class="uscript-operator">]</span><span class="uscript-operator">,</span> <span class="uscript-number">7</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
          PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>ReceiveLocalizedMessage<span class="uscript-operator">(</span> <span class="uscript-keyword">class</span><span class="uscript-name">'Warning2'</span><span class="uscript-operator">,</span><span class="uscript-number">7</span><span class="uscript-operator">,</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>      
              <span class="uscript-comment">// Give the player the grace period message when they spawn</span>
                        
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>RT <span class="uscript-operator">=</span> RunTime<span class="uscript-operator">;</span>         <span class="uscript-comment">// We assign the the modified players ID # to the value TAG </span>
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>GPTime <span class="uscript-operator">=</span> GracePeriod<span class="uscript-operator">;</span>          <span class="uscript-comment">// Now by usin the var TAG in the array designator [ ],we can assign the values we want</span>
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PositionX <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>Location<span class="uscript-operator">.</span>X<span class="uscript-operator">;</span>          <span class="uscript-comment">// to the array that matches the player ID</span>
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PositionY <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>Location<span class="uscript-operator">.</span>Y<span class="uscript-operator">;</span>
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>TeamID <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>TeamID<span class="uscript-operator">;</span>
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>bMoved <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
          PI<span class="uscript-operator">[</span>Tag<span class="uscript-operator">]</span><span class="uscript-operator">.</span>bDamage <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
       <span class="uscript-operator">}</span>


    <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>ModifyPlayer<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>We have now assigned an array entry that corresponds to the playerID and filled to entry with all of info we want.  The only thing we need to worry about now is, what happens if the player disconnects in the middle of the game? Right now the player will get a new array with the default values.  Meaning, They get a fresh start.  Lets see about fixing that.</p>
<pre class="uscript"><span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>TAG<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">==</span> <span class="uscript-string">""</span> <span class="uscript-operator">||</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>TAG<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">!=</span> PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName<span class="uscript-operator">)</span><span class="uscript-operator">)</span>   
                <span class="uscript-comment">// We need to verify the player spawning has the correct info</span>
           <span class="uscript-operator">{</span>
               Update<span class="uscript-operator">(</span>PlayerPawn<span class="uscript-operator">(</span>Other<span class="uscript-operator">)</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>     <span class="uscript-comment">// If the player name does not match the player name in the array, we update the array info</span></pre><p>Lets take care of that here...</p>
<pre class="uscript"> 
<span class="uscript-keyword">function</span> Update <span class="uscript-operator">(</span>pawn P<span class="uscript-operator">)</span>                 <span class="uscript-comment">// Here is where we update or player info when it doesnt match</span>
<span class="uscript-operator">{</span>                                        
                                         
   <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> i<span class="uscript-operator">;</span>                          
   <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> ID<span class="uscript-operator">;</span>                         

   ID <span class="uscript-operator">=</span> P<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerID<span class="uscript-operator">;</span>         <span class="uscript-comment">// Again we assign the player ID to a var 'ID'</span>


          <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span> i <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span> i <span class="uscript-operator">&lt;</span> <span class="uscript-number">64</span><span class="uscript-operator">;</span> i<span class="uscript-operator">++</span><span class="uscript-operator">)</span>               <span class="uscript-comment">// We cycle thru the array list </span>
             <span class="uscript-operator">{</span>
                 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> P<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">==</span> PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName   <span class="uscript-comment">// If we find a playername that IS the same in the array</span>
                     <span class="uscript-operator">&amp;&amp;</span> P<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerID <span class="uscript-operator">!=</span> PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerID     <span class="uscript-comment">// AND the player ID IS NOT (!=) the same as the array #</span>
                     <span class="uscript-operator">&amp;&amp;</span> P<span class="uscript-operator">.</span>bIsPlayer<span class="uscript-operator">)</span>                                           <span class="uscript-comment">// then we assign the values in the old array entry (PI[i])</span>
                    <span class="uscript-operator">{</span>                                                          <span class="uscript-comment">// to the new array entry (PI[ID]) </span>
                        PI<span class="uscript-operator">[</span>ID<span class="uscript-operator">]</span><span class="uscript-operator">.</span>count <span class="uscript-operator">=</span> PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>count<span class="uscript-operator">;</span>
                        PI<span class="uscript-operator">[</span>ID<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">=</span> PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName<span class="uscript-operator">;</span>
                        PI<span class="uscript-operator">[</span>ID<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerID <span class="uscript-operator">=</span> ID<span class="uscript-operator">;</span>
                        PI<span class="uscript-operator">[</span>ID<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PCount <span class="uscript-operator">=</span> PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PCount<span class="uscript-operator">;</span>
                        PI<span class="uscript-operator">[</span>ID<span class="uscript-operator">]</span><span class="uscript-operator">.</span>RT <span class="uscript-operator">=</span> Runtime<span class="uscript-operator">;</span>                                   <span class="uscript-comment">// Here we blank out the old name just for good measure</span>
                        PI<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">=</span> <span class="uscript-string">"~~~~~~~~"</span><span class="uscript-operator">;</span>

                    <span class="uscript-operator">}</span>


             <span class="uscript-operator">}</span>



<span class="uscript-operator">}</span></pre><pre class="paraverbatim"> </pre><p>Now if a player disconnects in an attempt to reset the mutator values and get a fresh start, they will bet their old values. Of course if they change their name it will reset their values. Oh well. At least they will have to do some more work.</p>
<p>Now that you have your arrays set, filled and ready to go... now what???</p>
<p>You need to use those values and actually do something with them.</p>
<p>This is how I used my newly created var array</p>
<p>Here is just a portion of the mutator (Too much stuff to put it all here)</p>
<pre class="uscript">       <span class="uscript-comment">// Here is where the magic happens!!!</span>
<span class="uscript-keyword">function</span> Timer <span class="uscript-operator">(</span><span class="uscript-operator">)</span>              <span class="uscript-comment">// I decided to use the timer function    </span>
<span class="uscript-operator">{</span>                              <span class="uscript-comment">// In prebeginplay we set the timer cycle time</span>
   <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> R<span class="uscript-operator">,</span>T<span class="uscript-operator">;</span>              <span class="uscript-comment">// settimer(1.5,true) 1.5=the time between cycles, True=does it repeat</span>



   

<span class="uscript-keyword">for</span> <span class="uscript-operator">(</span> Runner <span class="uscript-operator">=</span> Level<span class="uscript-operator">.</span>PawnList<span class="uscript-operator">;</span> Runner <span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span> Runner<span class="uscript-operator">=</span>Runner<span class="uscript-operator">.</span>NextPawn<span class="uscript-operator">)</span> <span class="uscript-comment">// Lets grab a player (Runner)</span>
 <span class="uscript-operator">{</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span> <span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
   <span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span>   <span class="uscript-operator">(</span><span class="uscript-operator">!</span>PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'Spectator'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
     <span class="uscript-operator">{</span>
      <span class="uscript-keyword">if</span>   <span class="uscript-operator">(</span>PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'playerPawn'</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">!</span>PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'bot'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        R <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerID<span class="uscript-operator">;</span>  <span class="uscript-comment">// We got a valid player</span>
            <span class="uscript-comment">// We can now use the valid players ID to 'tie' it to an array by 'seeting' the value R=PlayerID</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">==</span> <span class="uscript-string">""</span> <span class="uscript-operator">||</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PlayerName <span class="uscript-operator">!=</span> PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>PlayerName<span class="uscript-operator">)</span><span class="uscript-operator">)</span>
         <span class="uscript-operator">{</span>
          Update<span class="uscript-operator">(</span>PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>  <span class="uscript-comment">// The player ID and Name dont match so we need to update the array</span>
         <span class="uscript-operator">}</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>level<span class="uscript-operator">.</span>Game<span class="uscript-operator">.</span>bTeamGame<span class="uscript-operator">)</span>
         <span class="uscript-operator">{</span>
          T <span class="uscript-operator">=</span> PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>Team<span class="uscript-operator">;</span>
         <span class="uscript-operator">}</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PositionX <span class="uscript-operator">!=</span> PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>Location<span class="uscript-operator">.</span>X<span class="uscript-operator">)</span> <span class="uscript-operator">||</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>PositionY <span class="uscript-operator">!=</span> PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>Location<span class="uscript-operator">.</span>Y<span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
         <span class="uscript-operator">{</span>                       <span class="uscript-comment">// Here we make a check on the players postition so we know if they have moved</span>
          PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>bMoved <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>   <span class="uscript-comment">// This way the grace period timer does not start until they move</span>
         <span class="uscript-operator">}</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>bMoved<span class="uscript-operator">)</span>        <span class="uscript-comment">// Once they have moved the graceperiod time starts</span>
         <span class="uscript-operator">{</span>
          PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>GPTime <span class="uscript-operator">--</span><span class="uscript-operator">;</span>       <span class="uscript-comment">// Every cycle of the timer will take 1 off of the var GPTime in the players array</span>
          <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>GPTime <span class="uscript-operator">&gt;</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span> <span class="uscript-comment">// If the value is over the GPtime we send the player a message of what the current count is</span>
           <span class="uscript-operator">{</span>
            PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>ReceiveLocalizedMessage<span class="uscript-operator">(</span> <span class="uscript-keyword">class</span><span class="uscript-name">'Warning3'</span><span class="uscript-operator">,</span>PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>GPTime<span class="uscript-operator">,</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">break</span><span class="uscript-operator">;</span>                <span class="uscript-comment">// Here I use the the value of GPTime to determine which message get displayed</span>
           <span class="uscript-operator">}</span>                      <span class="uscript-comment">// Using 'break' here will stop any more of the code from this function from getting executed</span>
                                  <span class="uscript-comment">// Otherwise the engine will exit out this 'if' statment and continue on to the next one.</span>
          <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>GPTime <span class="uscript-operator">==</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>  <span class="uscript-comment">// At 0, the player gets a message telling them GP is over</span>
           <span class="uscript-operator">{</span>
            SetMessage <span class="uscript-operator">(</span> <span class="uscript-keyword">class</span><span class="uscript-name">'SIDv5.RunMonitor'</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>Message<span class="uscript-operator">[</span><span class="uscript-number">8</span><span class="uscript-operator">]</span><span class="uscript-operator">,</span> <span class="uscript-number">8</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            PlayerPawn<span class="uscript-operator">(</span>Runner<span class="uscript-operator">)</span><span class="uscript-operator">.</span>ReceiveLocalizedMessage<span class="uscript-operator">(</span> <span class="uscript-keyword">class</span><span class="uscript-name">'Warning2'</span><span class="uscript-operator">,</span><span class="uscript-number">8</span><span class="uscript-operator">,</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            PI<span class="uscript-operator">[</span>R<span class="uscript-operator">]</span><span class="uscript-operator">.</span>bGP <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>     <span class="uscript-comment">// Once the GPTime gets to 0 we set the vlaue bGp to true so it no bypasses this section</span>
           <span class="uscript-operator">}</span>
          <span class="uscript-operator">}</span></pre><p>That is just a small example of how I got my mutator to work.  Using this example, you will be able do many different types of things. </p>
<p><em class="em2">Tarquin:</em> Hi, welcome to Unreal Wiki <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">WalknBullseye:</em> Thanks, good to be here</p>
<script type="text/javascript"><!--
 menuItemAdd("Vars", "#0.0.1");
menuItemAdd("Setting the values", "#0.0.2");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited July 9, 2006 13:26 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=WalknBullseye">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/WalknBullseye">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>Always snap to grid
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
