<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: TriggeredAmbientSound</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=TriggeredAmbientSound; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=TriggeredAmbientSound">TriggeredAmbientSound</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut.png"> <a href="unreal-tournament.html">UT</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="keypoint-ut.html">Keypoint (UT)</a> &gt;&gt; TriggeredAmbientSound<br></div>
<p>One of the Great Mysteries of Unreal I and UT: how to get this to work...?</p>
<p>It seems problem #1 is Advanced &rarr; bStatic needs to be set to false. However, there are reports that this still doesn't fix it.</p>
<p>Several coders have made their own versions:</p>
<h2><a name="0.1"></a>Extending </h2>
<h3><a name="0.1.1"></a>YoMammy: (04/11/2002)</h3>
<p>Advanced &rarr; bStatic IS the problem with the TriggeredAmbientSound.  On and above that, the TAS was likely coded up rather quickly for a specific purpose and therefor leaves lots to be desired.</p>
<p>For you sounding pleasure, however, I coded up a much better (if I do say so myself <img alt=":)" src="emoticons/smile.gif" align="middle"> ) TAS.  Here's a list of its new properties and one other parent property setting worth mentioning:</p>
<p>TrigAmbSound properties:</p>
<ul><li>var() sound StartSound;</li>
<li>var() sound AmbSound;</li>
<li>var() sound StopSound;</li>
<li>var() bool  bInitiallyOn;</li>
<li>var() float AmbDuration;</li>
<li>Object/InitialState   TriggerToggle or TriggerControl (latter is default)</li>
</ul>
<p>"StartSound" is where you can optionally place a one-shot sound.  This will play when the TAS is triggered.  Thereafter, if you specified an "AmbSound" (preferrably a looping sound), it will then play until you untrigger.  Once untriggered, if you specified a "StopSound", that will play to finish things up.</p>
<p>"bInitially" should only be set to True if you set Object/InitialState = TriggleToggle.  When doing this, the "StartSound" is bypassed and the process proceeds to the "AmbSound"...if any was specified.</p>
<p>If you set "AmbDuration" to anything other than it's default 0.0, the looping ambient sound specified in "AmbSound" will only play for the duration specified.  Thereafter, things will work as normal...i.e. you'll still get the "StopSound" when untriggering.</p>
<p>If you want the script, get it here: <a href="http://www.gentekcom.com/~diinc/UTMaps/TrigAmbSound.u">http://www.gentekcom.com/~diinc/UTMaps/TrigAmbSound.u</a></p>
<p>In UEd, You'll find it under KeyPoint (where you'd expect).  Open up the script and look at it...its ridiculously simple.  Now, forgive me for being a smartass, but isn't THIS what you'd expect a TriggeredAmbientSound to do in the first place?</p>
<p><em class="em2">CoolDude:</em> Too bad, the link above seems to be broken. If anybody has a working one, please add it.</p>
<h3><a name="0.1.2"></a>2001</h3>
<p><em class="em2">Tarquin:</em> I tried a search of my UT folder for anything with the name "TrigAmbSound" and found this in both a map called DM-2001][ by Wayne Young (AKA Slartybartfast) and wdy_mods.U (whatever that is!) The 'OnWhileTriggered' state sounds like it corresponds to 'TriggerControl' described above. I don't know if it's coincidence that it uses the same name, or if it's an earlier version. If anyone feels like contacting this guy and asking him if we can alter his script &amp; improve it, his website is <a href="http://www.ganimede.demon.co.uk/">http://www.ganimede.demon.co.uk/</a> (and he works for nVidia).</p>
<pre class="uscript"><span class="uscript-comment">//=============================================================================</span>
<span class="uscript-comment">// TrigAmbSound.</span>
<span class="uscript-comment">//=============================================================================</span>
<span class="uscript-keyword">class</span> TrigAmbSound <span class="uscript-keyword">extends</span> Keypoint<span class="uscript-operator">;</span>

<span class="uscript-comment">// Re-plays a sound effect if triggered.  If in state TriggerToggled,</span>
<span class="uscript-comment">// the sound is turned off if triggered, and turned on, etc..</span>
<span class="uscript-comment">// when triggered again.  In the OnWhileTriggered state, the instigator</span>
<span class="uscript-comment">// must stay within the trigger's radius for the sound effect to continue</span>
<span class="uscript-comment">// playing.  bInitiallyOn determines if the sound is playing from the </span>
<span class="uscript-comment">// start, and does not apply in the OnWhileTriggered state.</span>

<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound StartSound<span class="uscript-operator">;</span> <span class="uscript-comment">// Hmmm. This doesn't do anything yet :(</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound LoopSound<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound EndSound<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">bool</span>  bInitiallyOn<span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span>   <span class="uscript-type">bool</span>  bIsOn<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> BeginPlay <span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>   
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>bInitiallyOn<span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
<span class="uscript-comment">//    if (StartSound != None) {</span>
<span class="uscript-comment">//    PlaySound (StartSound, , Float(SoundVolume)/128, , Float(SoundRadius)*25);</span>
<span class="uscript-comment">//    }</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>LoopSound <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
      PlaySound <span class="uscript-operator">(</span>LoopSound<span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundVolume<span class="uscript-operator">)</span><span class="uscript-operator">/</span><span class="uscript-number">128</span><span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundRadius<span class="uscript-operator">)</span><span class="uscript-operator">*</span><span class="uscript-number">25</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-operator">}</span>
    bIsOn <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">state</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> TriggerToggled
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">function</span> Trigger<span class="uscript-operator">(</span> actor Other<span class="uscript-operator">,</span> pawn EventInstigator <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
    bIsOn <span class="uscript-operator">=</span> <span class="uscript-operator">!</span>bIsOn<span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>bIsOn<span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
<span class="uscript-comment">//      if (StartSound != None) {</span>
<span class="uscript-comment">//      PlaySound (StartSound, , Float(SoundVolume)/128, , Float(SoundRadius)*25);</span>
<span class="uscript-comment">//      }</span>
      <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>LoopSound <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
        PlaySound <span class="uscript-operator">(</span>LoopSound<span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundVolume<span class="uscript-operator">)</span><span class="uscript-operator">/</span><span class="uscript-number">128</span><span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundRadius<span class="uscript-operator">)</span><span class="uscript-operator">*</span><span class="uscript-number">25</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
      <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span> <span class="uscript-operator">{</span>
      <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>EndSound <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
        PlaySound <span class="uscript-operator">(</span>EndSound<span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundVolume<span class="uscript-operator">)</span><span class="uscript-operator">/</span><span class="uscript-number">128</span><span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundRadius<span class="uscript-operator">)</span><span class="uscript-operator">*</span><span class="uscript-number">25</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
      <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">state</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> OnWhileTriggered
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">function</span> Trigger<span class="uscript-operator">(</span> actor Other<span class="uscript-operator">,</span> pawn EventInstigator <span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
    bIsOn <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
<span class="uscript-comment">//    if (StartSound != None) {</span>
<span class="uscript-comment">//    PlaySound (StartSound, , Float(SoundVolume)/128, , Float(SoundRadius)*25);</span>
<span class="uscript-comment">//    }</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>LoopSound <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
      PlaySound <span class="uscript-operator">(</span>LoopSound<span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundVolume<span class="uscript-operator">)</span><span class="uscript-operator">/</span><span class="uscript-number">128</span><span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundRadius<span class="uscript-operator">)</span><span class="uscript-operator">*</span><span class="uscript-number">25</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>

  <span class="uscript-keyword">function</span> UnTrigger<span class="uscript-operator">(</span> actor Other<span class="uscript-operator">,</span> pawn EventInstigator <span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
    bIsOn <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>EndSound <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">{</span>
      PlaySound <span class="uscript-operator">(</span>EndSound<span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundVolume<span class="uscript-operator">)</span><span class="uscript-operator">/</span><span class="uscript-number">128</span><span class="uscript-operator">,</span> <span class="uscript-operator">,</span> <span class="uscript-type">Float</span><span class="uscript-operator">(</span>SoundRadius<span class="uscript-operator">)</span><span class="uscript-operator">*</span><span class="uscript-number">25</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>

Begin:
    bIsOn <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h2><a name="0.2"></a>Related Topics</h2>
<ul><li><a href="triggering-sounds.html">Triggering Sounds</a> covers the various workarounds</li>
<li><a href="embedding-code.html">Embedding Code</a> explains how to add custom classes to a map</li>
</ul>
<h2><a name="0.3"></a>Discussion</h2>
<p><em class="em2">GTD-Carthage:</em> Hey, has there been any update here? :o Looks like this is one unsolved problem...</p>
<p><em class="em2">SuperApe:</em> The bStatic problem?  I have a thought about this, although I'm not a UT person.  The bStatic problem could be solved with a special Trigger, like the VolumeTrigger is able to toggle bStatic Volumes.  The custom Trigger function can simply search for TrigAmbSound actors with the matching Tag and call <u>the TrigAmbSound's</u> Trigger function.</p>
<hr class="thin"><p><a href="category-class-ut.html">Category Class (UT)</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Extending ", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>YoMammy: (04/11/2002)", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>2001", "#0.1.2");
menuItemAdd("Related Topics", "#0.2");
menuItemAdd("Discussion", "#0.3");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=TriggeredAmbientSound">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=TriggeredAmbientSound">View other revisions</a><br>Last edited October 22, 2006 12:54 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=TriggeredAmbientSound">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/TriggeredAmbientSound">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>I don't need to test my programs. I have an error-correcting modem.
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
