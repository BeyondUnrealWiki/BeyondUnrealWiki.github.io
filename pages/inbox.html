<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Inbox</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Inbox; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Inbox">Inbox</a></h1>
	<div class="wiki"><p>This is a page for material that doesn't yet have a home. Add anything you like here, and seasoned contributors will at some point find it a home elsewhere in the Wiki. To get started, click the "Edit text of this page" link at the bottom of this page.</p>
<h2><a name="0.1"></a>Example</h2>
<p>This is the body text. Here's a link to the <a href="new-contributors-quick-star.html">New Contributors Quick Start</a> page.</p>
<p>New paragraph. Check the above link for info on giving yourself a username &amp; your own user page on the system. Below is a rule-off. Start new entries below &amp; follow this markup.</p>
<hr class="thin"><p><em class="em2">Mysterial:</em> In UT2003, GameInfo and Mutator have a function GetServerDetails() that allows modmakers to add to the info displayed by the server browser in the bottom left window.</p>
<hr class="thin"><p>A problem some mods could have is that they want to modify all of a specific kind of object's properties, yet functions like <a href="mutator.html">Mutator</a>'s IsRelevant() don't get called on them. This problem can be fixed with the code:</p>
<pre class="uscript"><span class="uscript-keyword">local</span> Object O<span class="uscript-operator">;</span>

<span class="uscript-keyword">foreach</span> AllObjects<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'object'</span><span class="uscript-operator">,</span> O<span class="uscript-operator">)</span>
            <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>ClassIsChildOf<span class="uscript-operator">(</span><span class="uscript-keyword">Class</span><span class="uscript-operator">(</span>O<span class="uscript-operator">)</span><span class="uscript-operator">,</span> <span class="uscript-keyword">class</span><span class="uscript-name">'BaseClass'</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
                <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>BaseClass<span class="uscript-operator">&gt;</span><span class="uscript-operator">(</span>O<span class="uscript-operator">)</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>SomeVariable <span class="uscript-operator">=</span> SomeValue<span class="uscript-operator">;</span></pre><p>This code needs only run once, and allows you to change the default properties of any class below some base class.</p>
<p><em class="em2">Foxpaw:</em> You could do that with a lot less CPU usage by cutting out the middleman:</p>
<pre class="uscript"><span class="uscript-keyword">local</span> Object O<span class="uscript-operator">;</span>

<span class="uscript-keyword">foreach</span> AllObjects<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'BaseClass'</span><span class="uscript-operator">,</span> O<span class="uscript-operator">)</span>
  <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>BaseClass<span class="uscript-operator">&gt;</span><span class="uscript-operator">(</span>O<span class="uscript-operator">)</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>SomeVariable <span class="uscript-operator">=</span> SomeValue<span class="uscript-operator">;</span></pre><p><em class="em2">Mysterial:</em> That doesn't work; the iterator would return actual objects, not classes that you could cast like that. Plus, the point is to change the default value for all subclasses of the BaseClass, not BaseClass itself.</p>
<p><em class="em2">Foxpaw:</em> I see you are right about the class casting. I'm not sure where my head was when I wrote that bit. This one would work - and subclasses of that class will still get the call from the iterator:</p>
<pre class="uscript"><span class="uscript-keyword">local</span> BaseClass O<span class="uscript-operator">;</span>

<span class="uscript-keyword">foreach</span> AllObjects<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'BaseClass'</span><span class="uscript-operator">,</span> O<span class="uscript-operator">)</span>
  O<span class="uscript-operator">.</span><span class="uscript-keyword">Class</span><span class="uscript-operator">.</span><span class="uscript-keyword">default</span><span class="uscript-operator">.</span>SomeVariable <span class="uscript-operator">=</span> SomeValue<span class="uscript-operator">;</span></pre><hr class="thin"><p><em class="em2">Mysterial:</em> It seems as though Actor references don't get properly set to None in objects not subclassed from Actor. I had an Interaction that set a variable to one of the local pawn's inventory items, and if that pawn died the game would often crash because the variable wasn't None even though the inventory item no longer existed.</p>
<p>In addition, the game will randomly crash during garbage collection if an object that is no longer referenced (for example, a menu long closed) if that object contains an invalid Actor reference. The trademark of such a crash is a long list of (Some Object)&rarr;Serialize strings in the backtrace.</p>
<hr class="thin"><p><em class="em2">Foxpaw:</em> This works, but is bad mojo. So don't do it. It's probrably unstable. If you have a wierd, really wierd bug, maybe it's caused by something like this. I did it by mistake before I realized that I was using something I hadn't declared in that class, but in a subclass of it.</p>
<p>Ph3AR! A hole in the time-space continuum:</p>
<pre class="uscript"><span class="uscript-keyword">class</span> ImAClass <span class="uscript-keyword">extends</span> Actor<span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span> Someotherclass Classtastic<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> Ihavefunctions<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  ClassTastic<span class="uscript-operator">.</span>AStruct<span class="uscript-operator">.</span>Avar <span class="uscript-operator">=</span> <span class="uscript-number">3</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>
<span class="uscript-comment">// Blah blah blah.</span>

<span class="uscript-keyword">class</span> ASubclass <span class="uscript-keyword">extends</span> ImAClass<span class="uscript-operator">;</span>

<span class="uscript-keyword">struct</span> StructDef
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">float</span> AVar<span class="uscript-operator">;</span>
  <span class="uscript-keyword">var</span> <span class="uscript-type">string</span> AnotherVar<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>
<span class="uscript-comment">// And then some...</span>

<span class="uscript-keyword">class</span> Someotherclass <span class="uscript-keyword">extends</span> actor <span class="uscript-keyword">dependson</span><span class="uscript-operator">(</span>Asubclass<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span> ASubclass<span class="uscript-operator">.</span>StructDef Astruct<span class="uscript-operator">;</span></pre><p>Note that we are calling something that hasn't really been defined yet. An even easier way of causng mayhem:</p>
<pre class="uscript"><span class="uscript-keyword">class</span> MyClass <span class="uscript-keyword">extends</span> Actor<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> MySubClass Submarine<span class="uscript-operator">;</span>

<span class="uscript-keyword">class</span> MySubClass <span class="uscript-keyword">extends</span> MyClass<span class="uscript-operator">;</span></pre><p>Suffice it to say, don't refer to subclasses of a class within that same class, or the UEd Goblin will eat your babies! Alternatively, this type of wanton class looping results in GPFs if you make a wrong move.</p>
<p><em class="em2">Wormbo:</em> That second thing works reasonably well with the <a href="actor.html">Actor</a> class and its Instigator variable which is a <a href="pawn.html">Pawn</a> reference (subclass of Actor) or its Level variable which a <a href="levelinfo.html">LevelInfo</a> reference (also a subclass of Actor).</p>
<p><em class="em2">Foxpaw:</em> Well, yes, it works, it's just that it has a high risk of ceasing to work as a result of changes.. plus it's extremely poor OOP form, if you ask me.</p>
<hr class="thin"><p><em class="em2">Foxpaw:</em> BSP that is extremely distant seems to not be drawn, or not be drawn properly. I made a cubic brush 2^18 units per side and the surfaces did not show up at all when I subtracted it. A brush 2^17 units per side showed up but had a HOM effect in the editor. Brushes of 2^16 units per side and smaller seem to work fine. This seems to work fine if the surfaces are fake backdrop, however.</p>
<p><em class="em2">Birelli:</em> To the BSP drawing thing - I imagine that has something to do with textures. When each "tiling" of the texture becomes less than 1 pixel, for instance, the algorithm might start to break down. This wouldn't necessarily happen with fake backdrop because the backdrop isn't drawn the same way.</p>
<hr class="thin"><p><em class="em2">Foxpaw:</em> I noticed that if you override a function in a subclass that has one or more variables declared as "out" variables, if you change the declaration in the subclass and leave out the "out" keyword, the compiler will accept the new version and that variable will not be treated as an "out" variable for that class and it's subclasses. I'm not sure if this works the other way around. (making a non-out variable an out variable.)</p>
<hr class="thin"><p><em class="em2">Foxpaw:</em> If you destroy an actor within KImpact, UT2003 gives you a GPF. I believe this is because the list of all colliding actors is generated, then each collision isis evaluated. As a result, after the actor is destroyed other things that were colliding with that actor still want to collide with it an there's a null pointer being accessed within the native code. But that's just speculation on WHY it GPFs. The workaround appears to be setting a flag so the actor can destroy itself in Tick.</p>
<p><em class="em2">Mysterial:</em> This is true of pretty much every Karma event. In addition, you shouldn't edit the Karma properties of an object in a Karma function, for similar reasons. I *think* there are checks for these kinds of things in UT2004, but I'd take the safe path and just flag things for processing elsewhere.</p>
<p><em class="em2">Foxpaw:</em> I really hope they do include checks.. I'd really like to be able to destroy objects from within the KImpact event. If one of the ships in my mod hits something going at any kind of speed, it takes damage, which may result in destruction.. so I've had to delay all destruction due to damage to the next tick, which is a bit hackier than I like.</p>
<hr class="thin"><p><em class="em2">Foxpaw:</em> Apparently, using a reference in the default properties to call an iterator gives an "invalid code token" at runtime. IE, class'Whatever'.default.Singleton.SomeFunction() is okay, but foreach class'Whatever'.default.Singleton.AllObjects( class'etc', etc ) gives the invalid code token. I found this interesting as both seem like function calls and you can use an iterator like that for references not stored in the default properties.</p>
<p>Also AllActors is amazingly slow. A Uscripted Dynamic array with all the same contents can be iterated through in roughly one quarter of the time.</p>
<hr class="thin"><p>From Mod Authoring/Introduction to Gametypes</p>
<h2><a name="0.2"></a>Update for UT2K4 :</h2>
<p><em class="em2">BigJohn:</em> This seems to have changed a bit in Unreal Tournament 2004. In order to make a gametype mod and have it appear under the game list, we now need to have 4 values in our GameType's class' defaultproperties :</p>
<pre class="uscript"><span class="uscript-keyword">class</span> MyGame <span class="uscript-keyword">extends</span> DeathMatch<span class="uscript-operator">;</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
   GameName<span class="uscript-operator">=</span><span class="uscript-string">"My Game"</span>
   Acronym<span class="uscript-operator">=</span><span class="uscript-string">"MG"</span>
   MapPrefix<span class="uscript-operator">=</span><span class="uscript-string">"MG"</span>
   Description<span class="uscript-operator">=</span><span class="uscript-string">"A bloody fight to the death!!!."</span>
<span class="uscript-operator">}</span></pre><p>Also, there is no need for the Object line in the game's int file (But you do need the Preferences line!).</p>
<p>Your MyPackage.int should look like this:</p>
<pre class="uscript"><span class="uscript-operator">[</span>Public<span class="uscript-operator">]</span>
Preferences<span class="uscript-operator">=</span><span class="uscript-operator">(</span>Caption<span class="uscript-operator">=</span><span class="uscript-string">"My Game"</span><span class="uscript-operator">,</span>Parent<span class="uscript-operator">=</span><span class="uscript-string">"Game Types"</span><span class="uscript-operator">,</span><span class="uscript-keyword">Class</span><span class="uscript-operator">=</span>MyPackage<span class="uscript-operator">.</span>MyGame<span class="uscript-operator">,</span>Immediate<span class="uscript-operator">=</span><span class="uscript-keyword">True</span><span class="uscript-operator">)</span>

<span class="uscript-operator">[</span>MyGame<span class="uscript-operator">]</span>
GameName<span class="uscript-operator">=</span><span class="uscript-string">"My Game"</span>
Description<span class="uscript-operator">=</span><span class="uscript-string">"A bloody fight to the death!!!."</span></pre><p>You can use the command </p>
<p>ucc dumpint MyGame.u </p>
<p>to create the [MyGame] section in the .int file.</p>
<p>UCC can generate a .ucl file from our package's .u file. This can be achieved by typing this command:</p>
<p>ucc exportcache MyGame.u MyGame.ucl</p>
<p>Once this is done, the only thing left is to have a map in the UT2004\Maps folder with the appropriate prefix, in the above case MG.</p>
<hr class="thin"><p><em class="em2">Tarquin:</em> We can't edit these pages because they are by Epic. Please can we find another home for the above piece of text?</p>
<p>Co11: Also, for ut2004.. it seems that Deathmatchplus and TeamGamePlus are no longer functional. Try just Deathmatch and TeamGame.</p>
<p><em class="em2">Wormbo:</em> As stated on <a href="mod-authoring.html">Mod Authoring</a> this whole tutorial is only for <a href="unreal-tournament.html">UT</a>, not for newer engine versions. For anything else go to <a href="unrealscript-lessons.html">UnrealScript Lessons</a> or <a href="making-mods.html">Making Mods</a>.</p>
<p><a href="category-to-do.html">Category To Do</a> &mdash; Move content to the correct pages.</p>
<hr class="thin"><p><em class="em2">Foxpaw:</em> I noticed something interesting today, apparently function arguments in subclasses need not have the same names as their original declarations, as long as they are of the same type and in the same order. IE, the following is valid:</p>
<pre class="uscript"><span class="uscript-keyword">class</span> A <span class="uscript-keyword">extends</span> Object<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> F<span class="uscript-operator">(</span> <span class="uscript-type">float</span> P <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-comment">// Do Stuff.</span>
<span class="uscript-operator">}</span></pre><pre class="uscript"><span class="uscript-keyword">class</span> B <span class="uscript-keyword">extends</span> A<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> F<span class="uscript-operator">(</span> <span class="uscript-type">float</span> Q <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>F<span class="uscript-operator">(</span> Q <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

  <span class="uscript-comment">// Do some other stuff.</span>
<span class="uscript-operator">}</span></pre><p>Of questionable value, but it's possible. I noticed that some of Epic's code uses "dt" as the argument name for tick some places instead of "Delta," so I tested it in my own code and it seems to work.</p>
<p><em class="em2">MythOpus:</em> Yep <img alt=":D" src="emoticons/biggrin.gif" align="middle">  I caught on to that quite quickly.  It helps to give more descriptive names to arguments in your code, rather than using epics stuff.</p>
<p><em class="em2">Mychaeel:</em> Indeed.  Usually, in any object-oriented language, only the function prototype &ndash; i.e. the function name, its return type and its parameter types, but not the symbolic parameter names &ndash; are relevant for resolving a function reference.  (In many languages which support function pre-declaration, it's even valid to leave the parameter names out: <code>void foo(float, int)</code> is perfectly valid in C and C++.)</p>
<hr class="thin"><p><em class="em2">Blip2:</em> I found this cool program for the text colours in UT this apparently causes problems with names but I have found it is useful with in-game coloured messages I would write happily write a paragraph or two about how to do this and where to get this program if I knew where to write it (any ideas?)</p>
<p><em class="em2">Graphik:</em> Create a page for it.</p>
<script type="text/javascript"><!--
 menuItemAdd("Example", "#0.1");
menuItemAdd("Update for UT2K4 :", "#0.2");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited September 21, 2005 18:24 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Inbox">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Inbox">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>I'm a doctor, not a mechanic
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
