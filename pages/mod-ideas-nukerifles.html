<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Mod Ideas/NukeRifles</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Mod_Ideas/NukeRifles; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="mod-ideas.html">Mod Ideas</a>/<a href="http://wiki.beyondunreal.com/wiki?back=Mod+Ideas/NukeRifles">NukeRifles</a></h1>
	<div class="wiki"><h3><a name="0.0.1"></a>NukeRifles mutator</h3>
<h4><a name="0.0.1.1"></a>Combat using modified Sniperifles that fire nuclear bullets!</h4>
<p>Just as devastating as the Redeemer, but instant hit, and zoom too <img alt=";-)" src="emoticons/wink.gif" align="middle"></p>
<p>Yes, I know it's totally silly, but it' good fun for about 5 minutes...</p>
<p>I'd like to do a version of it for UT2003, but am having trouble figuring out how the new Redeemer code works &ndash; specifically it uses states to gradually move the damage  radius out as the shockwaves expand, so the victims get gibbed when the wave hits them.  Each time I try to use states, the compiler throws up some error or other... <img alt=":-(" src="emoticons/sad.gif" align="middle"> So at the moment, in my mut they just get gibbed instantly, which looks really lame.  In good old UT, I could just spawn a <em class="em1">Shockwave</em> object, this did the whole lot automatically...  <img alt=":-)" src="emoticons/smile.gif" align="middle"></p>
<p>Thanks, \</p>
<p><em class="em2">Electric Mini:</em></p>
<hr class="thin"><p>Update... I've got it (mostly) working</p>
<p>I've managed to get it to work after poking around the Net all day <img alt=":-)" src="emoticons/smile.gif" align="middle"></p>
<p>I've had to spawn a custom class <em class="em1">NukeRifleExplosion</em>, based on the <em class="em1">RedeemerFire</em> stuff.</p>
<p>This spawns a nuke explosion, which is allowed to have states, so I get the nice shockwaves and huge <em class="em2">BOOM</em> explosion noise...</p>
<p>But... I can't get the kills to register properly! Up until 10 minutes ago I couldn't score a single kill with this mut, only suicides were counted (DOH!). The only way I've found to do this so far is to call <em class="em1">Other.TakeDamage</em>, this passes the <em class="em1">Instigator</em> along so kills are recorded for whichever victim you hit. But this sucks, 'cos it's instant, and you only get credit for killing the poor sucker the beam actually hits! </p>
<p>Everyone else that dies gets counted as a suicide (ugh!).</p>
<p>The Redeemer code uses <em class="em1">HurtRadius</em>, but I can't see how this gets info on who fired the thing to the victim (like <em class="em1">Other.TakeDamage</em> would).</p>
<p>Is there some easy way to hurt all the actors within a radius of a target, making sure that if they die the person who fired the shot gets the credit?</p>
<p>Am I just barking up the wrong tree here? Or am I just barking mad?  <img alt=";-)" src="emoticons/wink.gif" align="middle"></p>
<p>P.S. If anyone wants the NukeRifles mut, put a comment here and I'll put it up on the www somewhere. Oh yes, I've now got zooming working too, like Zoom-Instagib.</p>
<p>P.P.S. I've also done NukeRifles for UT and a Nuclear-War mut for UT (replaces all weapons with 2-shot Redeemers... better run for cover).   Again, if anyone wants them, shout.</p>
<p><em class="em2">Electric Mini</em></p>
<hr class="thin"><p><em class="em2">Eldhrin:</em> Use HurtRadius for initiating the damage &ndash; I'm not sure how, but somehow it Just Works. Most of the time at least <img alt=":-)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">Electric Mini:</em> That's what it does at the moment. I think the problem may be  that I just "borrowed" the Redeemer code, and that spawns the Redeemer missile as a separate Pawn, which then explodes when it hits something. My hack just spawns it, and it explodes immediately ( gross hack or what? <img alt=";-)" src="emoticons/wink.gif" align="middle">. </p>
<p>So I think the kills are getting attributed to this Redeemer missile actor, rather than to the player who fired it (somewhere the chain of ownership is getting broken).</p>
<p>I guess I really should dig deeper and learn how the Redeemer stuff works, then think of a decent way to code it. A task to prove me worthy, eh?</p>
<p><em class="em2">Eldhrin:</em> lol yes. However, it sounds like what you should really be doing is using a subclass of InstantFire, with code pulled out of the Redeemer's missile class in its hit-the-target routine. Or, have a look at the code in the Redeemer (or rather in one of its superclasses) which actually spawns the missile, and see if there's anything in that which looks like how the chain of ownership is preserved. It might be as simple as one of the optional parameters passed to Spawn.</p>
<p><em class="em2">Electric Mini:</em> I've got it working properly now, I must have been doing something stupid before (no surprises there! <img alt=";-)" src="emoticons/wink.gif" align="middle">).  I'm using the SuperShockRifle (a.k.a InstaGib Rifle) as the basis for the weapon, so it is a weird hybrid of an instant-hit weapon (InstaGib Rifle) and a projectile weapon (Redeemer).</p>
<p>I've modified the TracePart() routine so it won't recursively trace until it hits the level (that was how you could shoot through one enemy and kill a second one with just one shot) now it spawns a modified Redeemer projectile (no skins or static meshes, so it's invisible).</p>
<pre class="uscript"><span class="uscript-keyword">function</span> TracePart<span class="uscript-operator">(</span>Vector Start<span class="uscript-operator">,</span> Vector End<span class="uscript-operator">,</span> Vector X<span class="uscript-operator">,</span> Rotator Dir<span class="uscript-operator">,</span> Pawn Ignored<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> Vector HitLocation<span class="uscript-operator">,</span> HitNormal<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> Actor Other<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> NukeRifleProjectile big_bang<span class="uscript-operator">;</span>

    Other <span class="uscript-operator">=</span> Ignored<span class="uscript-operator">.</span>Trace<span class="uscript-operator">(</span>HitLocation<span class="uscript-operator">,</span> HitNormal<span class="uscript-operator">,</span> End<span class="uscript-operator">,</span> Start<span class="uscript-operator">,</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">(</span>Other <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>Other <span class="uscript-operator">!=</span> Ignored<span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-comment">//if ( !Other.bWorldGeometry )</span>
        <span class="uscript-comment">//{</span>
            HitNormal <span class="uscript-operator">=</span> <span class="uscript-keyword">Vect</span><span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            <span class="uscript-comment">//if ( (Pawn(Other) != None) &amp;&amp; (HitLocation != Start) &amp;&amp; Weapon.IsA('NukeRifle') )</span>
            <span class="uscript-comment">//  TracePart(HitLocation,End,X,Dir,Pawn(Other));</span>
        <span class="uscript-comment">//}</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span>
    <span class="uscript-operator">{</span>
        HitLocation <span class="uscript-operator">=</span> End<span class="uscript-operator">;</span>
        HitNormal <span class="uscript-operator">=</span> <span class="uscript-keyword">Vect</span><span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    SpawnBeamEffect<span class="uscript-operator">(</span>Start<span class="uscript-operator">,</span> Dir<span class="uscript-operator">,</span> HitLocation<span class="uscript-operator">,</span> HitNormal<span class="uscript-operator">,</span> <span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> Instigator<span class="uscript-operator">.</span>bDeleteMe <span class="uscript-operator">!=</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span>
        big_bang <span class="uscript-operator">=</span> Spawn<span class="uscript-operator">(</span><span class="uscript-keyword">class</span><span class="uscript-name">'my_mod2.NukeRifleProjectile'</span><span class="uscript-operator">,</span>Instigator<span class="uscript-operator">,</span><span class="uscript-operator">,</span> HitLocation <span class="uscript-operator">-</span> <span class="uscript-operator">(</span><span class="uscript-number">100</span><span class="uscript-operator">*</span>Normal<span class="uscript-operator">(</span>HitLocation <span class="uscript-operator">-</span> Start<span class="uscript-operator">)</span><span class="uscript-operator">)</span> <span class="uscript-operator">,</span> Dir<span class="uscript-operator">)</span><span class="uscript-operator">;</span>                      
<span class="uscript-operator">}</span></pre><p>Am I right about what I think <em class="em1">TracePart()</em> is doing? The commented-out bits are how it did the recursive tracing, right?</p>
<p><em class="em1">NukeRifleProjectile</em> is a copy of <em class="em1">RedeemerProjectile</em>, with a few of the default properties changed. It also blows up with a full-sized nuke explosion if it is damaged, rather than a small explosion like the Redeemer missile does.</p>
<p>In my previous attempts this projectile would automatically go into the Dying state, but it'd only produce a pretty explosion if you directly shot someone. If you hit something else, you'd get the damage but no visual explosion (weird). </p>
<p>This time, I've left its states alone, but I'm spawning it about 100 units back along the line of fire, so the projectile will slam into the target and explode normally.</p>
<p>Yeehaa! It works! <img alt=":-)" src="emoticons/smile.gif" align="middle"></p>
<p>It's also very deadly! <img alt=":-)" src="emoticons/smile.gif" align="middle"> <img alt=":-)" src="emoticons/smile.gif" align="middle"></p>
<p>Now the real challenge is to see if it'll work over a network....</p>
<p>I can't test this &ndash; haven't got a network, and my ISP won't allow servers to be run off their cablemodem connections (bummer).</p>
<p>I've put the whole of the <a href="nukerifles-code.html">NukeRifles Code</a> up.</p>
<p>Thanks \</p>
<p><em class="em2">Electric Mini</em></p>
<p><em class="em2">Eldhrin:</em> yes, you've commented out the bits that caused recursive tracing <img alt=":-)" src="emoticons/smile.gif" align="middle"> Congratulations</p>
<p><em class="em2">Wormbo:</em> There are several other pages belonging to this one: <a href="mutnukerifles.html">MutNukeRifles</a>, <a href="nukerifle.html">NukeRifle</a>, <a href="nukeriflefire.html">NukeRifleFire</a>, <a href="nukeriflepickup.html">NukeRiflePickup</a> and <a href="nukerifleprojectile.html">NukeRifleProjectile</a>. Those are custom class pages but not in the wiki's usualy class page format. What to do with those?</p>
<script type="text/javascript"><!--
 menuItemAdd("NukeRifles mutator", "#0.0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Combat using modified Sniperifles that fire nuclear bullets!", "#0.0.1.1");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="mod-ideas.html">Mod Ideas</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Mod_Ideas/NukeRifles">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=Mod_Ideas/NukeRifles">View other revisions</a><br>Last edited July 18, 2006 15:56 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Mod_Ideas/NukeRifles">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Mod_Ideas/NukeRifles">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>I don't need to test my programs. I have an error-correcting modem.
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
