<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Player Modeling With 3dsmax</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Player_Modeling_With_3dsmax; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Player Modeling With 3dsmax">Player Modeling With 3dsmax</a></h1>
	<div class="wiki"><p>So, you've got this great idea for a player model, and you know you want to get it into UT2003 or 2004, but you have no idea how to get it from 3dsmax to the game. You have come to the right place. Let's go over some basics first:</p>
<dl><dt>Tutorial Goal</dt><dd>To show you all the steps required to get a player model from concept to inside UT2003/4. This tutorial was created using 3dsmax 6 and Character Studio 4 for the examples.</dd></dl>
<p>Assumptions:</p>
<ul><li>You know how to model in 3dsmax and can create your mesh and texture on your own or have one already made</li>
<li>You know the basics of 3dsmax</li>
<li>You don't have any custom bones or animations (advanced)</li>
<li>You have all the tools required<ul><li>A copy of <a href="3d-studio-max.html">3D Studio Max</a> and UT2003/4</li>
<li>The <a href="https://docs.unrealengine.com/udk/Two/ActorX.html">[ActorX plugin]</a> for your version of 3dsmax</li>
<li>The <a href="http://old.fileplanet.com/dl/dl.asp?/planetquake/polycount/Tools/ut2k3/ut2k3_characters.zip">[3DSMax Character model source for UT2003]</a></li>
</ul>
</li>
</ul>
<h2><a name="0.1"></a>The First Step</h2>
<p>Got your model finished and textured? Good, then the first step in getting it ready to go is deciding which UT base skeleton you want to use. There are a variety to choose from and all of them are in the Character Model Source. For this example I am using the HumanMaleA skeleton.</p>
<p>(insert Example pic here, HumanMaleA bones)</p>
<p>Now that you know what skeleton you want to use, how do you get it? This is a fairly simple trick built into 3dsmax:</p>
<ol><li>Open the Source model for your chosen skeleton. </li>
<li>Select all the mesh objects in the scene and delete them, DON'T delete the bones or anything else</li>
<li>Do a Save As... on the scene and save it for use now and later</li>
<li>Open your model back up and merge the file you just saved into you scene</li>
<li>DON'T move or scale the bones at this point to match your model</li>
<li>If your model does not line up with the bones, it is best to scale and move your model to match it</li>
</ol>
<p><img src="http://syntaxerror22.virtualave.net/screens/males_bones.jpg"></p>
<h2><a name="0.2"></a>Rigging it All Together</h2>
<p>Now that you have your model lined up and scaled to the bones, the next step is rigging. Rigging, depending on what plugin you use, can be a very long process. The basic idea is so when you move the bones of the skeleton, your mesh bends and moves with it. The example will use Character Studio that comes with 3dsmax for rigging. The steps are as follows:</p>
<ol><li>Select your mesh, and go to the Modifiers tab</li>
<li>From the modifiers drop down select the Physique modifier</li>
<li>In the rollout below select the button with a stick figure under a plus sign <img src="http://syntaxerror22.virtualave.net/screens/AddRoot.jpg"></li>
<li>Select the root bone of the skeleton; this is in the center of the hipbone</li>
<li>A dialog box will come up; there are only 2 major things you need to worry about here<ul><li>Ensure blending between links is set to 3 links</li>
<li>Vertex link assignment needs to be rigid</li>
</ul>
</li>
<li>This set the basic assignment for rigging; you can now rotate the bones and see that it moves your mesh</li>
<li>Ensure that when you move any bones for testing that you "Undo" to put them back in the reference pose</li>
</ol>
<p>More then likely you noticed that not all of your vertexes are moving, or some are moving that you don't want to move. This is where the process can get lengthy depending on the detail you want in your joints. There are 2 main areas you should focus on when correcting your rigging. Envelope allows you to edit the area each bone affects. This is a gross edit and is not intended to be perfect. The other method is vertex mode, where you assign individual vertexes to up to 3 bones, and weight them accordingly. For the example only envelope was used. You can come back after testing your model ingame and tweak this as much as desired.</p>
<p>(example pic, MaleA rigged)</p>
<h2><a name="0.3"></a>Model Export</h2>
<p>Got your mesh rigged and moving nicely? No weird vertices? Then you are ready to get this into UnrealEd. Ensure you have the ActorX plugin loaded and ready, and then follow these steps:</p>
<ol><li>Select everything in the scene or everything you want to export (bones and mesh)</li>
<li>Go to the Utilities tab (hammer icon on the right) and click more</li>
<li>Select ActorX from the list</li>
<li>For convenience you may wish to add the plug in as a button<ol><li>Click the "Configure button sets" button</li>
<li>Scroll down the utilities list until you see ActorX and select it</li>
<li>Increase total buttons and scroll down to the new button</li>
<li>Drag ActorX to the new button and click ok</li>
</ol>
</li>
<li>Define the output folder and mesh file name to export</li>
<li>Ensure these options are checked<ul><li>Persistent paths and settings</li>
<li>All Skin Type, All Textured and All Selected</li>
<li>Bake smoothing groups</li>
</ul>
</li>
<li>Click the Save Mesh/Refpose button. A message box will tell you if the export was successful</li>
</ol>
<h2><a name="0.4"></a>Model Import and Animation</h2>
<p>Now that you have your rigged model exported to a format that UnrealEd can recognize it is time to import your model and texture into it.</p>
<ol><li>First we will import the textures, open the texture browser and click File &gt; Import...</li>
<li>Browse to where you saved your textures and open them. Note:<ul><li>Recommended textures are square (1:1), uncompressed TGA or BMP files</li>
<li>Unreal works best with few large textures rather then many smaller textures</li>
<li>Be sure to include a 512 tall by 256 wide portrait of your model</li>
</ul>
</li>
<li>Create a new package name and name the textures, the example package is called MyTexPak and the texture names are GuyTexture and GuyFace</li>
<li>Your textures should show up in the browser now, but they are still uncompressed</li>
<li>Right click and convert your texture to the optimal directx compression, DTX1 is recommended for basic textures</li>
<li>Note the package name and texture name as you will need it later, click the save button and save it all down to the .utx</li>
<li>Click on the Animations tab</li>
<li>Click File &gt; Mesh Import</li>
<li>Browse to the place where you saved the export from the ActorX plugin and open it</li>
<li>Name your new package and mesh; again, remember these names <ul><li>The example is called MyAnimPak and the mesh is MyMesh</li>
</ul>
</li>
<li>You should now see your model, but it may look too large and may not be facing the proper direction</li>
<li>Open a UT character with the same skeleton as your model</li>
<li>Click Mesh &gt; Copy mesh properties</li>
<li>Go back to your package and mesh and click Mesh &gt; Paste mesh properties</li>
<li>To display your texture on your model:<ol><li>Ensure the body texture is selected in the texture browser</li>
<li>On the side panel under the mesh tab, open up skin &gt; material &gt; select 0 and click the ... button to apply the selected texture</li>
<li>Do the same for the head texture, except select 1 instead</li>
</ol>
</li>
<li>Click the save button to save it all up</li>
</ol>
<p>This will now have your model shown with your texture, scaled properly and facing the correct direction, but how do we get it to move? This is where the use of the Source bones comes into play. Because your model is using those bones, you can easily copy the animations from one of the UT characters that use the same skeleton. Here's how:</p>
<ol><li>Open up the UT model you got the Mesh Properties from</li>
<li>Click Animation &gt; Rename animation set</li>
<li>Change the package name to your package name <ul><li>Again, the example was MyAnimPak</li>
</ul>
</li>
<li>Go back to your Package and you will see the animation set in the animations drop down</li>
<li>Select the set and click Edit &gt; Linkup anim and mesh</li>
<li>Your mesh should now have the animations and move properly</li>
<li>Save your mesh and animations</li>
</ol>
<dl><dt>Tips and Hints</dt><dd></dd></dl>
<ul><li>Do NOT save the package you got the animations from. This will overwrite an original game file, which will screw up UT.</li>
<li>Step 5 above is very important as the code for the player models only loads the mesh. The animation set must be linked or the mesh will not move.</li>
</ul>
<h2><a name="0.5"></a>Code?! I don't know code!</h2>
<p>There is only one thing left to do to get your model to show up in the player model select list. You must add a line of code to the xPlayers.upl file. Don't fret, this is only one line and is fairly simple. This doesn't require much programming know how, but you need to know the names of your packages and items (textures and animations) in them. Here is the line from the example:</p>
<pre class="uscript"><span class="uscript-operator">[</span>Public<span class="uscript-operator">]</span>

Player<span class="uscript-operator">=</span><span class="uscript-operator">(</span>DefaultName<span class="uscript-operator">=</span><span class="uscript-string">"Guy"</span><span class="uscript-operator">,</span> Mesh<span class="uscript-operator">=</span>MyAnimPak<span class="uscript-operator">.</span>ExampleGuy<span class="uscript-operator">,</span> species<span class="uscript-operator">=</span>xGame<span class="uscript-operator">.</span>SPECIES_Egypt<span class="uscript-operator">,</span> BodySkin<span class="uscript-operator">=</span>MyTexPak<span class="uscript-operator">.</span>GuyTexture<span class="uscript-operator">,</span> FaceSkin<span class="uscript-operator">=</span>MyTexPak<span class="uscript-operator">.</span>GuyFace<span class="uscript-operator">,</span> Portrait<span class="uscript-operator">=</span>MyTexPak<span class="uscript-operator">.</span>GuyPic<span class="uscript-operator">,</span> Text<span class="uscript-operator">=</span><span class="uscript-string">"It's the example Guy!"</span><span class="uscript-operator">,</span> Sex<span class="uscript-operator">=</span>Male<span class="uscript-operator">,</span> Menu<span class="uscript-operator">=</span><span class="uscript-string">"SP"</span><span class="uscript-operator">)</span></pre><ul><li>DefaultName - what the bot will name itself</li>
<li>Mesh - references the mesh and animation package you made</li>
<li>Species - in conjunction with Sex defines the voice your character will use</li>
<li>BodySkin - the texture on the body</li>
<li>FaceSkin - texture on the face</li>
<li>Portrait - a pic of your model</li>
<li>Text - string that is used as the description of your model</li>
<li>Sex - defines voice and she/he in console messages</li>
<li>Menu - SP makes your model available in single player as a bot</li>
</ul>
<p>Save XPlayers and that is it; your new model will now show up in the Character Select screen.</p>
<hr class="thin"><h2><a name="0.6"></a>Discussion</h2>
<p><em class="em2">Syntax_Error:</em> Content is nearing completion, just need to get those screens.</p>
<p><em class="em2">Syntax_Error:</em> Found that line of code and explained all the vars. Now I just need to get 3dsmax back and get some screens. Beginning work on the weapon tut as well.</p>
<p><em class="em2">Syntax_Error:</em> Content is at about 90%. Need to get into UnrealEd to confirm instructions and menus, and I need to proofread this fully. Still waiting for my computer so I can get some screens and UT2004.</p>
<p><em class="em2">TheBypasser:</em> Guuys! Why copying the animation set? It's way more logical to just set the DefaultAnimation to a reference skeletal anim - like <em class="em2">MeshAnimation 'HumanFemaleA.BipedFemaleA<em class="em3"> for example! Less duplicates = more optimization <img alt=";)" src="emoticons/wink.gif" align="middle"> (btw alike was used on some UT2k4 out-of-the-box models)</em></em></p>
<p><em class="em2">Wormbo:</em> <a href="text-mangling-alert.html">Text Mangling Alert</a>! Please don't use Word or any other formatting text editor to create or modify wiki pages.</p>
<hr class="thin"><p><a href="category-tutorial.html">Category Tutorial</a></p>
<script type="text/javascript"><!--
 menuItemAdd("The First Step", "#0.1");
menuItemAdd("Rigging it All Together", "#0.2");
menuItemAdd("Model Export", "#0.3");
menuItemAdd("Model Import and Animation", "#0.4");
menuItemAdd("Code?! I don't know code!", "#0.5");
menuItemAdd("Discussion", "#0.6");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited February 7, 2007 8:35 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Player_Modeling_With_3dsmax">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Player_Modeling_With_3dsmax">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>My program doesn't have bugs. It just develops random features.
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
