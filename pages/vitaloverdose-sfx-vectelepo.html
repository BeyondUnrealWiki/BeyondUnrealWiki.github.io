<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: VitalOverdose/SFX VecTeleporting</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=VitalOverdose/SFX_VecTeleporting; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="vitaloverdose.html">VitalOverdose</a>/<a href="http://wiki.beyondunreal.com/wiki?back=VitalOverdose/SFX+VecTeleporting">SFX VecTeleporting</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut2004.png"> <a href="unreal-tournament-2004.html">UT2004</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="emitter.html">Emitter</a> &gt;&gt;SFX VecTeleporting (Package: custom)<br></div>
<pre class="paraverbatim"> </pre><p>by <a href="vitaloverdose.html">VitalOverdose</a></p>
<p>Part of  <a href="vitaloverdose-vitals-pro-ma.html">Vital'sPMT</a></p>
<h3><a name="0.0.1"></a>Overview</h3>
<p>This custom emitter actor has 20 live particles that teleport vehicles on contact. The emitter scans the level on creation for actor with 'TP' in their tag field and record them in a dynamic array. When the vehicle is teleported it will reaper at the location of one of theses tp points (navigation points are good for this). Also it is possible to set the emitter to RE-scan the tp points at regular intervals continuously or even for a set amount of times. This means that it is possible to have moving TP points to some degree.</p>
<h4><a name="0.0.1.1"></a>BotLock</h4>
<p>There is a bot lock system build in as the vehicles receive a certain amount of boost when they exit the telporter at the tp side and this can cause the bots to panic and bail from the vehicle. With the bot lock system any vehicle that gets teleported with a bot driver will be locked so the bot cant escape for a certain amount of time (setable by the mapper in unrealed). There is also a vec 'tagging' system that can hardattach an emitter randomly chosen from a 'spawnpool' of emitters that can be set by the mapper in unreal ed.</p>
<h4><a name="0.0.1.2"></a>AntiTelefrag</h4>
<p>The teleporter will try very hard to find a safe place for the vehicle to spawn so that nothing gets telefragged. It does this by scanning the destination tp point using an iterator and if there is a possibility of a telefrage it moves on to the next random spawn point. if in the unlikely event of all the spawn spawnpoints are unsuitable then it will got through another random list but adding 128 in height each time the list gets looped.</p>
<h4><a name="0.0.1.3"></a>Optimization.</h4>
<p>Although this actor is completely self contained it has been design in a way that some of the work load  by the actor doing the spawning.</p>
<h4><a name="0.0.1.4"></a>Listed Features</h4>
<ul><li>Scans level on creation for actors with tp in the tag field and uses them as random span points</li>
<li>Tracks 20 particles from an emitter specified by the mapper or emitters[0] by default.</li>
<li>Teleports all vehicles on contact with an 'active particle' to a random destination marked out by the tp points</li>
<li>VecBoost on Teleport exit.</li>
<li>By using the Rescan time its possible to have moving spawn Points.</li>
<li>Botlock System.</li>
<li>VecTagFX that can tag random emitters from a random spawnpool.</li>
<li>Anti Telefrag system.</li>
<li>Adjustable scan timing for level optimization.</li>
<li>Adjustable scan radius on the particles.</li>
<li>Possible to relive the strain on the cpu with a custom spawner.</li>
<li>Rescans can be set to a certain amount;</li>
</ul>
<p>Here is the completed script;-</p>
<pre class="uscript"> <span class="uscript-keyword">class</span> SFx_VecTeleporting <span class="uscript-keyword">Extends</span> Emitter
<span class="uscript-keyword">placeable</span><span class="uscript-operator">;</span>

<span class="uscript-keyword">struct</span>                                Vec_Rec
<span class="uscript-operator">{</span>
<span class="uscript-keyword">Var</span> <span class="uscript-type">Float</span>                             Rec_Time<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> Onsvehicle                        Vec_Ref<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span><span class="uscript-operator">;</span><span class="uscript-keyword">var</span> <span class="uscript-keyword">array</span> <span class="uscript-operator">&lt;</span> Vec_Rec <span class="uscript-operator">&gt;</span>               Bot_Lock<span class="uscript-operator">;</span>

<span class="uscript-keyword">Var</span>       <span class="uscript-type">int</span>                         TotalParticles<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>       <span class="uscript-type">int</span>                         RescansLeft<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span>       <span class="uscript-type">int</span>                         TimeTil<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-keyword">Array</span><span class="uscript-operator">&lt;</span> Actor <span class="uscript-operator">&gt;</span>                    TPActors<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-keyword">Array</span><span class="uscript-operator">&lt;</span> <span class="uscript-keyword">class</span> <span class="uscript-operator">&lt;</span>emitter<span class="uscript-operator">&gt;</span> <span class="uscript-operator">&gt;</span>          TagFxPool<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">float</span>                       ScanRadius<span class="uscript-operator">,</span>capturetime<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">bool</span>                        Teleport_VecBot<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">Bool</span>                        Teleport_VecPlayer<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    Sound                       Tagspawnsound<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">int</span>                         ActiveEmitterNo<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">int</span>                         TimerFrequency<span class="uscript-operator">;</span>
<span class="uscript-keyword">Var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">int</span>                         RescanTelpoints<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    <span class="uscript-type">int</span>                         Rescans<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span> <span class="uscript-operator">(</span><span class="uscript-operator">)</span>    Tp_Counter                  TPCounter<span class="uscript-operator">;</span>

<span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">Function</span> PostBeginPlay<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>PostBeginPlay<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>TimerFrequency <span class="uscript-operator">&lt;</span> <span class="uscript-number">0.1</span> <span class="uscript-operator">)</span>             <span class="uscript-comment">// 0.1 is the min but its better to set this value a high as possible</span>
    <span class="uscript-operator">{</span>
     TimerFrequency <span class="uscript-operator">=</span> <span class="uscript-number">0.1</span><span class="uscript-operator">;</span>
     Warn<span class="uscript-operator">(</span><span class="uscript-string">"The timerfrequency for this actor ("</span><span class="uscript-operator">$</span>timerfrequency<span class="uscript-operator">$</span><span class="uscript-string">") is set to LOW and has been set to the min (0.1) as a result."</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     Warn<span class="uscript-operator">(</span><span class="uscript-string">"If you are experiencing any problems with game speed them this may be something might want to address..."</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 SetTimer<span class="uscript-operator">(</span> TimerFrequency <span class="uscript-operator">,</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> tpcounter <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
    <span class="uscript-keyword">return</span><span class="uscript-operator">;</span>

 ScanTPActors<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> TPActors<span class="uscript-operator">.</span><span class="uscript-keyword">length</span> <span class="uscript-operator">==</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
    Warn<span class="uscript-operator">(</span><span class="uscript-string">"The initial scan for actors TP (actors with TP in their tag fields) came up with nothing."</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    Warn<span class="uscript-operator">(</span><span class="uscript-string">"This actor cannot function with out a TP list and had to be destroyed to avoid any other unexpected complications during game play"</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     destroyed<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Emitters<span class="uscript-operator">[</span>ActiveEmitterNo<span class="uscript-operator">]</span><span class="uscript-operator">.</span>MaxParticles <span class="uscript-operator">&gt;</span> <span class="uscript-number">20</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     Warn<span class="uscript-operator">(</span><span class="uscript-string">"The  active emitter (Emitters["</span><span class="uscript-operator">$</span>ActiveEmitterNo<span class="uscript-operator">$</span><span class="uscript-string">"] ) has its MaxParticle rate set TO high."</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 RescansLeft <span class="uscript-operator">=</span> Rescans<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">function</span> ScanTPActors<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">Local</span> Actor FoundTelPoint<span class="uscript-operator">;</span>

 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> TPActors<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span> <span class="uscript-operator">!=</span><span class="uscript-number">0</span> <span class="uscript-operator">)</span>
      TPActors<span class="uscript-operator">.</span><span class="uscript-keyword">Remove</span><span class="uscript-operator">(</span> <span class="uscript-number">0</span><span class="uscript-operator">,</span>TPActors<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
   
 <span class="uscript-keyword">foreach</span> AllActors<span class="uscript-operator">(</span> <span class="uscript-keyword">Class</span><span class="uscript-name">'Actor'</span> <span class="uscript-operator">,</span> FoundTelPoint<span class="uscript-operator">,</span> <span class="uscript-name">'TP'</span> <span class="uscript-operator">)</span>
                  <span class="uscript-operator">{</span>
                   TPActors<span class="uscript-operator">.</span><span class="uscript-keyword">Insert</span><span class="uscript-operator">(</span> <span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">1</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
                   TPActors<span class="uscript-operator">[</span><span class="uscript-number">0</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> FoundTelPoint<span class="uscript-operator">;</span>
                  <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">Function</span> Timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>TPCounter<span class="uscript-operator">==</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span> timetil <span class="uscript-operator">&gt;</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     ProcessRescantime<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     ScanPartLocs<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Bot_Lock<span class="uscript-operator">.</span><span class="uscript-keyword">length</span> <span class="uscript-operator">&gt;</span> <span class="uscript-number">1</span> <span class="uscript-operator">)</span>
     ProcessBotLockTime<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>Timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> EnterVec_Ref<span class="uscript-operator">(</span>ONSVehicle NewVec<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 Bot_Lock<span class="uscript-operator">.</span><span class="uscript-keyword">insert</span><span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 Bot_Lock<span class="uscript-operator">[</span><span class="uscript-number">0</span><span class="uscript-operator">]</span><span class="uscript-operator">.</span>Vec_Ref   <span class="uscript-operator">=</span> NewVec<span class="uscript-operator">;</span>
 Bot_Lock<span class="uscript-operator">[</span><span class="uscript-number">0</span><span class="uscript-operator">]</span><span class="uscript-operator">.</span>Rec_Time  <span class="uscript-operator">=</span> Capturetime<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">Function</span> ScanPartLocs<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">Local</span>    onsvehicle      FoundOnsVec<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span>    <span class="uscript-type">Int</span>             Counter<span class="uscript-operator">;</span>

 <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span> Counter <span class="uscript-operator">=</span> <span class="uscript-number">0</span> <span class="uscript-operator">;</span> Counter <span class="uscript-operator">&lt;</span> Emitters<span class="uscript-operator">[</span><span class="uscript-number">0</span><span class="uscript-operator">]</span><span class="uscript-operator">.</span>Particles<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span> <span class="uscript-operator">;</span> Counter<span class="uscript-operator">++</span> <span class="uscript-operator">)</span> <span class="uscript-comment">// this will be run every time the Timer is called</span>
     <span class="uscript-operator">{</span>
      <span class="uscript-keyword">foreach</span> visiblecollidingActors<span class="uscript-operator">(</span> <span class="uscript-keyword">Class</span><span class="uscript-name">'ONSVehicle'</span><span class="uscript-operator">,</span>FoundOnsVec<span class="uscript-operator">,</span>ScanRadius<span class="uscript-operator">,</span>Emitters<span class="uscript-operator">[</span>ActiveEmitterNo<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Particles<span class="uscript-operator">[</span>Counter<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Location <span class="uscript-operator">)</span>
                                    <span class="uscript-operator">{</span>
                                     EnterVec_Ref<span class="uscript-operator">(</span>FoundOnsVec<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
                                     VecTel<span class="uscript-operator">(</span>FoundOnsVec<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
                                    <span class="uscript-operator">}</span>
     <span class="uscript-operator">}</span>

<span class="uscript-operator">}</span>

<span class="uscript-keyword">Function</span> ProcessBotLockTime<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">local</span> <span class="uscript-type">int</span> counter<span class="uscript-operator">;</span>
 <span class="uscript-keyword">for</span> <span class="uscript-operator">(</span> Counter <span class="uscript-operator">=</span> <span class="uscript-number">0</span> <span class="uscript-operator">;</span> Counter <span class="uscript-operator">&lt;</span> Bot_Lock<span class="uscript-operator">.</span><span class="uscript-keyword">length</span> <span class="uscript-operator">;</span> Counter<span class="uscript-operator">++</span> <span class="uscript-operator">)</span>         <span class="uscript-comment">// this only gets run if the vec array has soemthing in it</span>
     <span class="uscript-operator">{</span>
      Bot_Lock<span class="uscript-operator">[</span>Counter<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Rec_Time <span class="uscript-operator">-=</span> TimerFrequency<span class="uscript-operator">;</span>
      <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> Bot_Lock<span class="uscript-operator">[</span>Counter<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Rec_Time <span class="uscript-operator">&lt;</span> TimerFrequency <span class="uscript-operator">)</span>
         <span class="uscript-operator">{</span>
          Bot_Lock<span class="uscript-operator">[</span>Counter<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Vec_Ref<span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
          Bot_Lock<span class="uscript-operator">.</span><span class="uscript-keyword">remove</span><span class="uscript-operator">(</span>Counter<span class="uscript-operator">,</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
         <span class="uscript-operator">}</span>
      <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">Function</span> ProcessRescanTime<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 TimeTil <span class="uscript-operator">-=</span> TimerFrequency<span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> TimeTil <span class="uscript-operator">&lt;</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     ScanTPActors<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> RescansLeft <span class="uscript-operator">&gt;</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
         RescansLeft<span class="uscript-operator">--</span><span class="uscript-operator">;</span>
         <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> RescansLeft <span class="uscript-operator">==</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>
              TimeTil <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">function</span>  TagFx<span class="uscript-operator">(</span> actor SpawnPosactor<span class="uscript-operator">,</span> <span class="uscript-keyword">Array</span><span class="uscript-operator">&lt;</span> <span class="uscript-keyword">Class</span><span class="uscript-operator">&lt;</span> Emitter <span class="uscript-operator">&gt;</span> <span class="uscript-operator">&gt;</span> AvailableFx<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>

 <span class="uscript-keyword">Local</span> <span class="uscript-type">int</span>              RNDPickedNumb<span class="uscript-operator">;</span>
 <span class="uscript-keyword">local</span> <span class="uscript-keyword">Class</span><span class="uscript-operator">&lt;</span> Emitter <span class="uscript-operator">&gt;</span> RNDPickedEmitter<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> Emitter          SpawnedEmitter<span class="uscript-operator">;</span>

 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> AvailableFx<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span> <span class="uscript-operator">==</span> <span class="uscript-number">0</span> <span class="uscript-operator">)</span>
      <span class="uscript-keyword">Return</span><span class="uscript-operator">;</span>
 
 RNDPickedNumb    <span class="uscript-operator">=</span> Rand<span class="uscript-operator">(</span>AvailableFx<span class="uscript-operator">.</span><span class="uscript-keyword">Length</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 RNDPickedEmitter <span class="uscript-operator">=</span> AvailableFx<span class="uscript-operator">[</span>RNDPickedNumb<span class="uscript-operator">]</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">while</span><span class="uscript-operator">(</span> SpawnedEmitter <span class="uscript-operator">==</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
      <span class="uscript-operator">{</span>                
       SpawnedEmitter   <span class="uscript-operator">=</span> Spawn<span class="uscript-operator">(</span>RNDPickedEmitter<span class="uscript-operator">,</span><span class="uscript-keyword">Self</span><span class="uscript-operator">,</span><span class="uscript-operator">,</span>SpawnPosactor<span class="uscript-operator">.</span>Location <span class="uscript-operator">,</span>SpawnPosactor<span class="uscript-operator">.</span>Rotation <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
      <span class="uscript-operator">}</span>
 setbase<span class="uscript-operator">(</span>SpawnPosactor<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-operator">}</span>

<span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">Function</span> VecTel<span class="uscript-operator">(</span>Vehicle Teleporting<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">Local</span> Rotator       OldRot<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> Rotator       Newrot<span class="uscript-operator">;</span>
 <span class="uscript-keyword">local</span> rotator       pointrotation<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> Vector        AppliedBoostForce<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> Vector        PointOfBoostForce<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> EPhysics      Entryphysics<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> <span class="uscript-type">int</span>           Pickednumber<span class="uscript-operator">;</span>
 <span class="uscript-keyword">Local</span> <span class="uscript-type">float</span>         HightOffSet<span class="uscript-operator">;</span>
 <span class="uscript-keyword">local</span> vector        pickedvector<span class="uscript-operator">;</span>

 NewRot              <span class="uscript-operator">=</span> Teleporting<span class="uscript-operator">.</span>Rotation<span class="uscript-operator">;</span>
 EntryPhysics        <span class="uscript-operator">=</span> Teleporting<span class="uscript-operator">.</span>Physics<span class="uscript-operator">;</span>
 AppliedBoostForce   <span class="uscript-operator">=</span> Teleporting<span class="uscript-operator">.</span>Velocity <span class="uscript-operator">*</span> <span class="uscript-number">500</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>tpcounter<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
    Pickedvector     <span class="uscript-operator">=</span> tpcounter<span class="uscript-operator">.</span>FindSafeSpawnLoc<span class="uscript-operator">(</span>HightOffSet<span class="uscript-operator">,</span>pointrotation<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    Pickedvector<span class="uscript-operator">.</span>z  <span class="uscript-operator">+=</span> HightOffSet<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>
    <span class="uscript-operator">{</span>
     Pickednumber    <span class="uscript-operator">=</span> rand<span class="uscript-operator">(</span>tpactors<span class="uscript-operator">.</span><span class="uscript-keyword">length</span><span class="uscript-number">-1</span><span class="uscript-operator">)</span><span class="uscript-operator">+</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
     PickedVector    <span class="uscript-operator">=</span> tpactors<span class="uscript-operator">[</span>Pickednumber<span class="uscript-operator">]</span><span class="uscript-operator">.</span>location<span class="uscript-operator">;</span>
     PointRotation   <span class="uscript-operator">=</span> tpactors<span class="uscript-operator">[</span>Pickednumber<span class="uscript-operator">]</span><span class="uscript-operator">.</span>Rotation<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>

 Teleporting<span class="uscript-operator">.</span>SetPhysics<span class="uscript-operator">(</span>PHYS_None<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 Teleporting<span class="uscript-operator">.</span>SetLocation<span class="uscript-operator">(</span>PickedVector<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 OldRot              <span class="uscript-operator">=</span> Teleporting<span class="uscript-operator">.</span>Rotation<span class="uscript-operator">;</span>
 NewRot<span class="uscript-operator">.</span>Yaw          <span class="uscript-operator">=</span> PointRotation<span class="uscript-operator">.</span>Yaw
                     <span class="uscript-operator">+</span> Teleporting<span class="uscript-operator">.</span>Rotation<span class="uscript-operator">.</span>Yaw
                     <span class="uscript-operator">-</span> <span class="uscript-keyword">Self</span><span class="uscript-operator">.</span>Rotation<span class="uscript-operator">.</span>Yaw<span class="uscript-operator">;</span>
 Teleporting<span class="uscript-operator">.</span>SetPhysics<span class="uscript-operator">(</span>EntryPhysics<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 Teleporting<span class="uscript-operator">.</span>Controller<span class="uscript-operator">.</span>MoveTimer <span class="uscript-operator">=</span> <span class="uscript-operator">-</span><span class="uscript-number">1.0</span><span class="uscript-operator">;</span>
 Teleporting<span class="uscript-operator">.</span>SetmoveTarget<span class="uscript-operator">(</span> <span class="uscript-keyword">Self</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 Teleporting<span class="uscript-operator">.</span>Controller<span class="uscript-operator">.</span>SetRotation<span class="uscript-operator">(</span>newRot<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 Teleporting<span class="uscript-operator">.</span>SetRotation<span class="uscript-operator">(</span>newRot<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">If</span> <span class="uscript-operator">(</span> Teleporting<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'ONSChopperCraft'</span><span class="uscript-operator">)</span> <span class="uscript-operator">||</span> Teleporting<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'ONSHoverCraft'</span><span class="uscript-operator">)</span>   <span class="uscript-operator">||</span>  Teleporting<span class="uscript-operator">.</span>IsA<span class="uscript-operator">(</span><span class="uscript-name">'ONSPlaneCraft'</span><span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
     Teleporting<span class="uscript-operator">.</span>KSetStayUpright<span class="uscript-operator">(</span> <span class="uscript-keyword">True</span><span class="uscript-operator">,</span><span class="uscript-keyword">True</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>AppliedBoostForce <span class="uscript-operator">!=</span> PointOfBoostForce<span class="uscript-operator">)</span>
     Teleporting<span class="uscript-operator">.</span>KAddImpulse<span class="uscript-operator">(</span> AppliedBoostForce <span class="uscript-operator">&gt;&gt;</span> Rotation<span class="uscript-operator">,</span> PointOfBoostForce <span class="uscript-operator">&gt;&gt;</span> Rotation <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> TagFxPool<span class="uscript-operator">.</span><span class="uscript-keyword">length</span> <span class="uscript-operator">&gt;</span><span class="uscript-number">0</span><span class="uscript-operator">)</span>
      tagfx<span class="uscript-operator">(</span> Teleporting <span class="uscript-operator">,</span> TagFxPool <span class="uscript-operator">)</span><span class="uscript-operator">;</span>    
<span class="uscript-operator">}</span></pre><h2><a name="0.1"></a>Related Topics </h2>
<ul><li><a href="vitaloverdose-sfx-painful.html">VitalOverdose/SFX Painful</a></li>
<li><a href="vitaloverdose-sfx-vectelepo.html">VitalOverdose/SFX VecTeleporting</a></li>
<li><a href="vitaloverdose-sfx-pawntelep.html">VitalOverdose/SFX PawnTeleporting</a></li>
<li><a href="vitaloverdose-sfx-triggerin.html">VitalOverdose/SFX Triggering</a></li>
<li><a href="vitaloverdose-sfx-boosting.html">VitalOverdose/SFX Boosting</a></li>
<li>SFX_MonsterSpawning<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=SFX_MonsterSpawning&referrerid=VitalOverdose/SFX_VecTeleporting">?</a></li>
<li>SFX_Healing<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=SFX_Healing&referrerid=VitalOverdose/SFX_VecTeleporting">?</a></li>
<li><a href="vitaloverdose-inventoryflar.html">VitalOverdose/InventoryFlare</a>  </li>
</ul>
<h2><a name="0.2"></a>discusion</h2>
<hr class="thin"><p><a href="category-custom-class.html">Category Custom Class</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Overview", "#0.0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>BotLock", "#0.0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>AntiTelefrag", "#0.0.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Optimization.", "#0.0.1.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Listed Features", "#0.0.1.4");
menuItemAdd("Related Topics ", "#0.1");
menuItemAdd("discusion", "#0.2");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="vitaloverdose.html">VitalOverdose</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=VitalOverdose/SFX_VecTeleporting">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=VitalOverdose/SFX_VecTeleporting">View other revisions</a><br>Last edited June 15, 2006 14:39 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=VitalOverdose/SFX_VecTeleporting">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/VitalOverdose/SFX_VecTeleporting">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>Mostly Harmless
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
