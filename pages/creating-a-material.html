<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Creating A Material</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Creating_A_Material; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Creating A Material">Creating A Material</a></h1>
	<div class="wiki"><h2><a name="0.1"></a>Creating the material</h2>
<h3><a name="0.1.1"></a>Basic texture</h3>
<p>We have to create a new material to use as a surface. It will be a liquid, reflective, moving and translucent.</p>
<p><em class="em2">1.</em> We'll steal and edit a moss texture.(don't worry. Although moss is not water, all will become clearin the end.) There is a good one in Antalus (<em class="em1">AWGlobal.utx</em>). </p>
<p>You'll need to <a href="texture-import-and-export.html">export</a> this.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-4]" src="images/fluidsurfaces-4.jpeg"><p>a moss texture</p>
</div>
</td>
</tr>
</table>
</div>
<p>Because we don't want to cover the whole surface with it, we'll use an <a href="alpha-channel.html">alpha channel</a>. In a <a href="graphics-application.html">Graphics Application</a> like Paint Shop Pro or Photoshop, open your moss image and create a new mask (see screen shot in PSP).</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-5]" src="images/fluidsurfaces-5.jpeg"><p>the <em class="em1">new mask</em> button in PSP</p>
</div>
</td>
</tr>
</table>
</div>
<p>An alpha channel is used to vary the transparency in a image. The image is opaque where the alpha channel is white. Draw some stuff on the alpha channel. You'll have to save your image in a format supporting alpha chanels (.TGA). It will be store inside the file. In PSP you have to use the <em class="em1">Save in an alpha channel</em> in the Mask menu.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-6]" src="images/fluidsurfaces-6.jpeg"><p>the alpha channel sets the translucency of the image</p>
</div>
</td>
</tr>
</table>
</div>
<p>If you want to use this moss texture for other purposes and don't need the alpha channel, hide it before saving.</p>
<p><em class="em2">2.</em> <a href="import-the-texture.html">Import the texture</a>. Using <a href="mylevel.html">MyLevel</a> in the package field will force the editor to save the textures inside the map file. Name the texture <em class="em1">mossmask</em> or something similar. You can put it in a group if you have a lot of  textures in the <em class="em1">MyLevel</em> package.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-7]" src="images/fluidsurfaces-7.jpeg"><p>the texture</p>
</div>
</td>
</tr>
</table>
</div>
<p><em class="em2">Note:</em> when opening a level containing textures (or something else) in a <em class="em1">MyLevel</em> package, you may want to relaunch the editor before opening another map (yours <img alt=";)" src="emoticons/wink.gif" align="middle">) otherwise it could mess up your <em class="em1">MyLevel</em> package.</p>
<p><em class="em2">3.</em> If you're not sure of the scale of your texture, you can resize it by creating a new material: Chose <em class="em1">File</em> &rarr; <em class="em1">New</em> in the textures browser. Use <em class="em1">MyLevel</em> as package, choose an appropriate name like <em class="em1">mossmaskscaller</em> and <em class="em2"><a href="texscaler.html">TexScaler</a></em> in properies. Now hit <em class="em2">New</em> and the properties window should open. Here you can view, and edit the details of your material.</p>
<p>On the properties tree at the bottom, Click <em class="em2">Material</em> then choose your moss texture in the browser and click on the <em class="em1">Use</em> button in the material line. Adjust the scale of the texture with the <em class="em2">UScale</em> and <em class="em2">VScale</em> field and the position with <em class="em2">UOffset</em> and <em class="em2">VOffset</em>.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-8]" src="images/fluidsurfaces-8.jpeg"><p>a texture scaler</p>
</div>
</td>
</tr>
</table>
</div>
<h3><a name="0.1.2"></a>Animation</h3>
<p>Now we are able to animate the moss.</p>
<p><a href="create-a-material.html">Create a material</a> of class <em class="em2">TexOscillator</em>. In the material field, put the previous texture (the scaler). Adjust the fields to your liking. UOscillationRate and OscillationRate determine how fast the texture moves. <em class="em2">UOscillationAmplitude</em> and <em class="em2">UOscillationAmplitude</em> determine how far it goes. Use small values for the amplitude and even smaller for the rate. Choose <em class="em1">OT_Stretch</em> for both <em class="em2">UOscillationType</em> and <em class="em2">VOscillationType</em> (the other ones are simple panning).</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-9]" src="images/fluidsurfaces-9.jpeg"><p>an oscillator</p>
</div>
</td>
</tr>
</table>
</div>
<h3><a name="0.1.3"></a>Reflection</h3>
<p>The water surface will also reflect the world. But because it can't be done in real time, we'll use predefined [environment map]<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Environment_Map&referrerid=Creating_A_Material">?</a>s. With the texture browser open <em class="em1">CubMaps.utx</em>, examine the several groups it contains. We'll create a material that blends the moss texture with a reflective texture.</p>
<p>Choose <em class="em1">File</em> &rarr; <em class="em1">New</em> one more time, set the package and name correctly and chose <em class="em2">Combiner</em> in the list. You will need to set 2 materials and 1 mask. In the first material field put the  moss oscillator. In the second, put one of the cube maps in <em class="em1">CubeMaps.utx</em> (only pick the textures bordered in blue). <em class="em1">Cubemap'CubeMaps.Kretzig.Kretzigcube2' </em> is a good one for what we need.</p>
<p>Choose <em class="em1">CO_Alphablend_With_Mask</em> in <em class="em2">CombineOperation</em>. The mask will determine how the 2 materials will mix. Because the moss texture has an alpha channel, we will use it. Depending on how You did the mask, you may have to use the <em class="em2">InvertMask</em> option.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-10]" src="images/fluidsurfaces-10.jpeg"><p>a combiner</p>
</div>
</td>
</tr>
</table>
</div>
<h2><a name="0.2"></a>Translucency</h2>
<p>We could use this material for the water surface but it would look strange. Mainly because it would be opaque <img alt=";)" src="emoticons/wink.gif" align="middle"> Therefor we are going to create another masked texture to make it translucent. And to make the things perfect, it will fit the shape of the water zone!</p>
<p>The zone I want want to fill with water is bordered by a terrain and I'll make the water more translucent toward its "shores". I will use the height map of the terrain as to find the shores.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-12]" src="images/fluidsurfaces-12.jpeg"><p>highlighting the shores with PSP</p>
</div>
</td>
</tr>
</table>
</div>
<p>Create a new image, the same size as the terrain height map, use the shores map as an alpha channel and save it. Don't use white in your alpha channel as the water has to be a least a little translucent.</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-11]" src="images/fluidsurfaces-11.jpeg"><p>the terrain heightmap and the alpha channel</p>
</div>
</td>
</tr>
</table>
</div>
<p><em class="em2">7.</em> Back in UnrealEd, <a href="import-the-texture.html">import the texture</a> like you did with the moss texture. Now we have to make sure that the shores of this mask will fit with the shores of the terrain. In order to do that, create a <em class="em1">TexScaler</em> material for this texture (see above).</p>
<p><em class="em2">8.</em> All we have to do now is to apply the mask to the other material. Choose <em class="em1">File</em> &rarr; <em class="em1">New</em> (for the last time <img alt=";)" src="emoticons/wink.gif" align="middle">), set everything and choose <em class="em2">Shader</em>. A shader is a material containing useful informations. Use the combiner you created as the <em class="em2">Diffuse</em> layer and the <em class="em1">TexScaler</em> (created in the 7th step) as the <em class="em2">Opacity</em> layer. You can set <em class="em2">TwoSided</em> to <em class="em1">True</em> and the <em class="em2">SurfaceType</em> to <em class="em1">EST_Water</em> (although I'm not sure whether it's useful or not <img alt=":p" src="emoticons/tongue.gif" align="middle">).</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[fluidsurfaces-13]" src="images/fluidsurfaces-13.jpeg"><p>the final shader</p>
</div>
</td>
</tr>
</table>
</div>
<p><a href="category-tutorial.html">Category Tutorial</a></p>
<h2><a name="0.3"></a>Discussion</h2>
<p><em class="em2">Bob_The_Beheader:</em> I think I've removed all the references to FluidSurfaces, but I could be wrong...</p>
<script type="text/javascript"><!--
 menuItemAdd("Creating the material", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Basic texture", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Animation", "#0.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Reflection", "#0.1.3");
menuItemAdd("Translucency", "#0.2");
menuItemAdd("Discussion", "#0.3");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited March 22, 2007 12:12 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Creating_A_Material">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Creating_A_Material">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>The three virtues of a programmer: Laziness, Impatience, and Hubris. (Larry Wall)
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
