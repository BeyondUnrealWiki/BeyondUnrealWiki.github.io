<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Pingz</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Pingz; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Pingz">Pingz</a></h1>
	<div class="wiki"><p>I'm a professional game developer gone indie.</p>
<dl><dt>Home page</dt><dd><a href="http://www.pingz.com">http://www.pingz.com</a></dd><dt>Work page</dt><dd><a href="http://www.sickheadgames.com">http://www.sickheadgames.com</a></dd><dt>E-Mail address</dt><dd><a href="mailto:tom@pingz.com">tom@pingz.com</a></dd></dl>
<h2><a name="0.1"></a>Questions To The Wikites</h2>
<h3><a name="0.1.1"></a>Scripting Language Within UScript?</h3>
<p>I believe i saw someone discussing a scripting language they wrote in Unreal Script, but i can't seem to find it.  Anyone remember where this was at?</p>
<p><em class="em2">Mychaeel:</em> <a href="bruteforce.html">BruteForce</a> I'd say.</p>
<p><em class="em2">Pingz:</em>  Ah ha... yea that's it.  Thanks.</p>
<h3><a name="0.1.2"></a>Where should i put global functions?</h3>
<p>I built alot of <a href="quaternion.html">Quaternion</a> functions which i currently have just laying about in my <a href="playercontroller.html">PlayerController</a> class.  Does anyone have any suggestions of a better place to put them where it's reasonably easy to access them from other all objects?  Epic puts their math functions in the base <a href="object.html">Object</a> class so it's global to everything, but i don't see a way for me to do the same.  Maybe i could create a class like QuatLib with static functions for all my globals.  Any other ideas?  I'm still fairly new to UnrealScript, so maybe i'm missing something.</p>
<p><em class="em2">Foxpaw:</em> The static function method is a good one but the additional class.static that you have to put in every time you want to use the function takes longer and more importantly, makes your code appear complicated. You also will have to use DependsOn to use the structs in the library, if any. (In my experience dependson causes a lot of failed compiles.) If you aren't going to be using them in other classes, you could just keep them in the playercontroller class. Optionally, you can use the static function library method and use a wrapper to make it look less complicated, like so:</p>
<pre class="uscript"><span class="uscript-comment">// Looks complicated!</span>
<span class="uscript-keyword">function</span> Quat DoSomeStuff<span class="uscript-operator">(</span> vector AnArgument <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">!</span><span class="uscript-keyword">class</span><span class="uscript-name">'FunctionLib'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span>ProcessThis<span class="uscript-operator">(</span> AnArgument <span class="uscript-operator">)</span>
  <span class="uscript-operator">||</span> <span class="uscript-keyword">class</span><span class="uscript-name">'FunctionLib'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span>IgnoreMe<span class="uscript-operator">(</span> <span class="uscript-keyword">self</span><span class="uscript-operator">,</span> owner<span class="uscript-operator">,</span> AnArgument <span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">class</span><span class="uscript-name">'FunctionLib'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span>FindReturn<span class="uscript-operator">(</span> AnArgument <span class="uscript-operator">)</span>
<span class="uscript-operator">}</span>

<span class="uscript-comment">// Longer, but more sensical. I use comment blocks like below to make it clear that these</span>
<span class="uscript-comment">// functions are not part of the actual 'functionality' of the class. It kind of makes your</span>
<span class="uscript-comment">// eyes skip over that section when you are looking at the code.</span>

<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-keyword">function</span> <span class="uscript-type">bool</span> Process<span class="uscript-operator">(</span> vector Arg <span class="uscript-operator">)</span> <span class="uscript-operator">{</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">class</span><span class="uscript-name">'FunctionLib'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span>ProcessThis<span class="uscript-operator">(</span> Arg <span class="uscript-operator">)</span><span class="uscript-operator">;</span> <span class="uscript-operator">}</span>
<span class="uscript-keyword">function</span> <span class="uscript-type">bool</span> IgnoreMe<span class="uscript-operator">(</span> vector Arg <span class="uscript-operator">)</span> <span class="uscript-operator">{</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">class</span><span class="uscript-name">'FunctionLib'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span>IgnoreMe<span class="uscript-operator">(</span> <span class="uscript-keyword">Self</span><span class="uscript-operator">,</span> Owner<span class="uscript-operator">,</span> Arg <span class="uscript-operator">)</span><span class="uscript-operator">;</span> <span class="uscript-operator">}</span>
<span class="uscript-keyword">function</span> Quat FindReturn<span class="uscript-operator">(</span> vector Arg <span class="uscript-operator">)</span> <span class="uscript-operator">{</span> <span class="uscript-keyword">return</span> <span class="uscript-keyword">class</span><span class="uscript-name">'FunctionLib'</span><span class="uscript-operator">.</span><span class="uscript-keyword">static</span><span class="uscript-operator">.</span>FindReturn<span class="uscript-operator">(</span> Arg <span class="uscript-operator">)</span><span class="uscript-operator">;</span> <span class="uscript-operator">}</span>
<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-comment">/********************************************************************************************/</span>
<span class="uscript-comment">/********************************************************************************************/</span>

<span class="uscript-keyword">function</span> Quat DoSomeStuff<span class="uscript-operator">(</span> vector AnArgument <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">!</span>ProcessThis<span class="uscript-operator">(</span> AnArgument <span class="uscript-operator">)</span> <span class="uscript-operator">||</span> IgnoreMe<span class="uscript-operator">(</span> AnArgument <span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
    <span class="uscript-keyword">return</span> FindReturn<span class="uscript-operator">(</span> AnArgument <span class="uscript-operator">)</span>
<span class="uscript-operator">}</span></pre><p><em class="em2">Pingz:</em> Yea that's a freaking mess.  There has got to be a better way than just copying my functions to multiple classes or writing a ton of wrapper junk.  Maybe i should break down and create my own Quaternion class which can easily convert to UT2K3 Quat structs.  At least then the only extra work is saying </p>
<pre class="uscript"><span class="uscript-keyword">local</span> Quaternion my_quat<span class="uscript-operator">;</span>
my_quat <span class="uscript-operator">=</span> <span class="uscript-keyword">new</span> Quaternion<span class="uscript-operator">;</span></pre><p>A small price to pay i guess, but i wonder if this will thrash memory if i create and destroy several temporary quat classes every frame.</p>
<p>There has to be a better solution still.</p>
<p><em class="em2">Mychaeel:</em> Something like this, perhaps &ndash; while it does have the disadvantage of needlessly instantiating an object, it reads pretty neatly:</p>
<pre class="uscript"><span class="uscript-keyword">var</span> FunctionLib FunctionLib<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> MyFunction<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">!</span>FunctionLib<span class="uscript-operator">.</span>ProcessThis<span class="uscript-operator">(</span>AnArgument<span class="uscript-operator">)</span> <span class="uscript-operator">||</span> FunctionLib<span class="uscript-operator">.</span>IgnoreMe<span class="uscript-operator">(</span>AnArgument<span class="uscript-operator">)</span><span class="uscript-operator">)</span>
    <span class="uscript-keyword">return</span> FunctionLib<span class="uscript-operator">.</span>FindReturn<span class="uscript-operator">(</span>AnArgument<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
  Begin Object <span class="uscript-type">Name</span><span class="uscript-operator">=</span>FunctionLibInstance <span class="uscript-keyword">Class</span><span class="uscript-operator">=</span>FunctionLib
  End Object
  FunctionLib <span class="uscript-operator">=</span> FunctionLib<span class="uscript-name">'FunctionLibInstance'</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p>As an additional bonus, you could even make your FunctionLib accept certain "parameters" in terms of FunctionLib class variables that affect the outcome of its functions and define them in the "Begin Object" block without any additional overhead.</p>
<p><em class="em2">Pingz:</em> I emailed Tim on this, but never got a response... must have been busy.  I've still have not found a better solution than the one <a href="mychaeel.html">Mychaeel</a> suggested above.</p>
<h3><a name="0.1.3"></a>Trigger collision</h3>
<p>Is there a way to have a brush or static mesh act as the collision shape for a trigger instead of using CollisionHeight and CollisionRadius?  There must be, but after several hours of searching the Wiki i find no mention of how to do it.</p>
<p><em class="em2">Foxpaw:</em> You could write a custom volume class to do this. Actors will "collide" with the edges of the volume when they first enter it.</p>
<p><em class="em2">Pingz:</em> In the end i learned that not all <a href="actor.html">Actor</a>s are equal.  Alot of the behavior and capabilities of derived <a href="actor.html">Actor</a> objects are native within the engine itself which you can't change even though the script interface looks like it could.</p>
<p><em class="em2">Foxpaw:</em> Trust me, you can use a volume to do that, but you will need to custom script it. I THINK that could use use a static mesh too, if you made a class with an invisible static mesh.. that works with Karma. I dont' know if it will work with the proprietary physics or not though.</p>
<p><em class="em2">Wormbo:</em> You can use a <a href="volume.html">Volume</a>'s AssociatedActorTag to forward the volume's Touch and UnTouch events to a <a href="trigger.html">Trigger</a> which triggers the actual event.</p>
<p><em class="em2">Pingz:</em> I wasn't clear there... in the end i did do as <a href="foxpaw.html">Foxpaw</a> suggested and created a derived volume class.  I tried several times to get it to fire off a trigger, but ended up overloaded my volume's Touch event to just call a function on <em class="em1">other</em> if it was my pawn type.</p>
<h3><a name="0.1.4"></a>Dynamically Loaded Textures &amp; Resizable Geometry</h3>
<p>Ok two fairly weird things i'm trying to do in UT2K3 that i'm thinking is impossible, but i want to hear what people suggest.</p>
<p>First i have a need to <em class="em2">at runtime</em> load a texture that isn't in a package.  My guess is that it isn't allowed for security reasons, but if anyone has a crazy hack idea to make it work for an offline demo let me know.  My current crazy idea is to use <a href="libhttp.html">LibHTTP</a> to fetch the encoded texture data from a local webserver and recreate the texture via <a href="scriptedtexture.html">ScriptedTexture</a>.  Very crazy, but it should work fine for my needs.  Still anything obvious that i may be missing?</p>
<p>Second issue is i'm needing to resize level geometry at runtime.  I believe this is simple to do with a <a href="staticmeshactor.html">StaticMeshActor</a> and DrawScale (i assume this scales the collision info too), but i've yet to test this theory.  Am i correct in believing that i cannot scale either the entire level or individual world geometry at runtime?  I have workarounds for some of this as i can build just about everything important with <a href="static-mesh.html">StaticMesh</a>es, but not the sky box.  Any suggestions or comments on this?</p>
<p>If your wondering what this is for all i can say is that it's just a prototype of something that isn't a game.  So far UT2K3 has been a great place to prototype non-game 3d stuff as long as you can work around some of the limits.</p>
<p><em class="em2">Foxpaw:</em> I don't believe there is any way to resize the BSP at runtime. Though simple in concept, the BSP information gets flaky if it isn't stored as multiples of 8, so arbitrarily resizing the world would cause lots of problems.</p>
<p><em class="em2">Pingz:</em> That's what i figure too.  Luckily i think i can static mesh all of the most important resizing parts.  And for the textures i'm just gonna implement my own TCP server in C and a custom TCP client which can request the binary data and stuff it into a <a href="scriptedtexture.html">ScriptedTexture</a> ( i can draw pixels into these with DrawTile right? ).  Gonna be really interesting to see how slow that all is... good thing that doesn't matter too much.</p>
<p><em class="em2">Foxpaw:</em> If speed is not an issue, you can use a constantcolor material for this: set the color of it, draw it on at 1x1 pixels, change color to the next pixel color, etc. However, doing this will mean that your textures will have no mipmaps.</p>
<p class="indent1"><em class="em2">Mychaeel:</em> Also, since a Material's properties stick for the remainder of a frame after they've been used (probably because the material has been uploaded into video memory by its first use), you'd only be able to draw pixels in a single color each frame.  Better (and most likely a lot more efficient) to use the <code>Color</code> parameter in the <code>DrawTile</code> method while drawing a "white" texture tile.</p>
<p><em class="em2">O-GL:</em> Pingz, I was just curious if ScriptedTexture actually worked for you when creating a texture one texel at a time.  Im also wondering if it is possible to read individual pixel colors from a texture.  Such a simple request but I just cannot seem to find a solution.</p>
<p><em class="em2">Mychaeel:</em> I've successfully drawn monochrome bitmaps loaded from a BMP file on a ScriptedTexture (mostly because it's easy to optimize the drawing process by drawing a whole byte's worth of pixels &ndash; eight pixels in a row &ndash; in one step) for my eternally-work-in-progress SprayPaint mutator (see my <a href="mychaeel-developer-journal.html">Developer Journal</a>).  You could use the same mechanism to draw full-color textures pixel by pixel, but I suppose that would be prohibitively slow (but I've never tried it).  Of course, if you have the time (in the game), you can somewhat lessen the impact of the task by only drawing a small portion of the texture each frame and using what you've drawn as a starting point in the next frame.</p>
<p>As for reading a pixel's color, I looked for a solution for that myself in vain when I was implementing the scoreboard minimap for Jailbreak 2003.  (I wanted to generate a minimap using DrawPortal and do some shader magic with another ScriptedTexture to make the black pixels surrounding the level geometry on the minimap transparent.)  As far as I recall, my search was utterly unsuccessful.</p>
<h2><a name="0.2"></a>Guestbook</h2>
<p><em class="em2">Wormbo:</em> Welcome to the Wiki, Pingz. Feel free to add yourself to the <a href="category-personal-page.html">Project Contributors</a> list if you didn't already do that. <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">EntropicLqd:</em> Hello and welcome.  Enjoy your stay <img alt=":)" src="emoticons/smile.gif" align="middle">.</p>
<p><em class="em2">Pingz:</em> Hi all. Thanks.  I'm still getting a feel for this whole wiki thing.</p>
<p><em class="em2">Highlander:</em> Hi and welcome to the Wiki.</p>
<p><em class="em2">Tarquin:</em> Hi there. "<em class="em2">Pingz:</em> Is there a compelling reason to make 'rebuild' and 'build' two different topics?  They do the same thing." &ndash; <a href="rebuild.html">rebuild</a> is a <a href="basic-procedure.html">basic procedure</a> page: it gives just the simple steps for newbs. <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">GRAF1K:</em> I know that you're quite an advocate of <tt>.PNG</tt> files, but Unreal server pinging would also be a possible. Did either of those influence your name &ndash; I've just been wondering for awhile. <img alt=":-)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">Pingz:</em> Actually it comes from my Quake playing days.  I went by Pingzero for a long time and shortened it after my clan mates kept calling me that in IRC.</p>
<hr class="thin"><p><a href="category-personal-page.html">Category Personal Page</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Questions To The Wikites", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Scripting Language Within UScript?", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Where should i put global functions?", "#0.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Trigger collision", "#0.1.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Dynamically Loaded Textures &amp; Resizable Geometry", "#0.1.4");
menuItemAdd("Guestbook", "#0.2");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited September 11, 2005 17:48 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Pingz">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Pingz">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>I'm a doctor, not a mechanic
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
