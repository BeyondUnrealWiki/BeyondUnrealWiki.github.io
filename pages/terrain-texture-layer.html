<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Terrain Texture Layer</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Terrain_Texture_Layer; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Terrain Texture Layer">Terrain Texture Layer</a></h1>
	<div class="wiki"><p>A <a href="terrain.html">Terrain</a> can contain a large number of <em class="em2">texture layers</em>. These allow different textures to be visible (and blended!) in different areas of a terrain. For example, a mountain might have snow on the tops; or a hillside might have gravel paths across it.</p>
<p>A texture layer therefore is really just two pieces of information: the name of the texture to display on the layer, and the name of the texture that is the alpha map for the layer's visibility. This second texture is what determines where the first texture is visible.</p>
<p>Layers have a stacking order, so newer layers cover up the older ones. You can change the order of layers after you've created them.</p>
<p>The list of layers is shown in two places:</p>
<ul><li>in the Terrain Editing Window, where you can edit how much and where each layer is visible. Note that the top layer in the list is the bottom-most in the rendering order (or the one rendered first if you prefer...)</li>
<li>in the <a href="terraininfo.html">TerrainInfo</a>'s <a href="actor-overview.html">Actor Properties</a>, where you can change the other settings.</li>
</ul>
<h2><a name="0.1"></a>Add a terrain layer </h2>
<p>You'll need to start by <a href="creating-a-terrain.html">Creating A Terrain</a> <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p>There are two ways to add a new layer to your terrain: </p>
<ul><li>use <a href="terrain-mode.html">Terrain mode</a> if you don't have a alpha map you wish to apply: it will create one for you which you can then edit with the <a href="painting-terrain-tool.html">Painting Terrain Tool</a>.</li>
<li>use the <a href="terraininfo.html">TerrainInfo</a>'s <a href="actor-properties-window.html">actor properties window</a> if you have an existing texture for the alpha map: for example, one you've made in an image editing <a href="application.html">application</a> and imported; or a duplicate of the alpha map of another layer. (Of course you can edit this alpha map too once the layer is made. But remember that this edits the alpha map texture, so if it's in use elsewhere, that will reflect the changes too.)</li>
</ul>
<h3><a name="0.1.1"></a>...in terrain mode</h3>
<ol><li>In the <a href="texture-browser.html">Texture Browser</a>, select a texture to be applied to the new layer. See the <a href="texture-package.html">Texture Package</a> list for suggestions. We'll call this the <em class="em1">display texture</em>.</li>
<li>Click on the <a href="terrain-mode.html">Terrain Mode</a> button. The Terrain Mode window opens.</li>
</ol>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[interface-Ed3-TerrainTool]" src="images/interface-ed3-terraintool.png"></div>
</td>
</tr>
</table>
</div>
<ol><li>In the 'Terrains' tab (halfway down the window), select from the list of TerrainInfos the one that represents the terrain you wish to add a layer to.</li>
<li>Click on the 'Layers' tab. You might need to click on the first empty layer in the list to wake it up, but not always (and note that this part of the window is a bit buggy and doesn't always react the first time to clicks). Click the 'New...' button to the right. The New Layer window will open. You're about to create a new <a href="texture.html">texture</a> that will represent the alpha map for the layer &ndash; where the layer is visible and how it is tinted.</li>
</ol>
<dl><dt><a href="package.html">Package</a></dt><dd>Where to store the alpha map texture. <a href="mylevel.html">MyLevel</a> works here of course, to allows you to store the texture inside your map file. It's a good idea to place all the texture associated with your terrain in the same place.</dd><dt>Group</dt><dd>whatever you like. It's a good idea to use something meaningful like 'Terrain', which will keep the textures used by your terrain apart from everything else.</dd><dt>Name</dt><dd>whatever you want, but it's a good idea to use a name which reflects the layer you're going to make. Later on in the Terrain Mode window, this name is what will be the name of your layer. 'Layer1' will do, or 'RockLayer' or 'SandLayer' for example. If you're using several different terrains in your map, you might want thee name to reflect that too, eg 'SandDune-Pebbles', 'Hill-Path', 'BlueBase-Rocky'.</dd><dt>Alpha Height &amp; Alpha Width</dt><dd>The height &amp; width of the texture you're about to create. These values must match the dimensions of the heightmap for your terrain, unless you are using UScale &amp; VScale to scale up. These are listed in the wrong order: the 'y' dimension before the 'x', but since non-square layers make UnrealEd crash, it doesn't really matter.</dd><dt>Alpha fill</dt><dd>colour to fill in the alpha map initially. Pick black to start with a totally invisible layer, white for a totally visible one. </dd><dt>Color Fill</dt><dd>For color fill, I believe this is the color that will 'Fade' in to the other layers when you paint the texture on. This must be a different color for each layer. (Example: A layer's color fill cannot be the same as another layers color fill. Ie. Red-Red is wrong and Red-Blue will work great ) ?????</dd></dl>
<p>Frankie C: Not a bad thought...but actually, the first texture layer color should be white, with other layer colors typically being black. The concept revolves around opacity (alpha channels, for those familiar), similar to making a displacement map in other applications (i.e., white is opaque, black is transparent, and the gray scale works as a varying level of transparency).</p>
<dl><dt>UScale &amp; VScale</dt><dd>These determine how the display texture is scaled when it is applied to the terrain. It works exactly like the <a href="surface-properties-window.html">surface properties</a> under the tab Pan/Rot/Scale. You can also apply a pan to the display texture in the layer properties once you've created it.</dd></dl>
<p>Finally, when you are satisfied with your new layer's settings, click OK.</p>
<p>There should now be a new layer in the list. It should be visible in UnrealEd immediately, though you might need to move around, or make a change to the terrain such as painting the height or the layer for UnrealEd to "wake up".</p>
<h3><a name="0.1.2"></a>...in the TerrainInfo</h3>
<p>In the TerrainInfo's <a href="actor-overview.html">Actor Properties</a>, expand the TerrainInfo &rarr; Layers array, and find the first empty array element. We'll refer to it as Layers[i] below.</p>
<p><a href="set-the-following-propertie.html">Set the following properties</a>:</p>
<ul><li><a href="set-the-resource-property.html">Set the resource property</a> TerrainInfo &rarr; Layers[i] &rarr; AlphaMap = whatever alpha map you want to use.</li>
<li><a href="set-the-resource-property.html">Set the resource property</a> TerrainInfo &rarr; Layers[i] &rarr; Texture = the <a href="texture.html">texture</a> the layer should display. (for example snow, grass, rocks, etc. See <a href="texture-package.html">Texture Package</a> for suggestions of what to use)</li>
<li>TerrainInfo &rarr; Layers[i] &rarr; UScale and VScale = however you want to scale the texture on the layer. 1 will do for now.</li>
</ul>
<p><em class="em2">FreshMeat:</em> Correct me if I'm wrong, but this is set by default, correct?</p>
<h2><a name="0.2"></a>Editing the layer</h2>
<h3><a name="0.2.1"></a>Visibility</h3>
<p>Now click on the layer and then click on the <a href="painting-terrain-tool.html">Painting Terrain Tool</a> under the ' Terrain Editing Tools ' Menu. Now, on your terrain in your level. Use the paint controls (CTR+LMB to erase the texture and CTR-RMB to add the texture) on the area you want to change the texture to. depending on the ' Strength ' you set, the texture will ' fade ' in covering the older texture.</p>
<p>In the layer tab, you can right-click on a layer in the list, and do:</p>
<ul><li>Set alpha map from the current texture</li>
<li>Set display texture from the current texture</li>
<li>Toggle grid display for the layer</li>
</ul>
<h3><a name="0.2.2"></a>Properties</h3>
<p>These are in the <a href="terraininfo.html">TerrainInfo</a> &rarr; Layers array.</p>
<dl><dt><a href="texture.html">Texture</a> AlphaMap</dt><dd>the alpha map texture. </dd><dt>float KFriction</dt><dd></dd><dt>float KRestitution</dt><dd></dd><dt>Rotator LayerRotation</dt><dd></dd><dt><a href="material.html">Material</a> Texture</dt><dd>the displayed texture</dd><dt>ETexMapAxis TextureMapAxis</dt><dd></dd><dt>float TextureRotation</dt><dd></dd><dt>float UPan</dt><dd></dd><dt>float UScale</dt><dd></dd><dt>float VPan</dt><dd></dd><dt>float VScale</dt><dd></dd></dl>
<h3><a name="0.2.3"></a>Known bugs/nicks</h3>
<p><em class="em2">When making the layers you can get a result like this:</em></p>
<p><img alt="[la_terrain_trouble]" src="images/la-terrain-trouble.jpeg" class="image-inline"> <img alt="[la_terrain_trouble_grid]" src="images/la-terrain-trouble-grid.jpeg" class="image-inline"></p>
<p>As you can see in the grid image it just fills the middle of every quad. To solve this you have to make sure all the layers' alpha maps heightmap is the same size. This means that if your terrain is 256x256, the size of that layer's alpha has to be 256x256, or if it's 128x128, make sure the alpha of that texture layer is 128x128, etc...</p>
<p><em class="em2">Tarquin:</em> I have no idea what these images are supposed to show. If nobody can explain, I'll delete them.</p>
<p><em class="em2">Anonymous:</em> Whomever wrote this was trying to say that if you don't set the Alpha Height and Width to an appropriate number when creating a new layer, the fade out from the centre of the grid coordinate to the edge won't be what you're expecting.  You can see that in the images above, where the grass texture only shows up as a dot in the middle. I could be wrong, but I'm pretty sure the best bet is to match the alpha size of the layer you're painting with to the same number as the terrain sector size.  I think they also try to say that here, but not very clearly.</p>
<p>This means you <em class="em2">can not</em> have different sizes despite the obvious reason for having them (optimizing).</p>
<h2><a name="0.3"></a>Comments</h2>
<p>Could someone please clarify these steps with some screenshots?  I'm totally confused.  I tried to paint a texture on to my terrain, but I still only see the terrain in wireframe view.  How do I know it's working?</p>
<p><em class="em2">Tarquin:</em> How's that? I've cleaned up the instructions, going through it myself in the ed.</p>
<p>Make sure the texture is RGB8, it wont show up otherwise.</p>
<p><em class="em2">Bob_The_Beheader:</em> I think that it would be a good idea to have some tips on exactly how to go about painting the terrain. I mean, what looks good asthetically, how much blending there should be, that sort of think. I think this may apply to other topics as well.</p>
<p><em class="em2">Oddsuds:</em> I have been following the tutorials to learn UEd3.0 recently and have encountered a problem painting texture layers. My textures paint onto the terrain in large blocks that are solid and not blended at all around the edges. It's almost like pixel editing with really huge regions. I was wondering if you could explain here or on the <a href="painting-terrain-tool.html">Painting Terrain Tool</a> page how to go about making smoothly blended texture layers.</p>
<p><em class="em2">FreshMeat:</em> I don't understand. How do you make sure the lower points have, for instance, a road like texture while the ones slightly higher than that would be dirt, and the ones higher than that would be grass? Specifically, how do you controll how high a surface has to be in order to be a road?</p>
<p><em class="em2">Still Freshmeat:</em> hm.. are there 16 layers to match with each of the 16 colors in your grayscale heightmap?</p>
<p><em class="em2">Tarquin:</em> You've got it all wrong. The height has nothing to do with the texture. Each layer texture has its OWN alpha map that shows how visible it is.</p>
<p><em class="em2">FreshMeat:</em> Alright, I've followed this step by step... but ctrl-right clicking seems to not paint a thing onto my terrain at all... I think it has something to do with the alpha heightmap? Can someone please edit this page to explain how things actually work and what they do, rather than just saying "for this example let's do this and this"? I'm not following along on a tutorial. I'm learning how to use the editor, not this specific map. See, I had someone else make my greyscale so I could see one in action (and I suck at photo editing), so how do you determine what your alpha height and width should be?</p>
<p><em class="em2">Tarquin:</em> painting terrain can be buggy. The size of your terrain alpha map (and it's NOT a height map, if you say that I can't be sure of what you mean) should match the size of the terrain height map (which IS a height map). </p>
<p><em class="em2">Fresh:</em> So then Alpha height and width refer to the alpha map in 2 dimensions. The two dimensions of a flat texture, and not the three dimensions of the actuall wireframe you're trying to paint? That makes alot more sense.  Hmmmm, no, that crashed my editor. someone please kindly further explain Alpha Height and Alpha Width.</p>
<p><em class="em2">Tarquin:</em> Ok, it seems Uscale and VScale (edited &ndash; sorry, I got this wrong) have been defined differently in parts of this page. These variables affect how the visible texture is stretched on the terrain. There is nowhere to tell UnrealEd how to scale the texture layer alpha map &ndash; it figures that out automatically. Eg, if I add a 32x32 texture layer to a 128x128 terrain, there is no problem. it just means you won't have as fine a resolution for your layer.</p>
<p><em class="em2">FreshMeat:</em> So if my texture is 512x512, that's what i should put into the alpha?</p>
<p><em class="em2">Tarquin:</em> Er... hang on, I think I've messed up even more. Uscale and VScale stretch the visible texture. What texture are you talking about? AlphaHeight and AlphaWidth have nothing to do with the visible texture. They define the size of the visibility map you are about to create in the dialog box. If you already have a visibility map, then you're not going to give an AlphaHeight and AlphaWidth.</p>
<p><em class="em2">FreshMeat:</em> someone apparently needs to go through and redo this page with consistant terms and clear instructions. I have no idea what a "visibility map" is. All I know is I have a wireframe view of my terrain from a heightmap, and I would sincerly love to texture it, but I am hopelessly confused at this section. My heightmap is 512x256. I have textures I wish to use, and I know how to import them. I would like to make some grass, and a dirt path. I have no idea how, and I begin to wonder if this is even possible. I can't even get textures ON my wireframe, let alone on my wireframe where I want them. If someone could kindly redo this page for someone who has essentially no idea what any of the terms actually mean, I would be eternaly grateful.</p>
<p><em class="em2">Tarquin:</em> "A texture layer therefore really just two pieces of information: which texture is the alpha map for the layer's visibility, and which texture is displayed on the layer." What part of this don't you get? I've tried to make it clearer.</p>
<hr class="thin"><p><a href="category-mapping.html">Category Mapping</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Add a terrain layer ", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>...in terrain mode", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>...in the TerrainInfo", "#0.1.2");
menuItemAdd("Editing the layer", "#0.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Visibility", "#0.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Properties", "#0.2.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Known bugs/nicks", "#0.2.3");
menuItemAdd("Comments", "#0.3");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited April 3, 2007 22:22 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Terrain_Texture_Layer">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Terrain_Texture_Layer">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>Describe the new page here.
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
