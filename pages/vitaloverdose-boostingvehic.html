<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: VitalOverdose/BoostingVehicleFactory</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=VitalOverdose/BoostingVehicleFactory; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="vitaloverdose.html">VitalOverdose</a>/<a href="http://wiki.beyondunreal.com/wiki?back=VitalOverdose/BoostingVehicleFactory">BoostingVehicleFactory</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut2004.png"> <a href="unreal-tournament-2004.html">UT2004</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="svehiclefactory.html">SVehicleFactory</a> &gt;&gt; <a href="asvehiclefactory.html">ASVehicleFactory</a> &gt;&gt; AllMapVecFactory (Package: custom)<br></div>
<pre class="paraverbatim"> </pre><p>by <a href="vitaloverdose.html">VitalOverdose</a></p>
<p>Part of  <a href="vitaloverdose-vitals-pro-ma.html">Vital'sPMT</a></p>
<h3><a name="0.0.1"></a>Overview</h3>
<p>the boostingVecicle factory is a modified ASVehicle factory that adds an optional <a href="vitaloverdose-vecbooster.html">VitalOverdose/VecBooster</a> to every vehicle it spawns. The auto boost is activated (on a timed delay) as soon as a player or bot enters the vehicle as a driver.Theres is a short delay between the driver entering and the actual boost taking place, this is to give the player time to possition himself in the direction hes wishes to be boosted. The last 3 seconds of the boost has an optional vocal countdown. These can be switched off by simply removing the sounds in actor browser in unrealed at map creation time. The VecBoost process will happen every time a new driver gets in the vehicle depending on how many boosts the mapper has specified when they placed it in the map ( setting this property to -1 will result in Infinite boosts). the boost strength and direction can be altered be the mapper at map creation time. It is also possible to set the vehicle so that it will boost whoever enters the drivers seat no just a new driver.</p>
<p>There is a BotLock System used on the Vec for the boosting process (see <a href="vitaloverdose-vecbooster.html">VitalOverdose/VecBooster</a> for details on why). This is automatic and the only settable property of the bot lock is 'BotCaptureTime' </p>
<pre class="paraverbatim"> BoostDelay          - Time delay for the boost on driver entry.
 BotCaptureTime      - For the <a href="vitaloverdose-botlock.html">VitalOverdose/BotLock</a> system.
 bBoostsEmptyVecs    - If the vec should still boost if the driver leaves or dies during the countdown to the boost.
 SameDriverRE_Boost  - If the current driver can leave then re-enter the vec and cause another boost
 Voc_Booster         - For the vocal countdown.
 Voc_one             - For the vocal countdown.
 Voc_two             - For the vocal countdown.
 Voc_three           - For the vocal countdown.
 bDirectional        - Property already present in ASVehicleFactory. If true the vec will use the direction the.                                    BoostingVecFactory is facing to base the direction of the boost on.
 TagfxClass          - An emitter actor to use as a trail for the boost effect. Simply leave blank to disable the trail.</pre><h4><a name="0.0.1.1"></a>Internal Variables (not available to the mapper).</h4>
<pre class="paraverbatim"> Boosts              - How many available boosts this vec has.
 LastDriver          - Valid actor ref of the last driver.
 currentdriver       - Valid actor ref of the current driver.
 RotRelation         - which actor to base the direction of the boost on ...indirectly set by mapper.
 bPrimed             - Boolean to indicate if the vec is on a countdown to boost.
 bBoosting           - Boolean to indicate if the vec has been boosted. Used to track the time on the botlock + trail Fx.
 VocalCounter        - The vocal counter.
 spawnedtagFX        - valid ref to the emitter making the fx trail.
 bCounting           -</pre><p>This Script is made possible by the way that the as vehicle factory keeps track of how many vehicles is spawned and whether it should be spawning a new one or not. When it does spawn a new vehicle the vehicles valid actor ref it recored by the factory and saved in the internal property called <em class="em2">child</em>. Also the vehicle itself takes a record of who spawned </p>
<h3><a name="0.0.2"></a>function PostBeginPlay()</h3>
<pre class="uscript"><span class="uscript-keyword">function</span> PostBeginPlay<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">local</span> Gameinfo FoundGameInfo<span class="uscript-operator">;</span>                                <span class="uscript-comment">// blank variable of type 'Gameinfo' to store ref</span>
 <span class="uscript-keyword">foreach</span> DynamicActors<span class="uscript-operator">(</span><span class="uscript-keyword">Class</span><span class="uscript-name">'Engine.Gameinfo'</span><span class="uscript-operator">,</span> FoundGameInfo<span class="uscript-operator">)</span> <span class="uscript-comment">// iterates though all dynamic actors that are 'gameinfos'</span>
        <span class="uscript-operator">{</span>                                                     <span class="uscript-comment">// and stores a ref to them in  FoundGameInfo</span>
         FoundGameInfo<span class="uscript-operator">.</span>bAllowVehicles <span class="uscript-operator">=</span> <span class="uscript-keyword">True</span><span class="uscript-operator">;</span>                 <span class="uscript-comment">// Sets the value FoundGameInfo.bAllowVehicles to true</span>
        <span class="uscript-operator">}</span>
 RotRelation  <span class="uscript-operator">=</span> <span class="uscript-keyword">Self</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>voc_booster<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     VocalCounter<span class="uscript-operator">=</span><span class="uscript-number">3</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 enable <span class="uscript-operator">(</span><span class="uscript-name">'tick'</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>postbeginplay<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                       <span class="uscript-comment">// copys any function related code from parent class</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.3"></a>function Timer()</h3>
<p>this is the hardest function to modify in this class as is already used for the delay on the spawning of the vehicle in the first place. So any extra code has to operate with out messing with the existing functions</p>
<pre class="uscript"><span class="uscript-keyword">function</span> Timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>                                  
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bCounting<span class="uscript-operator">)</span> 
    <span class="uscript-operator">{</span>
     VocalCountdown<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>   
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bPrimed<span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span><span class="uscript-operator">(</span>bUseBoostvec<span class="uscript-operator">==</span><span class="uscript-keyword">true</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>boosts<span class="uscript-operator">!=</span><span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     VecBoost<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                       
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">else</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>Bboosting<span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span> ONSVehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        ONSVehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>    
       <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> spawnedtagFX<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
          <span class="uscript-operator">{</span>
           spawnedtagFX<span class="uscript-operator">.</span>Destroyed<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>     
          <span class="uscript-operator">}</span>
       <span class="uscript-operator">}</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.4"></a>function VocalCountdown()</h3>
<p>this function is real only here to make things easyer to follow in the timer function. The timer function calls this function  once and then the next 3 timer calls are controled from the end of this function if vocal counting is required. </p>
<pre class="uscript"><span class="uscript-keyword">function</span> VocalCountdown<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 VocalCounter <span class="uscript-operator">-=</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">0</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>                                   
     child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_booster<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     bcounting<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
     bprimed<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">1</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_one<span class="uscript-operator">)</span><span class="uscript-operator">;</span>       
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">2</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_two<span class="uscript-operator">)</span><span class="uscript-operator">;</span>      
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">3</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_three<span class="uscript-operator">)</span><span class="uscript-operator">;</span>      
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>vocalcounter <span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span> 
    <span class="uscript-operator">{</span>
     SetTimer <span class="uscript-operator">(</span><span class="uscript-number">1</span><span class="uscript-operator">,</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.5"></a>Simulated function VecBoost()</h3>
<p>This is a modified version of the <a href="vitaloverdose-vecbooster.html">VitalOverdose/VecBooster</a> , it boosts the vec and spawns the  emitter fx. It then set the right flags in the bolean properties to indicate the new Virtual state of the vec. As we dont want to have to mess about with the vehicle code im keeping a VirtualRecord of its state,  either Primed,counting or boosting so that decisions can be made based on what condition the vehicle is in at any one time. </p>
<pre class="uscript"><span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">function</span>  VecBoost<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">local</span> Vector PointBoostForce<span class="uscript-operator">;</span>                                                                            
 boosts <span class="uscript-operator">-=</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bDirectional <span class="uscript-operator">==</span> <span class="uscript-keyword">True</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     RotRelation  <span class="uscript-operator">=</span> child<span class="uscript-operator">;</span>                                                   
    <span class="uscript-operator">}</span>
  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>child<span class="uscript-operator">.</span>driver <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span>  <span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span> child<span class="uscript-operator">.</span>IsHumanControlled<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">==</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     ONSVehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>                     
    <span class="uscript-operator">}</span>                                                                          
 child<span class="uscript-operator">.</span>KAddImpulse<span class="uscript-operator">(</span> ActualBoostForce <span class="uscript-operator">&gt;&gt;</span> RotRelation<span class="uscript-operator">.</span>Rotation<span class="uscript-operator">,</span> PointBoostForce <span class="uscript-operator">&gt;&gt;</span> RotRelation<span class="uscript-operator">.</span>Rotation <span class="uscript-operator">)</span> <span class="uscript-operator">;</span>
 bPrimed   <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                                          
 bBoosting <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>                                                          
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>TagfxClass<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     spawnedtagFX<span class="uscript-operator">=</span>spawn<span class="uscript-operator">(</span>TagfxClass<span class="uscript-operator">,</span>child<span class="uscript-operator">,</span><span class="uscript-operator">,</span>child<span class="uscript-operator">.</span>location<span class="uscript-operator">,</span>child<span class="uscript-operator">.</span>rotation<span class="uscript-operator">)</span><span class="uscript-operator">;</span>    
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>spawnedtagFX <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        spawnedtagFX<span class="uscript-operator">.</span>setbase<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
       <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>child<span class="uscript-operator">.</span>driver <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span>  <span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span> child<span class="uscript-operator">.</span>IsHumanControlled<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">==</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        settimer<span class="uscript-operator">(</span>BotCaptureTime<span class="uscript-operator">,</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                        
       <span class="uscript-operator">}</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.6"></a>Function VehicleSpawned()</h3>
<p>this function is allready part of ASVhicle factory. it gets called from the function SpawnVehicle right after the vecfactory checks if the spawn whent ok. Here its being over written just to check the overall amount of boosts the vehicle has left. The new code is put in before the <em class="em2">.super</em> function and dosent contain any returns so it wont interfere with the way this function normaly works.</p>
<pre class="uscript"><span class="uscript-keyword">function</span> VehicleSpawned<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>                                                                            
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bUseBoostvec<span class="uscript-operator">==</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     boosts <span class="uscript-operator">=</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
     boosts <span class="uscript-operator">+=</span> RepeatBoosts<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 
<span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehicleSpawned<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.7"></a>function Tick(float deltatime)</h3>
<p>Here Tick() is over written to do most of the checking om the fx and the control over the botLock system. This leaves the timer function less cluttered and easyer to work with. Tick get run far more frequently that the timer (imn most cases) and it best not to have anything to complicated going on there as this is a strain on the cpu. There is a fair amount of code been added to tick in this case but i dont think its getting close to what would be considered to much</p>
<pre class="uscript"><span class="uscript-keyword">function</span> Tick<span class="uscript-operator">(</span><span class="uscript-type">float</span> deltatime<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> child <span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bBoosting<span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>vocalcounter<span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>Voc_Booster<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        vocalcountdown<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
       <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>child<span class="uscript-operator">.</span>Driver <span class="uscript-operator">==</span> <span class="uscript-keyword">none</span> <span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>currentdriver<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        lastdriver    <span class="uscript-operator">=</span> currentdriver<span class="uscript-operator">;</span>                                       
        currentdriver <span class="uscript-operator">=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bPrimed <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
            bPrimed <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                                 
           <span class="uscript-operator">}</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bboosting <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
            bboosting <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                               
            <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> spawnedtagfx<span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
               <span class="uscript-operator">{</span>
                spawnedtagFX<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                      
               <span class="uscript-operator">}</span>
           <span class="uscript-operator">}</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bBoosting<span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>onsvehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bVehicleOnGround<span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        bBoosting <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> spawnedtagfx<span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
            spawnedtagFX<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                              
           <span class="uscript-operator">}</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>onsvehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
            onsvehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span> 
           <span class="uscript-operator">}</span>   
       <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>       
<span class="uscript-keyword">super</span><span class="uscript-operator">.</span>tick<span class="uscript-operator">(</span>deltatime<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.8"></a>function vehicledestroyed(Vehicle V)</h3>
<p>This function is already present in asvehiclefactory and is called by the vehicle when it gets destroyed to tell the factory it needs to spawn another vehicle. Some code has been added to basically reset the timers and the virtual state of the vehicle (ie.primed,boosting etc).</p>
<pre class="uscript"><span class="uscript-keyword">function</span> vehicledestroyed<span class="uscript-operator">(</span>Vehicle V<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 lastdriver    <span class="uscript-operator">=</span> currentdriver<span class="uscript-operator">;</span>                                              
 currentdriver <span class="uscript-operator">=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
 bboosting     <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                                      
 bPrimed       <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                                      
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>spawnedtagfx <span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     spawnedtagFX<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                                 
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehicleDestroyed<span class="uscript-operator">(</span>v<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.9"></a>Event VehicleUnPossessed( Vehicle V )</h3>
<p>To save the stress on the cpu the trail fx are switched off if the driver leaves the vec while boosting. This also acts as a good visual indicator that someone has jumpped out that can be seen for some distance. The extra code here mainly deals with the seting of the right flags for the virtual state of the vec.</p>
<pre class="uscript"><span class="uscript-keyword">event</span> VehicleUnPossessed<span class="uscript-operator">(</span> Vehicle V <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 lastdriver    <span class="uscript-operator">=</span> currentdriver<span class="uscript-operator">;</span>                                              
 currentdriver <span class="uscript-operator">=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bBoosting <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     bBoosting <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                                      
     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>spawnedtagFX<span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
         spawnedtagFX<span class="uscript-operator">.</span>Destroyed<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                           
        <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>bBoostsEmptyVecs <span class="uscript-operator">!=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>vocalcounter <span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
            vocalcounter <span class="uscript-operator">=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
           <span class="uscript-operator">}</span>
       <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bPrimed <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>                                                                        
     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bBoostsEmptyVecs <span class="uscript-operator">!=</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>                                                                  
         bprimed <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>                                                   
         <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> VocalCounter <span class="uscript-operator">&gt;</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>                                                                  
            VocalCounter <span class="uscript-operator">=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>                                              
           <span class="uscript-operator">}</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
<span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehicleUnPossessed<span class="uscript-operator">(</span>V<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.10"></a>Event VehiclePossessed( Vehicle V )</h3>
<p>This is the function that really make this mod possible in the first place. The vehicle will report back to the factory that spawned it as soon as someone eneters it. This means that the vehicle code dosent have to be alltered at all as the vehicle factory can quite simply call kaddimpulse using either the valid ref stored in the property child or the new one gained through this function (just called V). One the function has called boost it just sets a few flags fort the veirtual status of the vec.</p>
<pre class="uscript"><span class="uscript-keyword">event</span> VehiclePossessed<span class="uscript-operator">(</span> Vehicle V <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 currentdriver<span class="uscript-operator">=</span>v<span class="uscript-operator">.</span>Driver<span class="uscript-operator">;</span>                                                     
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bUseBoostvec<span class="uscript-operator">==</span><span class="uscript-keyword">true</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>boosts <span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>voc_booster<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
        VocalCounter<span class="uscript-operator">=</span><span class="uscript-number">4</span><span class="uscript-operator">;</span>                                                      
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>voc_booster <span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>boostdelay <span class="uscript-operator">&gt;</span><span class="uscript-number">3</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
             boostdelay<span class="uscript-operator">-=</span><span class="uscript-number">3</span><span class="uscript-operator">;</span>
             bCounting <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
            <span class="uscript-operator">}</span>                     
        bPrimed<span class="uscript-operator">=</span><span class="uscript-keyword">True</span><span class="uscript-operator">;</span>                                                         
       <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehiclePossessed<span class="uscript-operator">(</span>V<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.0.11"></a>The Completed Script</h3>
<p>Here is the completed Script for now;-</p>
<pre class="uscript"><span class="uscript-keyword">class</span> BoostingVehicleFactory <span class="uscript-keyword">extends</span> ASVehicleFactory
<span class="uscript-keyword">placeable</span><span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">bool</span>              bUseBoostvec<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> vector            ActualBoostForce<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">int</span>               RepeatBoosts<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">int</span>               BoostDelay<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">int</span>               BotCaptureTime<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">bool</span>              bBoostsEmptyVecs<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-type">bool</span>              SameDriverRE_Boost<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound             Voc_Booster<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound             Voc_one<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound             Voc_two<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> sound             Voc_three<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   <span class="uscript-type">int</span>               Boosts<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   pawn              LastDriver<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   pawn              currentdriver<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   actor             RotRelation<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   <span class="uscript-type">bool</span>              bPrimed<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   <span class="uscript-type">bool</span>              bBoosting<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   <span class="uscript-type">int</span>               VocalCounter<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   emitter           spawnedtagFX<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span><span class="uscript-operator">(</span><span class="uscript-operator">)</span> <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>emitter<span class="uscript-operator">&gt;</span>    TagfxClass<span class="uscript-operator">;</span>
<span class="uscript-keyword">var</span>   <span class="uscript-type">bool</span>              bCounting<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> PostBeginPlay<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">local</span> Gameinfo FoundGameInfo<span class="uscript-operator">;</span>                                <span class="uscript-comment">// blank variable of type 'Gameinfo' to store ref</span>
 <span class="uscript-keyword">foreach</span> DynamicActors<span class="uscript-operator">(</span><span class="uscript-keyword">Class</span><span class="uscript-name">'Engine.Gameinfo'</span><span class="uscript-operator">,</span> FoundGameInfo<span class="uscript-operator">)</span> <span class="uscript-comment">// iterates though all dynamic actors that are 'gameinfos'</span>
        <span class="uscript-operator">{</span>                                                     <span class="uscript-comment">// and stores a ref to them in  FoundGameInfo</span>
         FoundGameInfo<span class="uscript-operator">.</span>bAllowVehicles <span class="uscript-operator">=</span> <span class="uscript-keyword">True</span><span class="uscript-operator">;</span>                 <span class="uscript-comment">// Sets the value FoundGameInfo.bAllowVehicles to true</span>
        <span class="uscript-operator">}</span>
 RotRelation  <span class="uscript-operator">=</span> <span class="uscript-keyword">Self</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>voc_booster<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
     VocalCounter<span class="uscript-operator">=</span><span class="uscript-number">3</span><span class="uscript-operator">;</span>

 enable <span class="uscript-operator">(</span><span class="uscript-name">'tick'</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>postbeginplay<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>                                       <span class="uscript-comment">// copys any function related code from parent class</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> Timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bCounting<span class="uscript-operator">)</span>
    VocalCountdown<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bPrimed<span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span><span class="uscript-operator">(</span>bUseBoostvec<span class="uscript-operator">==</span><span class="uscript-keyword">true</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>boosts<span class="uscript-operator">!=</span><span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
     VecBoost<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

 <span class="uscript-keyword">else</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>Bboosting<span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span> ONSVehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        ONSVehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> spawnedtagFX<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
             spawnedtagFX<span class="uscript-operator">.</span>Destroyed<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> VocalCountdown<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 VocalCounter <span class="uscript-operator">-=</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">0</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_booster<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     bcounting<span class="uscript-operator">=</span><span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
     bprimed<span class="uscript-operator">=</span><span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 
 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">1</span><span class="uscript-operator">)</span>
     child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_one<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">2</span><span class="uscript-operator">)</span>
    child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_two<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>VocalCounter <span class="uscript-operator">==</span> <span class="uscript-number">3</span><span class="uscript-operator">)</span>
    child<span class="uscript-operator">.</span>playsound<span class="uscript-operator">(</span>Voc_three<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>vocalcounter <span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span>
    SetTimer <span class="uscript-operator">(</span><span class="uscript-number">1</span><span class="uscript-operator">,</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

<span class="uscript-operator">}</span>

<span class="uscript-keyword">Simulated</span> <span class="uscript-keyword">function</span>  VecBoost<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">local</span> Vector PointBoostForce<span class="uscript-operator">;</span>
 boosts <span class="uscript-operator">-=</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bDirectional <span class="uscript-operator">==</span> <span class="uscript-keyword">True</span><span class="uscript-operator">)</span>
     RotRelation  <span class="uscript-operator">=</span> child<span class="uscript-operator">;</span>

  <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>child<span class="uscript-operator">.</span>driver <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span>  <span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span> child<span class="uscript-operator">.</span>IsHumanControlled<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">==</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       ONSVehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>

 child<span class="uscript-operator">.</span>KAddImpulse<span class="uscript-operator">(</span> ActualBoostForce <span class="uscript-operator">&gt;&gt;</span> RotRelation<span class="uscript-operator">.</span>Rotation<span class="uscript-operator">,</span> PointBoostForce <span class="uscript-operator">&gt;&gt;</span> RotRelation<span class="uscript-operator">.</span>Rotation <span class="uscript-operator">)</span> <span class="uscript-operator">;</span>
 bPrimed   <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
 bBoosting <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>TagfxClass<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     spawnedtagFX<span class="uscript-operator">=</span>spawn<span class="uscript-operator">(</span>TagfxClass<span class="uscript-operator">,</span>child<span class="uscript-operator">,</span><span class="uscript-operator">,</span>child<span class="uscript-operator">.</span>location<span class="uscript-operator">,</span>child<span class="uscript-operator">.</span>rotation<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>spawnedtagFX <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
         spawnedtagFX<span class="uscript-operator">.</span>setbase<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>

 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>child<span class="uscript-operator">.</span>driver <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span>  <span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span> child<span class="uscript-operator">.</span>IsHumanControlled<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">==</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
     settimer<span class="uscript-operator">(</span>BotCaptureTime<span class="uscript-operator">,</span><span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> VehicleSpawned<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bUseBoostvec<span class="uscript-operator">==</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     boosts <span class="uscript-operator">=</span> <span class="uscript-number">1</span><span class="uscript-operator">;</span>
     boosts <span class="uscript-operator">+=</span> RepeatBoosts<span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehicleSpawned<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> Tick<span class="uscript-operator">(</span><span class="uscript-type">float</span> deltatime<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> child <span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bBoosting<span class="uscript-operator">)</span>  <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>vocalcounter<span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>Voc_Booster<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       vocalcountdown<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>child<span class="uscript-operator">.</span>Driver <span class="uscript-operator">==</span> <span class="uscript-keyword">none</span> <span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>currentdriver<span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        lastdriver    <span class="uscript-operator">=</span> currentdriver<span class="uscript-operator">;</span>
        currentdriver <span class="uscript-operator">=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bPrimed <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
            bPrimed <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>

        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bboosting <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
           <span class="uscript-operator">{</span>
            bboosting <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> spawnedtagfx<span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
                 spawnedtagFX<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
           <span class="uscript-operator">}</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bBoosting<span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>onsvehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bVehicleOnGround<span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        bBoosting <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> spawnedtagfx<span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
            spawnedtagFX<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>onsvehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
           onsvehicle<span class="uscript-operator">(</span>child<span class="uscript-operator">)</span><span class="uscript-operator">.</span>bDriverCannotLeaveVehicle <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
      <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>
<span class="uscript-keyword">super</span><span class="uscript-operator">.</span>tick<span class="uscript-operator">(</span>deltatime<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> vehicledestroyed<span class="uscript-operator">(</span>Vehicle V<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 lastdriver    <span class="uscript-operator">=</span> currentdriver<span class="uscript-operator">;</span>
 currentdriver <span class="uscript-operator">=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
 bboosting     <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
 bPrimed       <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>spawnedtagfx <span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
     spawnedtagFX<span class="uscript-operator">.</span>Destroy<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehicleDestroyed<span class="uscript-operator">(</span>v<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">event</span> VehicleUnPossessed<span class="uscript-operator">(</span> Vehicle V <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 lastdriver    <span class="uscript-operator">=</span> currentdriver<span class="uscript-operator">;</span>
 currentdriver <span class="uscript-operator">=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> bBoosting <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
     bBoosting <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>spawnedtagFX<span class="uscript-operator">!=</span> <span class="uscript-keyword">none</span><span class="uscript-operator">)</span>
         spawnedtagFX<span class="uscript-operator">.</span>Destroyed<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

     <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>bBoostsEmptyVecs <span class="uscript-operator">!=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span>  <span class="uscript-operator">(</span>vocalcounter <span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
         vocalcounter <span class="uscript-operator">=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
     <span class="uscript-operator">}</span>
 <span class="uscript-keyword">else</span>
 <span class="uscript-keyword">if</span>  <span class="uscript-operator">(</span><span class="uscript-operator">(</span> bPrimed <span class="uscript-operator">==</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span><span class="uscript-operator">(</span> bBoostsEmptyVecs <span class="uscript-operator">!=</span> <span class="uscript-keyword">true</span> <span class="uscript-operator">)</span><span class="uscript-operator">)</span>
     <span class="uscript-operator">{</span>
     bprimed <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
     <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> VocalCounter <span class="uscript-operator">&gt;</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span>
         VocalCounter <span class="uscript-operator">=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">;</span>
     <span class="uscript-operator">}</span>
<span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehicleUnPossessed<span class="uscript-operator">(</span>V<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">event</span> VehiclePossessed<span class="uscript-operator">(</span> Vehicle V <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
 currentdriver<span class="uscript-operator">=</span>v<span class="uscript-operator">.</span>Driver<span class="uscript-operator">;</span>
 <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span><span class="uscript-operator">(</span>bUseBoostvec<span class="uscript-operator">==</span><span class="uscript-keyword">true</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>boosts <span class="uscript-operator">!=</span> <span class="uscript-operator">-</span><span class="uscript-number">1</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span><span class="uscript-operator">&amp;&amp;</span> <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>voc_booster<span class="uscript-operator">!=</span><span class="uscript-keyword">none</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
    VocalCounter<span class="uscript-operator">=</span><span class="uscript-number">4</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">(</span>voc_booster <span class="uscript-operator">!=</span><span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>boostdelay <span class="uscript-operator">&gt;</span><span class="uscript-number">3</span><span class="uscript-operator">)</span><span class="uscript-operator">)</span>
       <span class="uscript-operator">{</span>
        boostdelay<span class="uscript-operator">-=</span><span class="uscript-number">3</span><span class="uscript-operator">;</span>
        bCounting <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
     bPrimed<span class="uscript-operator">=</span><span class="uscript-keyword">True</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
 <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>VehiclePossessed<span class="uscript-operator">(</span>V<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><pre class="paraverbatim"> </pre><h3><a name="0.0.12"></a>RelatedTopics</h3>
<ul><li><a href="vitaloverdose-sfx-painful.html">VitalOverdose/SFX Painful</a></li>
<li><a href="vitaloverdose-sfx-vectelepo.html">VitalOverdose/SFX VecTeleporting</a></li>
<li><a href="vitaloverdose-sfx-pawntelep.html">VitalOverdose/SFX PawnTeleporting</a></li>
<li><a href="vitaloverdose-sfx-triggerin.html">VitalOverdose/SFX Triggering</a></li>
<li><a href="vitaloverdose-sfx-boosting.html">VitalOverdose/SFX Boosting</a></li>
<li>SFX_MonsterSpawning<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=SFX_MonsterSpawning&referrerid=VitalOverdose/BoostingVehicleFactory">?</a></li>
<li>SFX_Healing<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=SFX_Healing&referrerid=VitalOverdose/BoostingVehicleFactory">?</a></li>
<li><a href="vitaloverdose-inventoryflar.html">VitalOverdose/InventoryFlare</a></li>
<li><a href="vitaloverdose-quickvecspawn.html">VitalOverdose/QuickVecSpawner</a></li>
</ul>
<pre class="paraverbatim"> 
 </pre><h3><a name="0.0.13"></a>Discussion</h3>
<pre class="paraverbatim"> </pre><p><a href="category-custom-class.html">Category Custom Class</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Overview", "#0.0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Internal Variables (not available to the mapper).", "#0.0.1.1");
menuItemAdd("function PostBeginPlay()", "#0.0.2");
menuItemAdd("function Timer()", "#0.0.3");
menuItemAdd("function VocalCountdown()", "#0.0.4");
menuItemAdd("Simulated function VecBoost()", "#0.0.5");
menuItemAdd("Function VehicleSpawned()", "#0.0.6");
menuItemAdd("function Tick(float deltatime)", "#0.0.7");
menuItemAdd("function vehicledestroyed(Vehicle V)", "#0.0.8");
menuItemAdd("Event VehicleUnPossessed( Vehicle V )", "#0.0.9");
menuItemAdd("Event VehiclePossessed( Vehicle V )", "#0.0.10");
menuItemAdd("The Completed Script", "#0.0.11");
menuItemAdd("RelatedTopics", "#0.0.12");
menuItemAdd("Discussion", "#0.0.13");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="../index.html">Home Page</a> | <a href="vitaloverdose.html">VitalOverdose</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited June 15, 2006 14:16 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=VitalOverdose/BoostingVehicleFactory">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/VitalOverdose/BoostingVehicleFactory">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>There is no spoon
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
