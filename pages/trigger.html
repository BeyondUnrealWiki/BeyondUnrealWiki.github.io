<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Trigger</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Trigger; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Trigger">Trigger</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut.png"> <a href="unreal-tournament.html">UT</a> :: <a href="actor-ut.html">Actor (UT)</a> &gt;&gt; <a href="triggers-ut.html">Triggers (UT)</a> &gt;&gt; Trigger (Package: Engine)<br></div>
<div class="classpath"><img src="shared//gameicons/icon-ut2003.png"> <a href="unreal-tournament-2003.html">UT2003</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="triggers-ut2003.html">Triggers (UT2003)</a> &gt;&gt; Trigger (Package: Engine)<br></div>
<div class="classpath"><img src="shared//gameicons/icon-ut2004.png"> <a href="unreal-tournament-2004.html">UT2004</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="triggers-ut2004.html">Triggers (UT2004)</a> &gt;&gt; Trigger (Package: Engine)<br></div>
<p class="indent1"><em class="em1">Verb Definition:</em> see <a href="triggered.html">Triggered</a></p>
<p>When a Trigger is touched by a valid object, usually a Player or some other type of <a href="pawn.html">Pawn</a>, it causes a certain event to be initiated.  However, if a Trigger is listening for an event and detects it, then it is turned on or off according to its state and whether it was on or off to begin with.</p>
<p>The event that a Trigger calls is Events &rarr; Event and the event it listens for is Events &rarr; Tag, both under the Events section of the properties. The  <a href="event.html">Event</a> page explains this in more depth.</p>
<p>Even though this is a very simple thing for an actor to do, there are many variables that are used to alter the way this is done.</p>
<h2><a name="0.1"></a>Tips</h2>
<p>To see where triggers are so you can easily test them in game, change their Lighting properties so they cast a small circle of light: set LightType, LightRadius and LightBrightness. See <a href="actor-ut-lighting.html">Actor (UT)/Lighting</a> for more info on these properties. Alternatively, you can set Advanced &rarr; bHidden to false, this will display the trigger icon from UEd ingame.</p>
<h2><a name="0.2"></a>Properties</h2>
<dl><dt>bool bInitiallyActive</dt><dd>This variable determines whether the trigger is on or off when the level starts. A Trigger can be put to sleep or woken up by being triggered itself: see the States section below.</dd><dt>bool bTriggerOnceOnly</dt><dd>If this variable is set to True, then the trigger will function once. If it is set to False, then the Trigger will work over and over again, as long as the Trigger is left active.<br>Wild guess: if this is set to true, it can't be subsequently woken up by triggering. I'm guessing the script just send it to the None state  &mdash;<a href="tarquin.html">Tarquin</a> </dd><dt>ETriggerType TriggerType</dt><dd>The content of this variable is used to determine exactly what kind of actors are relevant, i.e. what actors will make this Trigger work when they touch it.  This is an enumerator, and here are its choices:<table class="paratable" border=0 cellspacing=0 cellpadding=0><tr valign=top><td><em class="em2">TT_PlayerProximity</em></td>
<td>This trigger can only be set off by a <a href="playerpawn.html">PlayerPawn</a>.</td>
</tr>
<tr valign=top><td><em class="em2">TT_PawnProximity</em></td>
<td>This trigger can be set off by any type of <a href="pawn-ut.html">Pawn (UT)</a>.</td>
</tr>
<tr valign=top><td><em class="em2">TT_ClassProximity</em></td>
<td>This trigger can only be set off by Actors of a certain class or Actors of a class below this one.  (So if you make a Trigger that only a Nali can set off, then a Nali Priest will also be able to set it off.)  The class that is capable of setting off this trigger is defined in the <tt>ClassProximityType</tt> variable.</td>
</tr>
<tr valign=top><td><em class="em2">TT_AnyProximity</em></td>
<td>This trigger can be set off by pretty much anything touching it other than the world geometry.  Use caution when selecting this option.</td>
</tr>
<tr valign=top><td><em class="em2">TT_Shoot</em></td>
<td>This trigger is set off by being shot and damaged.  To be successfully set off, the Trigger must sustain at least as much damage as is specified in the <tt>DamageThreshold</tt> variable.</td>
</tr>
<tr valign=top><td><em class="em2">TT_HumanPlayerProximity</em> (only UT2003/4)</td>
<td>Trigger activated by human player (not bot)</td>
</tr>
<tr valign=top><td><em class="em2">TT_LivePlayerProximity</em> (only UT2004)</td>
<td>Trigger only activated by live player, untriggered if player dies while touching</td>
</tr>
</table>
</dd><dt>class&lt;<a href="actor.html">Actor</a>&gt; ClassProximityType</dt><dd>This property determines what classes are capable of setting off this Trigger.  It is only relevant if the <tt>TriggerType</tt> variable is set to <em class="em2">TT_ClassProximity</em>.</dd><dt>float DamageThreshold</dt><dd>This property determines how much damage is necessary to successfully set off.  It is only relevant if the <tt>TriggerType</tt> variable is set to <em class="em2">TT_Shoot</em>.</dd><dt>float ReTriggerDelay</dt><dd>After each time the Trigger is successfuly activated, it is prevented from doing so again until this length of time has elapsed.  This property doesn't interfere with RepeatTriggerTime, since it is dependant on the Trigger being deactivated (or UnTriggered).</dd><dt>float RepeatTriggerTime</dt><dd>This property is inactive if set to 0. If the actor setting off the Trigger remains within the Trigger's proximity, then the Trigger will be set off over and over again at this interval until the actor leaves the Trigger's proximity.  <em class="em2">SuperApe:</em> I've noticed that Triggers will indeed repeat (only a couple times) even if this property is zero.</dd><dt>string Message (localized)</dt><dd>If a Player is the reason that a Trigger is successfully set off, either because the player touched the Trigger or shot it, then this message will be sent to that player through his console. The message is displayed in the same place as incoming talk messages. If you want to use a trigger to display a bigger message, you'll need to make a subclass of <a href="trigger.html">Trigger</a> which, instead of using that dinky Message text, have the player receive a <a href="localmessage.html">LocalMessage</a> containing your text. They could all be stored in MyLevel to eliminate the need for an additional package.</dd></dl>
<h3><a name="0.2.1"></a>CollisionHeight and CollisionRadius</h3>
<p>These properties (under the Collision grouping) determine the size of the Trigger's <a href="collision-cylinder.html">collision cylinder</a>.</p>
<p>Even though all <a href="actor.html">Actor</a>s have these variables in their <a href="actor-ut-collision.html">Collision</a> properties, it is important to remember that they can be adjusted by the mapper to allow for different dimensions where collision should be checked.  This is useful so that a mapper can use a single Trigger to cover a large area, or to cover an area that requires pinpoint accuracy from a player.</p>
<p>In UnrealEngine2 and later, you can also use static meshes for triggers. In this instance, the static meshes collision properties will be used instead of the cylindrical collision height and radius.</p>
<p><em class="em2">Foxpaw:</em> Can someone with UT2004 check to see if the same holds true for meshes (skeletal/vertex animated) with special collision hulls as well?</p>
<h3><a name="0.2.2"></a>bHidden</h3>
<p>If you want to make the trigger up while playing, for example, if you made a fancy arrow for it to tell the player where to shoot, you cannot simply set bHidden to false.  In the code, it is made to set its DrawType to None which means whenever you load up a level with your trigger in it, it will never show up.</p>
<h2><a name="0.3"></a>States</h2>
<p>The Object &rarr; <a href="initialstate.html">InitialState</a> property contains a list of states that are made available to mappers.</p>
<p>The Trigger class does not switch states during gameplay. The different states determine how the trigger behaves when it is itself triggered (by another Trigger, for example). These allow the Trigger to be woken up or put to sleep.</p>
<dl><dt>None</dt><dd>The Trigger is in a permanently inactive state.  The None state exists for all actors, otherwise it would not be here. Ignore this state. (Actually, doesn't this behave the same as NormalTrigger?)</dd><dt>NormalTrigger</dt><dd>The Trigger is permanently active and can't be turned off.</dd><dt>OtherTriggerTurnsOff</dt><dd>If the Trigger itself is triggered, then it will be permanently deactivated. Note that bInitiallyActive must be set to true, otherwise the trigger will be off and will stay off when triggered.</dd><dt>OtherTriggerTurnsOn</dt><dd>If the Trigger itself is triggered, then it will be permanently activated. Again if bInitiallyActive is true then it will be on already when triggered.</dd><dt>OtherTriggerToggles</dt><dd>If the Trigger itself is triggered, it will be turned off if it was on, and vice versa. This is repeatable.</dd></dl>
<h2><a name="0.4"></a>Known subclasses in UT</h2>
<ul><li><a href="dispatcher.html">Dispatcher</a></li>
<li><a href="teamtrigger.html">TeamTrigger</a></li>
<li><a href="timedtrigger-ut.html">TimedTrigger (UT)</a></li>
<li><a href="zonetrigger.html">ZoneTrigger</a></li>
<li><a href="sustaineddamagetrigger.html">SustainedDamageTrigger</a> (custom)</li>
</ul>
<h2><a name="0.5"></a>Known Subclasses in UT200x</h2>
<ul><li><a href="teamtrigger.html">TeamTrigger</a></li>
<li><a href="zonetrigger.html">ZoneTrigger</a></li>
<li><a href="randomtrigger.html">RandomTrigger</a> (custom)</li>
<li><a href="rotationaltriggering.html">RotationalTriggering</a> (custom)</li>
<li><a href="combotrigger.html">ComboTrigger</a> (custom)</li>
</ul>
<h2><a name="0.6"></a>Related Topics</h2>
<ul><li><a href="dynamics.html">Dynamics</a> - Main topic page for triggers &amp; sounds.</li>
<li><a href="types-of-trigger.html">Types of Trigger</a> - Summary of trigger types.</li>
<li><a href="trigger-systems.html">Trigger Systems</a> - Examples and concepts on complex systems using triggers and triggerable actors.</li>
</ul>
<h2><a name="0.7"></a>Discussion</h2>
<p><em class="em2">Legal:</em> Quick Q: How do I make one ElevatorTrigger to trigger <em class="em2">2</em> events? I need them both to be triggered in the Event&gt; Event... <img alt=":(" src="emoticons/sad.gif" align="middle"></p>
<p><em class="em2">Tarquin:</em> Trigger a <a href="dispatcher.html">Dispatcher</a>. And have you edited this page text in MS Word? some ' characters have been turned into Evil Entities <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">Legal:</em> Nope, sorry, wish I had <img alt=";)" src="emoticons/wink.gif" align="middle"> Anyway, the problem is that I have to trigger an ElevatorTrigger with an ElevatorTrigger... <img alt=":/" src="emoticons/hmm.gif" align="middle"> But it doesn't work with a Dispatcher. So, I have to either A; Trigger 2 events with one ElevatorTrigger, or B; Find a workaround.</p>
<p>The workaround I have is to add an attachmover to move the first ElevatorTriggers away, but I'd like to avoid more movers.</p>
<p><em class="em2">Tarquin:</em> Ah. Hm. Move this discussion to <a href="elevatortrigger.html">ElevatorTrigger</a>. I think the on ly thing to do is subclass &amp; rewrite the bad code</p>
<p><em class="em2">Tarquin:</em> WHy can't both the ElevatorMovers have the same Tag? If not, subclass and put:</p>
<pre class="uscript"><span class="uscript-keyword">var</span><span class="uscript-operator">(</span>Events<span class="uscript-operator">)</span> AuxEvent<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> Touch<span class="uscript-operator">(</span> actor Other <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> ElevatorMover EM<span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> IsRelevant<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        <span class="uscript-comment">// Call the ElevatorMover's Move function</span>
        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> AuxEvent <span class="uscript-operator">!=</span> <span class="uscript-name">''</span> <span class="uscript-operator">)</span>
            <span class="uscript-keyword">foreach</span> AllActors<span class="uscript-operator">(</span> <span class="uscript-keyword">class</span> <span class="uscript-name">'ElevatorMover'</span><span class="uscript-operator">,</span> EM<span class="uscript-operator">,</span> AuxEvent<span class="uscript-operator">)</span>
                EM<span class="uscript-operator">.</span>MoveKeyframe<span class="uscript-operator">(</span> GotoKeyFrame<span class="uscript-operator">,</span> MoveTime <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

        <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> bTriggerOnceOnly <span class="uscript-operator">)</span>
            <span class="uscript-comment">// Ignore future touches.</span>
            SetCollision<span class="uscript-operator">(</span><span class="uscript-keyword">False</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    <span class="uscript-keyword">super</span><span class="uscript-operator">.</span>Touch<span class="uscript-operator">(</span> Other <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span></pre><p><em class="em2">Legal:</em> Sorry, can't move now, tomorrow. Anyway, thanks for the code, now how do I add this mover? (The command line) I need it to make a door be opened from one side, but still I need to blow it from any side. It all works, or it should, I think. In a hurry, bye.</p>
<p><em class="em2">Tarquin:</em> that's an ElevatorTrigger subclass ....</p>
<p><em class="em2">MythOpus:</em> Trigger Type Shoot doesn't seem to work for me at all anymore :S</p>
<p><em class="em2">Dr.AwkwArD:</em> do we really want to do double duty like this?  UT and UT2003 info on the same page?  If so (which I'm not sure I support), we must be extremely clear about which info is universal (and through which engine/game).  Frankly, I'd like to see this page broken into separate pages under the umbrellas UT and UT2003 for their respective class info &ndash; even if some/much of the info will be redundant. </p>
<p><em class="em2">Tarquin:</em> Are there any differences in the properties? I thought they were identical</p>
<p><em class="em2">Wormbo:</em> There's nothing wrong with keeping them on the same page. UT2003 and UT2004 only add an item to the ETriggerType enum.</p>
<p><em class="em2">SuperApe:</em> I agree with Wormbo.  There may have been big differences in code between UT and 2k3 (I really can't say), but 2k4 simply appends some code (and changes very little exhisting code).  With that in mind, that's why I began to speak up on the <a href="triggers.html">Triggers</a> page, but I didn't elaborate; my bad.  Without large changes in the engine, I would kinda hope the 2k3 structure we had would remain the way it was.  Not only do other pages on the Wiki refer to wiki pages by Title, but links off-site do too.  Btw, I have begun a short (short) thread on a Forum listing the missing or disabled things in 2k4 from 2k3.  That might be worth listing on the Wiki somewhere.  <a href="http://forums.unrealplayground.com/showthread.php?t=20357">[Differences between 2k3 and 2k4.]</a></p>
<p><em class="em2">Shuggyboy:</em> I want a mover(lift) to be called to the upper level when a player/bot approaches the edge. at the moment the lifts remain at the ground level and its a long way down. I have tried looking through the trigger and mover tutorials but cant seem to find the correct way to implement changing the keynum on the mover from 0 to 1 when the player/bot approaches. Any ideas?</p>
<p><em class="em2">Foogod:</em> What you will probably need to do is set the mover's Object&rarr;InitialState to TriggerOpenTimed, and then create a trigger at the top to trigger it to move when the player comes close enough.  Note, however, that this means that it won't move by default anymore when somebody stands on it at the bottom.  If you want it to do that too, you will need to set a trigger which detects somebody standing on it at the bottom as well.  Depending on your architecture, you may be able to set the collision area so that the same trigger covers the right areas at both the bottom and the top of the lift, which would be ideal (using Collision&rarr;bUseCylinderCollision).  If you can't do that, you will probably need to do some fiddling with things so that the bottom trigger doesn't make the lift move again when the person riding it is travelling down and gets to the bottom (otherwise it'll just keep bouncing).  The best way to do this is probably to make the bottom-trigger active only when the lift is at the bottom (by making the lift's MoverEvent&rarr;OpeningEvent and MoverEvent&rarr;ClosedEvent turn the trigger off and on).  Alternately, you might also be able to just make the bottom-trigger move with the lift (see <a href="attaching-actors.html">Attaching Actors</a>).</p>
<p><em class="em2">SuperApe:</em> This page needs a proper subclass tree, once it's made into a proper class page.</p>
<p><em class="em2">SuperApe:</em> I am trying to use a Trigger set to ClassProximity and ProximityClassType set to 'Monster'.  For some reason, this is not working properly.  It does not detect this xPawn subclass.  I don't have the code in front of me atm, but earlier I remembered seeing specific checks within a ClassProximity setting to see if Pawns are Player controlled or something like that.  Anyone else seeing this problem?  Anyone see the cause, a solution or workaround?</p>
<p><em class="em2">SuperApe:</em> Update to previously mentioned problem: Monsters are considered Players by the code in this class because of the bIsPlayer boolean in MonsterController.  They have been set like this simply to allow Monsters to ride lifts when standing on them.</p>
<p><em class="em2">VerteX</em> Hey Super Ape, if u need it to trigger 2 events, just set the elevator's event to trigger a scripted trigger that triggers thou other two events. wouldn't that work?</p>
<p><em class="em2">SuperApe:</em> I think it would, but I didn't have that problem. <img alt=":p" src="emoticons/tongue.gif" align="middle">  Not sure who's problem you're addressing.</p>
<hr class="thin"><p><a href="category-class-ut.html">Category Class (UT)</a></p>
<p><a href="category-class-ut2003.html">Category Class (UT2003)</a></p>
<p><a href="category-class-ut2004.html">Category Class (UT2004)</a></p>
<p><a href="category-to-do.html">Category To Do</a></p>
<p><a href="refactor-me.html">Refactor Me</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Tips", "#0.1");
menuItemAdd("Properties", "#0.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>CollisionHeight and CollisionRadius", "#0.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>bHidden", "#0.2.2");
menuItemAdd("States", "#0.3");
menuItemAdd("Known subclasses in UT", "#0.4");
menuItemAdd("Known Subclasses in UT200x", "#0.5");
menuItemAdd("Related Topics", "#0.6");
menuItemAdd("Discussion", "#0.7");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited May 10, 2007 8:24 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Trigger">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Trigger">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>I'm a doctor, not a mechanic
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
