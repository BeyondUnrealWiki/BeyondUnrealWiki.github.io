<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Bulldog</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Bulldog; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Bulldog">Bulldog</a></h1>
	<div class="wiki"><div class="classpath"><img src="shared//gameicons/icon-ut2003.png"> <a href="unreal-tournament-2003.html">UT2003</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="pawn.html">Pawn</a> &gt;&gt; <a href="kvehicle.html">KVehicle</a> &gt;&gt; <a href="kcar.html">KCar</a> &gt;&gt; Bulldog (Package: Vehicles)<br><img src="shared//gameicons/icon-ut2004.png"> <a href="unreal-tournament-2004.html">UT2004</a> :: <a href="actor.html">Actor</a> &gt;&gt; <a href="pawn.html">Pawn</a> &gt;&gt; <a href="vehicle.html">Vehicle</a> &gt;&gt; <a href="kvehicle.html">KVehicle</a> &gt;&gt; <a href="kcar.html">KCar</a> &gt;&gt; Bulldog (Package: Vehicles)<br></div>
<p>This is the first vehicle included with an Unreal gametype.  It was introduced in UT2003, but was only available as a test map, "VehicleDemo".  This is a Karma based vehicle (KVehicle).  It is equipped with a homing rocket launcher.</p>
<p><em class="em2">Note:</em> As the bulldog is not an <a href="onsvehicle.html">ONSVehicle</a> or <a href="asvehicle.html">ASVehicle</a> class, the UT2004 version does not contain the proper code to navigate.  While you are able to spawn a Bulldog from other Vehicle Factories and enter it, players will be unable to drive it or fire its weapon without custom modification.  See <em class="em2">UT2004 Bulldog Fix</em> below.</p>
<h2><a name="0.1"></a>Properties</h2>
<h3><a name="0.1.1"></a>Main</h3>
<dl><dt>float FireInterval</dt><dd></dd><dt>float TargettingInterval</dt><dd></dd><dt>vector RocketFireOffset</dt><dd>Position (car ref frame) that rockets are launched from.</dd><dt>float TargettingRange</dt><dd></dd><dt>Material TargetMaterial</dt><dd></dd><dt>vector HeadlightCoronaOffset[8]</dt><dd></dd><dt>float TriggerSpeedThresh</dt><dd>Maximum speed at which you can get in the vehicle.</dd></dl>
<h4><a name="0.1.1.1"></a>Wheel Slip and Dust</h4>
<dl><dt>float	DustSlipRate</dt><dd>Ratio between dust kicked up and amount wheels are slipping.</dd><dt>float DustSlipThresh</dt><dd></dd></dl>
<h4><a name="0.1.1.2"></a>Bulldog Sounds</h4>
<dl><dt>float EnginePitchScale</dt><dd></dd><dt>sound BulldogStartSound</dt><dd></dd><dt>sound BulldogIdleSound</dt><dd></dd><dt>float HitSoundThreshold</dt><dd></dd><dt>sound BulldogSquealSound</dt><dd></dd><dt>float SquealVelThresh</dt><dd></dd><dt>sound BulldogHitSound</dt><dd></dd></dl>
<h4><a name="0.1.1.3"></a>Bulldog Forces</h4>
<dl><dt>string BulldogStartForce</dt><dd></dd><dt>string BulldogIdleForce</dt><dd></dd><dt>string BulldogSquealForce</dt><dd></dd><dt>string BulldogHitForce</dt><dd></dd></dl>
<h4><a name="0.1.1.4"></a>Destroyed Bulldog</h4>
<dl><dt>class&lt;Actor&gt; DestroyedEffect</dt><dd></dd><dt>sound DestroyedSound</dt><dd></dd></dl>
<h3><a name="0.1.2"></a>Hidden</h3>
<dl><dt>float	UntilNextImpact</dt><dd>Used to prevent triggering sounds continuously.</dd><dt>float	DustDrop</dt><dd>Distance below centre of tire to place dust.</dd></dl>
<h4><a name="0.1.2.1"></a>Bulldog Triggers</h4>
<dl><dt>vector FrontTriggerOffset (const)</dt><dd></dd><dt>BulldogTrigger FLTrigger</dt><dd></dd><dt>BulldogTrigger FRTrigger</dt><dd></dd><dt>BulldogTrigger FlipTrigger</dt><dd></dd><dt>bool TriggerState</dt><dd>true for on, false for off.</dd><dt>bool FlipTriggerState</dt><dd></dd></dl>
<h4><a name="0.1.2.2"></a>Headlight Projector</h4>
<dl><dt>vector HeadlightOffset (const)</dt><dd></dd><dt>BulldogHeadlight Headlight</dt><dd></dd><dt>bool HeadlightOn</dt><dd></dd></dl>
<h4><a name="0.1.2.3"></a>Light Materials</h4>
<dl><dt>Material ReverseMaterial</dt><dd></dd><dt>Material BrakeMaterial</dt><dd></dd><dt>Material TailOffMaterial</dt><dd></dd><dt>Material HeadlightOnMaterial</dt><dd></dd><dt>Material HeadlightOffMaterial</dt><dd></dd><dt>BulldogHeadlightCorona HeadlightCorona[8]</dt><dd></dd></dl>
<h4><a name="0.1.2.4"></a>Wheel Dirt Emitter</h4>
<dl><dt>BulldogDust Dust[4]</dt><dd><em class="em1">FL, FR, RL, RR</em></dd></dl>
<h4><a name="0.1.2.5"></a>Weapon</h4>
<dl><dt>float FireCountdown</dt><dd></dd><dt>float SinceLastTargetting</dt><dd></dd><dt><a href="pawn.html">Pawn</a> CurrentTarget</dt><dd></dd></dl>
<h2><a name="0.2"></a>Functions</h2>
<p>(incomplete)</p>
<h2><a name="0.3"></a>Events</h2>
<h2><a name="0.4"></a>UT2004 Bulldog Fix</h2>
<p>The Bulldog in UT2004 is broken for a number of reasons; in part due to a move of KVehicle from a subclass of Pawn to a subclass of Vehicle, but also due to other changes that enable Vehicle support in UT2004.</p>
<h3><a name="0.4.1"></a>Source Code</h3>
<p>To fix it, you'll need to <a href="create-a-subclass.html">Create A Subclass</a> of the Bulldog, ModifiedBulldog, and use this custom code.  For a tutorial on using custom code, see <a href="mapping-hello-world.html">Mapping Hello World</a>.  (<em class="em2">Note:</em> If you use the Script Editor to compile this code, omit the <em class="em1">defaultProperties</em> block and set those manually for each class.)</p>
<pre class="uscript"><span class="uscript-comment">//=============================================================================</span>
<span class="uscript-comment">// ModifiedBulldog.</span>
<span class="uscript-comment">// Uses Vehicle.KDriverEnter() instead of KVehicle.KDriverEnter(), etc.</span>
<span class="uscript-comment">// by SuperApe -- Dec 2005</span>
<span class="uscript-comment">//=============================================================================</span>
<span class="uscript-keyword">class</span> ModifiedBulldog <span class="uscript-keyword">extends</span> Bulldog
    <span class="uscript-keyword">placeable</span><span class="uscript-operator">;</span>

<span class="uscript-keyword">var</span><span class="uscript-operator">(</span>Bulldog<span class="uscript-operator">)</span> sound     BulldogShutDownSound<span class="uscript-operator">;</span>

<span class="uscript-keyword">function</span> Timer<span class="uscript-operator">(</span><span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-comment">// Finished start sound</span>
    AmbientSound <span class="uscript-operator">=</span> BulldogIdleSound<span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> KDriverEnter<span class="uscript-operator">(</span> Pawn P <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> Controller C<span class="uscript-operator">;</span>


    AmbientSound <span class="uscript-operator">=</span> BulldogStartSound<span class="uscript-operator">;</span>
    SetTimer<span class="uscript-operator">(</span> <span class="uscript-number">1.0</span><span class="uscript-operator">,</span> <span class="uscript-keyword">false</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    bDriving <span class="uscript-operator">=</span> <span class="uscript-keyword">True</span><span class="uscript-operator">;</span>
    StuckCount <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// We don't have pre-defined exit positions here, so we use the original player location as an exit point</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">!</span>bRelativeExitPos <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        PlayerEnterredRotation <span class="uscript-operator">=</span> P<span class="uscript-operator">.</span>Rotation<span class="uscript-operator">;</span>
        ExitPositions<span class="uscript-operator">[</span><span class="uscript-number">0</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span>  P<span class="uscript-operator">.</span>Location <span class="uscript-operator">+</span> <span class="uscript-keyword">Vect</span><span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">0</span><span class="uscript-operator">,</span><span class="uscript-number">16</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>

    <span class="uscript-comment">// Set pawns current controller to control the vehicle pawn instead</span>
    C <span class="uscript-operator">=</span> P<span class="uscript-operator">.</span>Controller<span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">!</span>bCanCarryFlag <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span> C<span class="uscript-operator">.</span>PlayerReplicationInfo<span class="uscript-operator">.</span>HasFlag <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>  <span class="uscript-operator">)</span>
        P<span class="uscript-operator">.</span>DropFlag<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    Driver <span class="uscript-operator">=</span> P<span class="uscript-operator">;</span>
    Driver<span class="uscript-operator">.</span>StartDriving<span class="uscript-operator">(</span> <span class="uscript-keyword">Self</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Disconnect PlayerController from Driver and connect to SVehicle.</span>
    C<span class="uscript-operator">.</span>bVehicleTransition <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span> <span class="uscript-comment">// to keep Bots from doing Restart()</span>
    C<span class="uscript-operator">.</span>Unpossess<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    Driver<span class="uscript-operator">.</span>SetOwner<span class="uscript-operator">(</span> <span class="uscript-keyword">self</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span> <span class="uscript-comment">// This keeps the driver relevant.</span>
    C<span class="uscript-operator">.</span>Possess<span class="uscript-operator">(</span> <span class="uscript-keyword">self</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    C<span class="uscript-operator">.</span>bVehicleTransition <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>

    DrivingStatusChanged<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> PlayerController<span class="uscript-operator">(</span> C <span class="uscript-operator">)</span> <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
        VehicleLostTime <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>

    AttachFlag<span class="uscript-operator">(</span> PlayerReplicationInfo<span class="uscript-operator">.</span>HasFlag <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    Level<span class="uscript-operator">.</span>Game<span class="uscript-operator">.</span>DriverEnteredVehicle<span class="uscript-operator">(</span> <span class="uscript-keyword">self</span><span class="uscript-operator">,</span> P <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    ReceiveLocalizedMessage<span class="uscript-operator">(</span> <span class="uscript-keyword">class</span><span class="uscript-name">'Vehicles.BulldogMessage'</span><span class="uscript-operator">,</span> <span class="uscript-number">1</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">event</span> <span class="uscript-type">bool</span> KDriverLeave<span class="uscript-operator">(</span> <span class="uscript-type">bool</span> bForceLeave <span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">local</span> Controller C<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> PlayerController  PC<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> <span class="uscript-type">bool</span> havePlaced<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span> Pawn  OldDriver<span class="uscript-operator">;</span>
    <span class="uscript-keyword">local</span>   <span class="uscript-type">int</span>     i<span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span><span class="uscript-operator">(</span> <span class="uscript-operator">!</span>bForceLeave <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">!</span>Level<span class="uscript-operator">.</span>Game<span class="uscript-operator">.</span>CanLeaveVehicle<span class="uscript-operator">(</span><span class="uscript-keyword">self</span><span class="uscript-operator">,</span> Driver<span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
        <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">(</span>PlayerReplicationInfo <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>PlayerReplicationInfo<span class="uscript-operator">.</span>HasFlag <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
        Driver<span class="uscript-operator">.</span>HoldFlag<span class="uscript-operator">(</span>PlayerReplicationInfo<span class="uscript-operator">.</span>HasFlag<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Do nothing if we're not being driven</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>Controller <span class="uscript-operator">==</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
        <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Before we can exit, we need to find a place to put the driver.</span>
    <span class="uscript-comment">// Iterate over array of possible exit locations.</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">(</span>Driver <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span><span class="uscript-operator">!</span>bRemoteControlled <span class="uscript-operator">||</span> bHideRemoteDriver<span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        Driver<span class="uscript-operator">.</span>bHardAttach <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        Driver<span class="uscript-operator">.</span>bCollideWorld <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
        Driver<span class="uscript-operator">.</span>SetCollision<span class="uscript-operator">(</span><span class="uscript-keyword">true</span><span class="uscript-operator">,</span> <span class="uscript-keyword">true</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        havePlaced <span class="uscript-operator">=</span> PlaceExitingDriver<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

        <span class="uscript-comment">// If we could not find a place to put the driver, leave driver inside as before.</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span><span class="uscript-operator">!</span>havePlaced <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">!</span>bForceLeave <span class="uscript-operator">)</span>
        <span class="uscript-operator">{</span>
            Driver<span class="uscript-operator">.</span>bHardAttach <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
            Driver<span class="uscript-operator">.</span>bCollideWorld <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
            Driver<span class="uscript-operator">.</span>SetCollision<span class="uscript-operator">(</span><span class="uscript-keyword">false</span><span class="uscript-operator">,</span> <span class="uscript-keyword">false</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
            <span class="uscript-keyword">return</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
        <span class="uscript-operator">}</span>
    <span class="uscript-operator">}</span>

    bDriving <span class="uscript-operator">=</span> <span class="uscript-keyword">False</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Turn off bulldog headlights</span>
    Headlight<span class="uscript-operator">.</span>DetachProjector<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    Skins<span class="uscript-operator">[</span><span class="uscript-number">2</span><span class="uscript-operator">]</span> <span class="uscript-operator">=</span> HeadlightOffMaterial<span class="uscript-operator">;</span>
    <span class="uscript-keyword">for</span><span class="uscript-operator">(</span>i<span class="uscript-operator">=</span><span class="uscript-number">0</span><span class="uscript-operator">;</span> i<span class="uscript-operator">&lt;</span><span class="uscript-number">8</span><span class="uscript-operator">;</span> i<span class="uscript-operator">++</span><span class="uscript-operator">)</span>
        HeadlightCorona<span class="uscript-operator">[</span>i<span class="uscript-operator">]</span><span class="uscript-operator">.</span>bHidden <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Reconnect Controller to Driver.</span>
    C <span class="uscript-operator">=</span> Controller<span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>RouteGoal <span class="uscript-operator">==</span> <span class="uscript-keyword">self</span><span class="uscript-operator">)</span>
        C<span class="uscript-operator">.</span>RouteGoal <span class="uscript-operator">=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span>C<span class="uscript-operator">.</span>MoveTarget <span class="uscript-operator">==</span> <span class="uscript-keyword">self</span><span class="uscript-operator">)</span>
        C<span class="uscript-operator">.</span>MoveTarget <span class="uscript-operator">=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    C<span class="uscript-operator">.</span>bVehicleTransition <span class="uscript-operator">=</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
    Controller<span class="uscript-operator">.</span>UnPossess<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> <span class="uscript-operator">(</span>Driver <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">)</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-operator">(</span>Driver<span class="uscript-operator">.</span>Health <span class="uscript-operator">&gt;</span> <span class="uscript-number">0</span><span class="uscript-operator">)</span> <span class="uscript-operator">)</span>
    <span class="uscript-operator">{</span>
        Driver<span class="uscript-operator">.</span>SetOwner<span class="uscript-operator">(</span> C <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        C<span class="uscript-operator">.</span>Possess<span class="uscript-operator">(</span> Driver <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

        PC <span class="uscript-operator">=</span> PlayerController<span class="uscript-operator">(</span>C<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
        <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> PC <span class="uscript-operator">!=</span> <span class="uscript-keyword">None</span> <span class="uscript-operator">)</span>
            PC<span class="uscript-operator">.</span>ClientSetViewTarget<span class="uscript-operator">(</span> Driver <span class="uscript-operator">)</span><span class="uscript-operator">;</span> <span class="uscript-comment">// Set playercontroller to view the person that got out</span>

        Driver<span class="uscript-operator">.</span>StopDriving<span class="uscript-operator">(</span> <span class="uscript-keyword">Self</span> <span class="uscript-operator">)</span><span class="uscript-operator">;</span>
    <span class="uscript-operator">}</span>
    C<span class="uscript-operator">.</span>bVehicleTransition <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>

    <span class="uscript-keyword">if</span> <span class="uscript-operator">(</span> C <span class="uscript-operator">==</span> Controller <span class="uscript-operator">)</span>  <span class="uscript-comment">// If controller didn't change, clear it...</span>
        Controller <span class="uscript-operator">=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>

    Level<span class="uscript-operator">.</span>Game<span class="uscript-operator">.</span>DriverLeftVehicle<span class="uscript-operator">(</span><span class="uscript-keyword">self</span><span class="uscript-operator">,</span> Driver<span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Car now has no driver</span>
    OldDriver <span class="uscript-operator">=</span> Driver<span class="uscript-operator">;</span>
    Driver <span class="uscript-operator">=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>

    DriverLeft<span class="uscript-operator">(</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// Put brakes on before you get out :)</span>
    Throttle    <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
    Steering    <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>
    Rise        <span class="uscript-operator">=</span> <span class="uscript-number">0</span><span class="uscript-operator">;</span>

    PlaySound<span class="uscript-operator">(</span> BulldogShutDownSound<span class="uscript-operator">,</span> SLOT_Misc <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    <span class="uscript-comment">// If we succesfully got out of the car, make driver visible again.</span>
    OldDriver<span class="uscript-operator">.</span>bHidden <span class="uscript-operator">=</span> <span class="uscript-keyword">false</span><span class="uscript-operator">;</span>
    AmbientSound <span class="uscript-operator">=</span> <span class="uscript-keyword">None</span><span class="uscript-operator">;</span>
    <span class="uscript-keyword">return</span> <span class="uscript-keyword">true</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">function</span> TakeDamage<span class="uscript-operator">(</span><span class="uscript-type">int</span> Damage<span class="uscript-operator">,</span> Pawn InstigatedBy<span class="uscript-operator">,</span> Vector HitLocation<span class="uscript-operator">,</span>
                        Vector Momentum<span class="uscript-operator">,</span> <span class="uscript-keyword">class</span><span class="uscript-operator">&lt;</span>DamageType<span class="uscript-operator">&gt;</span> DamageType<span class="uscript-operator">)</span>
<span class="uscript-operator">{</span>
    <span class="uscript-keyword">Super</span><span class="uscript-operator">.</span>TakeDamage<span class="uscript-operator">(</span> Damage<span class="uscript-operator">,</span> InstigatedBy<span class="uscript-operator">,</span> HitLocation<span class="uscript-operator">,</span> Momentum<span class="uscript-operator">,</span> DamageType <span class="uscript-operator">)</span><span class="uscript-operator">;</span>

    KAddImpulse<span class="uscript-operator">(</span> Momentum<span class="uscript-operator">,</span> HitLocation<span class="uscript-operator">)</span><span class="uscript-operator">;</span>
<span class="uscript-operator">}</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
     DestroyedEffect<span class="uscript-operator">=</span><span class="uscript-keyword">Class</span><span class="uscript-name">'myLevel.DECO_DestroyedBulldog'</span>
     DestroyedSound<span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.Explosions.VehicleExplosion01'</span>
     BulldogShutDownSound<span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.PRV.PRVStop01'</span>
     BulldogStartSound<span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.PRV.PRVStart01'</span>
     BulldogIdleSound<span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.RV.RVEng01'</span>
     BulldogSquealSound<span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.PRV.DirtSkid03'</span>
     BulldogHitSound<span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.CollisionSounds.VehicleCollision04'</span>
     HornSounds<span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">=</span>Sound<span class="uscript-name">'ONSVehicleSounds-S.Horns.Horn03'</span>
     bDontPossess<span class="uscript-operator">=</span><span class="uscript-keyword">False</span>
     Begin Object <span class="uscript-keyword">Class</span><span class="uscript-operator">=</span>KarmaParamsRBFull <span class="uscript-type">Name</span><span class="uscript-operator">=</span>KarmaParamsRBFull1
         KInertiaTensor<span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">=</span><span class="uscript-number">20.000000</span>
         KInertiaTensor<span class="uscript-operator">(</span><span class="uscript-number">3</span><span class="uscript-operator">)</span><span class="uscript-operator">=</span><span class="uscript-number">30.000000</span>
         KInertiaTensor<span class="uscript-operator">(</span><span class="uscript-number">5</span><span class="uscript-operator">)</span><span class="uscript-operator">=</span><span class="uscript-number">48.000000</span>
         KCOMOffset<span class="uscript-operator">=</span><span class="uscript-operator">(</span>X<span class="uscript-operator">=</span><span class="uscript-number">0.800000</span><span class="uscript-operator">,</span>Z<span class="uscript-operator">=</span><span class="uscript-operator">-</span><span class="uscript-number">0.700000</span><span class="uscript-operator">)</span>
         KLinearDamping<span class="uscript-operator">=</span><span class="uscript-number">0.000000</span>
         KAngularDamping<span class="uscript-operator">=</span><span class="uscript-number">0.000000</span>
         KStartEnabled<span class="uscript-operator">=</span><span class="uscript-keyword">True</span>
         bHighDetailOnly<span class="uscript-operator">=</span><span class="uscript-keyword">False</span>
         bClientOnly<span class="uscript-operator">=</span><span class="uscript-keyword">False</span>
         bKDoubleTickRate<span class="uscript-operator">=</span><span class="uscript-keyword">True</span>
         KFriction<span class="uscript-operator">=</span><span class="uscript-number">1.600000</span>
     End Object
     KParams<span class="uscript-operator">=</span>KarmaParamsRBFull<span class="uscript-name">'myLevel.KarmaParamsRBFull1'</span>
<span class="uscript-operator">}</span></pre><p>This ModifiedBulldog uses a static mesh as a Destroyed Vehicle mesh.  It's a subclass of Decoration &rarr; DECO_Smashable.  Here's it's code:</p>
<pre class="uscript"><span class="uscript-comment">//=============================================================================</span>
<span class="uscript-comment">// DECO_DestroyedBulldog.</span>
<span class="uscript-comment">//=============================================================================</span>
<span class="uscript-keyword">class</span> DECO_DestroyedBulldog <span class="uscript-keyword">extends</span> DECO_Smashable
    <span class="uscript-keyword">placeable</span><span class="uscript-operator">;</span>

<span class="uscript-keyword">defaultproperties</span>
<span class="uscript-operator">{</span>
     EffectWhenDestroyed<span class="uscript-operator">=</span><span class="uscript-keyword">Class</span><span class="uscript-name">'XEffects.RocketExplosion'</span>
     Health<span class="uscript-operator">=</span><span class="uscript-number">100</span>
     DrawType<span class="uscript-operator">=</span>DT_StaticMesh
     StaticMesh<span class="uscript-operator">=</span>StaticMesh<span class="uscript-name">'BulldogMeshes.Simple.S_Chassis'</span>
     Physics<span class="uscript-operator">=</span>PHYS_Falling
     LifeSpan<span class="uscript-operator">=</span><span class="uscript-number">5.000000</span>
     DrawScale<span class="uscript-operator">=</span><span class="uscript-number">0.400000</span>
     Skins<span class="uscript-operator">(</span><span class="uscript-number">0</span><span class="uscript-operator">)</span><span class="uscript-operator">=</span>Texture<span class="uscript-name">'AS_Vehicles_TX.IonPlasmaTank.IonTankBodyDEAD'</span>
<span class="uscript-operator">}</span></pre><h3><a name="0.4.2"></a>ModifiedBulldog Notes</h3>
<p><u>Things that work</u>:</p>
<ul><li>You can get in and out of the Bulldog and other vehicles.</li>
<li>You can hear the horn, startup, idle and shutdown sounds (borrowed heavily from ONS vehicles)</li>
<li>The destroyed Bulldog shows a mesh, not just a RocketExplosion effect.</li>
<li>Headlights come on when driving, go off when not.</li>
<li>All normal drivability and BulldogRocket<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=BulldogRocket&referrerid=Bulldog">?</a> turret functionality, including homing rockets to vehicles or players with hud display on lock. </li>
</ul>
<p><u>Things that don't work</u>:</p>
<ul><li>If you jump out and the Bulldog keeps rolling (it has no parking brake without a driver, ATM) you loose the BulldogTrigger<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=BulldogTrigger&referrerid=Bulldog">?</a>s that enable you to get back in.</li>
<li>The Deco_DestroyedBulldog mesh doesn't quite fall and hit the ground like it should, the tires simply disappear and there's no neat explosion or smoke.</li>
<li>The Bulldog "dust" and "rocks" trail behind the bulldog no matter what terrain (or BSP) it's on. (should probably take the level's dust color property)</li>
</ul>
<h3><a name="0.4.3"></a>Technical Notes</h3>
<p>The code for KVehicle, KCar and Bulldog is exactly the same as in UT2003, but it was it's interaction with Vehicle and <a href="controller.html">Controller</a> code that seemed to cause problems.  The main things that were breaking the Bulldog were KVehicle.KDriverEnter() and KVehicles.KDriverLeave(), although there were many disabled things in the Bulldog code like sounds and the KAddImpulse when it gets hit.</p>
<h2><a name="0.5"></a>Related Topics</h2>
<ul><li><a href="vehicles.html">Vehicles</a> &ndash; Main topic for Vehicles</li>
<li><a href="kvehiclefactory.html">KVehicleFactory</a> &ndash; Vehicle Factory for KVehicles<ul><li><a href="bulldogfactory.html">BulldogFactory</a> &ndash; KVehicleFactory that spawns Bulldogs</li>
</ul>
</li>
<li><a href="karma.html">Karma</a> &ndash; Main topic for Karma</li>
<li>BulldogRocket<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=BulldogRocket&referrerid=Bulldog">?</a></li>
<li><a href="modifying-the-bulldog.html">Modifying the Bulldog</a></li>
<li><a href="bulldog-player.html">Bulldog Player</a> &ndash; Mod to have players spawn as a bulldog</li>
<li><a href="mod-ideas-mini-bulldogs.html">Mod Ideas/Mini Bulldogs</a></li>
</ul>
<h2><a name="0.6"></a>Discussion</h2>
<p><em class="em2">SuperApe:</em> I've been curious about this since UT2004 came out.  Although, this just reminds me how badly the Bulldog handles; bad shocks that flop around and the momentum keeps the front tires from gripping enough to steer well.  I'm still not sure exactly what part of those KVehicle functions broke it.  Any thoughts on this are welcome here in the Discussion section.  I will update the source code when we know more.</p>
<p><em class="em2">DaWrecka:</em> On the subject of Bulldog handling, I did play around with this some in UT2003...While I stress I've NOT tried this with UT2004, in 2k3 I found cranking up the KActorGravScale of the Bulldog's KParams actually made it handle more-or-less as you would expect a jeep-thing to handle. A value of 3 worked nicely. That's assuming the level was in normal gravity of course...Reduced level gravity would bollocks the whole thing up just like normal.</p>
<p><em class="em2">Sweavo:</em> I wonder whether a better idea is to steal the hellbender code and re-mesh it as a bulldog...  Not that I'll get time to do that but there we go.</p>
<hr class="thin"><p><a href="category-class-ut2003.html">Category Class (UT2003)</a></p>
<p><a href="category-class-ut2004.html">Category Class (UT2004)</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Properties", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Main", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Wheel Slip and Dust", "#0.1.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Bulldog Sounds", "#0.1.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Bulldog Forces", "#0.1.1.3");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Destroyed Bulldog", "#0.1.1.4");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Hidden", "#0.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Bulldog Triggers", "#0.1.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Headlight Projector", "#0.1.2.2");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Light Materials", "#0.1.2.3");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Wheel Dirt Emitter", "#0.1.2.4");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Weapon", "#0.1.2.5");
menuItemAdd("Functions", "#0.2");
menuItemAdd("Events", "#0.3");
menuItemAdd("UT2004 Bulldog Fix", "#0.4");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Source Code", "#0.4.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>ModifiedBulldog Notes", "#0.4.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Technical Notes", "#0.4.3");
menuItemAdd("Related Topics", "#0.5");
menuItemAdd("Discussion", "#0.6");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="(start).html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a> | <a href="http://wiki.beyondunreal.com/wiki?action=editprefs">Preferences</a><br>
<a href="http://wiki.beyondunreal.com/wiki?action=edit&id=Bulldog">Edit text of this page</a> | <a href="http://wiki.beyondunreal.com/wiki?action=history&id=Bulldog">View other revisions</a><br>Last edited February 20, 2006 5:51 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Bulldog">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Bulldog">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>I search for solutions in this order: Past Code, Unreal Source, Wiki, BUF, groups.yahoo, google, screaming at monitor. (RegularX)
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="http://wiki.beyondunreal.com/"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>
<p><a href="/cgi-bin/imageupload.cgi/wiki-ext/imageupload.htt" target="_blank ">Image Uploads</a></p>
<p><a href="http://wiki.beyondunreal.com/wiki?action=random">Random Page</a></p>
<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
