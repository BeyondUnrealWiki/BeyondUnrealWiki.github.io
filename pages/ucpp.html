<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: UCPP</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=UCPP; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=UCPP">UCPP</a></h1>
	<div class="wiki"><p>UnrealScript Class PreProcessor (UCPP) is a commandline utility intended to be executed before <code>ucc make</code>. It adds some preprocessor features that are not possible with <a href="ucc.html">Ucc</a>. UCPP takes special class files with a <code>.puc</code> extention, processes them and generates a <code>.uc</code>.</p>
<p><a href="el-muerte.html">El Muerte</a> started on this tool to add some more magic to an upcoming UnrealScript unit testing framework (<a href="usunit.html">UsUnit</a>). This tool is currently in development; any help (like testing) would be greatly appreciated.</p>
<h2><a name="0.1"></a>Features</h2>
<h3><a name="0.1.1"></a>Directives</h3>
<table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td align=center colspan=2><em class="em2">directive</em></td>
<td align=center><em class="em2">description</em></td>
</tr>
<tr valign=top><td colspan=2><tt>#define&nbsp;<em class="em1">name</em>&nbsp;<em class="em1">something&nbsp;...</em></tt></td>
<td>adds\overrides an definition <em class="em1">name</em> (case insensitive) with the value <em class="em1">something ...</em> (till the end of the line)</td>
</tr>
<tr valign=top><td colspan=2><tt>#undef <em class="em1">name</em></tt></td>
<td>removed <em class="em1">name</em> from the definition list (for this file only)</td>
</tr>
<tr valign=top><td colspan=2><tt>#if <em class="em1">expresion </em></tt><br>...<br><tt>#elif <em class="em1">expresion </em></tt><br>...<br><tt>#else</tt><br>...<br><tt>#endif</tt></td>
<td><em class="em1">expression</em> contains an expression constructed from numbers or defined names. The <code>#else</code> is optional. <tt>#elif</tt> (since version 009) is short of "else if", you can have as many of these as you want. You can nest these.</td>
</tr>
<tr valign=top><td colspan=2><tt>#ifdef <em class="em1">name</em></tt></td>
<td>evaluates to true if <em class="em1">name</em> is defined. Can also be used to check if function definitions have been made: <tt>#ifdef MYFUNC/2</tt>.</td>
</tr>
<tr valign=top><td colspan=2><tt>#ifndef <em class="em1">name</em></tt></td>
<td>the opposite of <tt>#ifdef</tt></td>
</tr>
<tr valign=top><td colspan=2><tt>#include <em class="em1">filename</em></tt></td>
<td>include the file in the output file, this does the same as the #include directive in UE2. By default this directive is disabled, you can enable it in the config file.</td>
</tr>
<tr valign=top><td colspan=2><tt>#ucpp <em class="em1">command</em></tt></td>
<td>various UCPP related items; usually these will be replaced with comments. The following commands are accepted.</td>
</tr>
<tr valign=top><td></td>
<td><tt>notice</tt></td>
<td>this will add a notice that the <em class="em1">uc</em> file was generated by UCPP, everything after this command is ignored.</td>
</tr>
<tr valign=top><td></td>
<td><tt>version</tt></td>
<td>this will add a comment with the UCPP version info and homepage link.</td>
</tr>
<tr valign=top><td></td>
<td><tt>include <em class="em1">filename</em></tt></td>
<td>include <em class="em1">filename</em> to be processed for macros, nothing else will be done with the file. It has the same effect as using the command argument <em class="em1">-imacros filename</em>. The filename is relative to the currently being processed file.</td>
</tr>
<tr valign=top><td></td>
<td><tt>error <em class="em1">message</em></tt></td>
<td>produces a preprocessor error.</td>
</tr>
<tr valign=top><td></td>
<td><tt>warning <em class="em1">message</em></tt></td>
<td>produces a preprocessor warning. If the message is <em class="em1">off</em> warning reporting will be turned off, and on again if it is <em class="em1">on</em> (and nothing more),</td>
</tr>
<tr valign=top><td></td>
<td><tt>rename <em class="em1">filename</em></tt></td>
<td>renames the resulting file to <em class="em1">filename</em>. This can be useful to use UCPP to create include files to be used with the UnrealEngine's <tt>#include</tt> directive</td>
</tr>
<tr valign=top><td></td>
<td><tt>config <em class="em1">variable value</em></tt></td>
<td>this will override certain configuration variables for <em class="em1">this</em> file only. Variable can be one of the following: <em class="em1">supportIf</em>, <em class="em1">supportDefine</em>, <em class="em1">supportPreDefine</em>, <em class="em1">supportInclude</em>, <em class="em1">stripCode</em>. Value can be <em class="em1">true</em>, <em class="em1">false</em>, <em class="em1">0</em>, <em class="em1">1</em> or empty to reset to the default value.</td>
</tr>
<tr valign=top><td colspan=2><tt>#pragma ucpp <em class="em1">command</em></tt></td>
<td>Accepts the same commands as the normal <tt>#ucpp</tt> directive except that using <tt>#pragma ucpp</tt> is more portable (in case you ever switch preprocessors).</td>
</tr>
</table>
<p>All macros that UCPP processed will simply be commented out.</p>
<p>Most macros allow comments on the same line; everything after the comment start token (<code>//</code> or <code>/*</code>) will be removed. The macro <code>#define</code> <em class="em2">does not</em> support comments. For example:</p>
<pre class="uscript">#<span class="uscript-keyword">if</span> <span class="uscript-number">1</span> <span class="uscript-comment">// always evaluates to 'true'</span>
#endif <span class="uscript-comment">/* this comment is also ignored */</span>

#define INC_COMMENT log<span class="uscript-operator">(</span><span class="uscript-string">"Bogus"</span><span class="uscript-operator">)</span><span class="uscript-operator">;</span> <span class="uscript-comment">// this comment is included with the definition</span>

#ifdef <span class="uscript-number">1</span> <span class="uscript-comment">/* always evaluates to false */</span> <span class="uscript-operator">&amp;&amp;</span> <span class="uscript-number">0</span></pre><p><em class="em2">Note:</em> in UCPP version 1.3 and earlier you could not have spaces between <tt>#</tt> and the directive. Also block everything was removed from the start of a block comment.</p>
<p><em class="em2">Note 2:</em> Do not start a block comment in a macro and end it on an other line. This will break your code even tho UCPP accepts it. For example, the following is <em class="em3">bad</em>:</p>
<pre class="uscript">#<span class="uscript-keyword">if</span> <span class="uscript-number">1</span> <span class="uscript-comment">/*
    a block comment
*/</span>
#endif</pre><h4><a name="0.1.1.1"></a>Expression syntax</h4>
<p>Grammar:</p>
<pre class="paraverbatim">  EXPR      ::= CMPX
  CMPX      ::= ORX ( CMPOP CMPX )*
  ORX       ::= ACCUM ( '||' ORX )*
  ACCUMX    ::= ANDX ( '+'|'-' ACCUM )*
  ANDX      ::= MULTX ( '&amp;&amp;' ANDX )*
  MULTX     ::= UNARYX ( '*'|'/' MULTX )*
  UNARYX    ::= ( '!' )? OPERAND
  OPERAND   ::= LVALUE | '(' EXPR ')'
  LVALUE    ::= integer | BUILTIN '(' EXPR ')' | IDENTIFIER
  CMPOP     ::= '&lt;' | '&lt;=' | '=&lt;' | '=&gt;' | '&gt;=' | '&gt;' | '==' | '!='
  BUILTIN   ::= 'defined' | 'strcmp' | 'stricmp' | ... </pre><table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td align=center><em class="em2">Operator precedence &ndash; from top to bottom</em></td>
</tr>
<tr valign=top><td>!</td>
</tr>
<tr valign=top><td>/, *</td>
</tr>
<tr valign=top><td>&amp;&amp;</td>
</tr>
<tr valign=top><td>+, -</td>
</tr>
<tr valign=top><td>||</td>
</tr>
<tr valign=top><td>&lt;, &lt;=, =&lt;, =&gt;, &gt;=, &gt;, ==, !=</td>
</tr>
</table>
<p><em class="em2">Note:</em> <tt>&lt;=</tt> and <tt>=&lt;</tt> are the same, and so are <tt>&gt;=</tt> and <tt>=&gt;</tt></p>
<p><code>IDENTIFIER</code> is resolved in the definition table. If it is not defined, the entire expression will fail (e.g. the result is false). An empty definition (<code>#define DEBUG</code>) will evaluate to <code>1</code>.</p>
<p>The following examples are valid expressions:</p>
<pre class="uscript">#<span class="uscript-keyword">if</span> DEBUG <span class="uscript-operator">&amp;&amp;</span> UNSTABLE_CODE
#endif

#<span class="uscript-keyword">if</span> <span class="uscript-operator">!</span>DEBUG <span class="uscript-operator">||</span> <span class="uscript-operator">(</span>STABLE_TEST_CODE <span class="uscript-operator">&amp;&amp;</span> COOKIES<span class="uscript-operator">)</span>
#endif</pre><p>There are a couple of functions that can be used in an expression:</p>
<table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td align=center><em class="em2">function</em></td>
<td align=center><em class="em2">description</em></td>
</tr>
<tr valign=top><td><tt>defined(<em class="em1">name</em>)</tt></td>
<td>Returns 1 if <em class="em1">name</em> is defined, 0 otherwise</td>
</tr>
<tr valign=top><td><tt>strcmp(<em class="em1">name or string</em>, <em class="em1">name or string</em>)</tt></td>
<td>Returns 0 if both strings are equal, you can use an identifier or a string constant. (v103 and up)</td>
</tr>
<tr valign=top><td><tt>stricmp(<em class="em1">name or string</em>, <em class="em1">name or string</em>)</tt></td>
<td>Identical as <tt>strcmp</tt> but case insensitive. (v103 and up)</td>
</tr>
</table>
<h4><a name="0.1.1.2"></a>Examples: defined(<em class="em1">name</em>)</h4>
<pre class="uscript">#undef DEBUG

#<span class="uscript-keyword">if</span> defined<span class="uscript-operator">(</span>DEBUG<span class="uscript-operator">)</span>
  <span class="uscript-comment">// this is accepted</span>
#endif

#<span class="uscript-keyword">if</span> DEBUG
  <span class="uscript-comment">// this will produce a preprocessor error</span>
#endif</pre><h4><a name="0.1.1.3"></a>Examples: strcmp(<em class="em1">arg1</em>, <em class="em1">arg2</em>)</h4>
<pre class="uscript">#define TEST1 <span class="uscript-string">"This is a test"</span>
#define TEST2 <span class="uscript-string">"This is a test"</span>

#<span class="uscript-keyword">if</span> strcmp<span class="uscript-operator">(</span>TEST1<span class="uscript-operator">,</span> TEST2<span class="uscript-operator">)</span> <span class="uscript-operator">==</span> <span class="uscript-number">0</span>
  evaluates to <span class="uscript-keyword">true</span>
#endif

#<span class="uscript-keyword">if</span> strcmp<span class="uscript-operator">(</span>TEST1<span class="uscript-operator">,</span> TEST2<span class="uscript-operator">)</span>
  result is <span class="uscript-number">0</span> so it evaluates to <span class="uscript-keyword">false</span>
#endif

#<span class="uscript-keyword">if</span> stricmp<span class="uscript-operator">(</span>TEST1<span class="uscript-operator">,</span> <span class="uscript-string">"This Is A Test"</span><span class="uscript-operator">)</span> <span class="uscript-operator">==</span> <span class="uscript-number">0</span>
  evaluates to <span class="uscript-keyword">true</span>
#endif

#define TEST4 <span class="uscript-number">12345</span>
#<span class="uscript-keyword">if</span> strcmp<span class="uscript-operator">(</span>TEST4<span class="uscript-operator">,</span> <span class="uscript-number">12345</span><span class="uscript-operator">)</span> <span class="uscript-operator">==</span> <span class="uscript-number">0</span>
  because of a side effect this also evaluates to <span class="uscript-keyword">true</span>
#endif

#define TEST5 thisIsATest
#<span class="uscript-keyword">if</span> strcmp<span class="uscript-operator">(</span>TEST5<span class="uscript-operator">,</span> <span class="uscript-string">"thisIsATest"</span><span class="uscript-operator">)</span> <span class="uscript-operator">==</span> <span class="uscript-number">0</span>
  not the same<span class="uscript-operator">,</span> one is a <span class="uscript-type">string</span><span class="uscript-operator">,</span> the other isn<span class="uscript-name">'t, so -&gt; false</span>
#endif</pre><h3><a name="0.1.2"></a>Macros\Identifiers</h3>
<p>All source code will be parsed for uppercase identifiers (like <code>SOMETHING</code> or <code>SOMETHING_ELSE</code>). These will then be replaced by their definition (if defined) AS IS. This means that <code>"this is a value of a definition"</code> will be inserted into the code like that.</p>
<p>You can add new definitions via the macro <code>#define</code> on the commandline or in the config file.</p>
<h4><a name="0.1.2.1"></a>Pre-defined macros</h4>
<p>The following names are always defined; some have some additional magic (with the name <tt>__<em class="em1">NAME</em>__</tt>). You can never override these magic definitions, however you can disable them by using the <code>-undef</code> commandline argument.</p>
<table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td><tt>__FILE__</tt></td>
<td>The full filename of the current file surrounded by double quotes (the generated <code>.uc</code> files).</td>
</tr>
<tr valign=top><td><tt>__FILE_BASE__</tt></td>
<td>Just the filename without the directory name, also surrounded by double quotes.</td>
</tr>
<tr valign=top><td><tt>__CLASS__</tt></td>
<td>The filename without an extention, should be equal to the class name. This isn't quoted. (006 and up)</td>
</tr>
<tr valign=top><td><tt>__LINE__</tt></td>
<td>The current line in the code, starting from 1.</td>
</tr>
<tr valign=top><td><tt>__DATE__</tt></td>
<td>Returns the current date in the long format (as a string), as defined by the current locale settings.</td>
</tr>
<tr valign=top><td><tt>__TIME__</tt></td>
<td>Returns the current time in the long format (as a string), as defined by the current locale settings.</td>
</tr>
<tr valign=top><td><tt>UCPP_VERSION</tt></td>
<td>The UCPP version number.</td>
</tr>
<tr valign=top><td><tt>UCPP_HOMEPAGE</tt></td>
<td>The UCPP homepage, the URL of this page.</td>
</tr>
<tr valign=top><td><tt>CLASS_<em class="em1">classname</em></tt></td>
<td>Where <em class="em1">classname</em> is the name of the current class. This is an <em class="em1">empty</em> define, it can be useful in include files. (007 and up)</td>
</tr>
</table>
<h3><a name="0.1.3"></a>Function Defines</h3>
<p>As of version 006 beta it is possible to define macro functions.</p>
<pre class="uscript">#define FUNC<span class="uscript-operator">(</span>a<span class="uscript-operator">,</span>b<span class="uscript-operator">,</span>c<span class="uscript-operator">)</span> log<span class="uscript-operator">(</span>a<span class="uscript-operator">$</span>__FILE__<span class="uscript-operator">,</span> c<span class="uscript-operator">)</span><span class="uscript-operator">;</span> a <span class="uscript-operator">=</span> b<span class="uscript-operator">;</span>
<span class="uscript-comment">//      ^           ^- implementation</span>
<span class="uscript-comment">//      \- definition</span></pre><p>The above is a definition of the function <code>FUNC/3</code> Note that this is the so called footprint of the function, the number reflects the number of arguments. It's a function with the name <code>FUNC</code> that accepts 3 arguments. The definition part may not contain any spaces, since the space defines where the implementation part starts. </p>
<p>Function arguments must be seperated by commas. Each argument must have an unique name. The implementation part is an unrealscript code snippet that contains the function arguments or anything else (except preprocessor commands). The resulting implementation is parsed again to process all defines used in the implementation.</p>
<p>Function definitions are unique by their number of arguments. <code>FUNC/2</code> does not replace <code>FUNC/3</code>. In this way you will be able to overload functions. The following definitions have the same footprint, thus the last one will be come effective:</p>
<pre class="uscript">#define FUNC<span class="uscript-operator">(</span>a<span class="uscript-operator">,</span>b<span class="uscript-operator">,</span>c<span class="uscript-operator">)</span> log<span class="uscript-operator">(</span>a<span class="uscript-operator">$</span>__FILE__<span class="uscript-operator">,</span> c<span class="uscript-operator">)</span><span class="uscript-operator">;</span> a <span class="uscript-operator">=</span> b<span class="uscript-operator">;</span>
#define FUNC<span class="uscript-operator">(</span>foo<span class="uscript-operator">,</span>bar<span class="uscript-operator">,</span>quux<span class="uscript-operator">)</span> <span class="uscript-comment">// every call will be replaced by this comment</span></pre><p>There are two special tokens you can use in the implementation part:</p>
<table class="paratable-border" border=0 cellspacing=0 cellpadding=0><tr valign=top><td align=center><em class="em2">token</em></td>
<td align=center><em class="em2">meaning</em></td>
</tr>
<tr valign=top><td><code>#</code></td>
<td>Quote the next function argument (make it an valid unrealscript string): <code># a -&gt; "a"</code>. This only affects function arguments, if the next token isn't a argument it will not be quoted: <code># NotAnArgument -&gt; # NotAnArgument</code> (no substitution at all).</td>
</tr>
<tr valign=top><td><code>##</code></td>
<td>This will concat the previous argument with the next part: <code>a ## b -&gt; ab</code> and <code>a ## NotAnArgument -&gt; aNotAnArgument</code>, but also <code>NotAnArgument ## a -&gt; NotAnArgumenta</code>. <em class="em1">Note:</em> in 006 beta this doesn't work as it should, it is fixed in version 007.</td>
</tr>
</table>
<p>In order to check if a certain function is defined use the footprint:</p>
<pre class="uscript">#ifndef FUNC<span class="uscript-operator">/</span><span class="uscript-number">3</span>
  #define FUNC<span class="uscript-operator">(</span>a<span class="uscript-operator">,</span>b<span class="uscript-operator">,</span>c<span class="uscript-operator">)</span> log<span class="uscript-operator">(</span>a<span class="uscript-operator">$</span>__FILE__<span class="uscript-operator">,</span> c<span class="uscript-operator">)</span><span class="uscript-operator">;</span> a <span class="uscript-operator">=</span> b<span class="uscript-operator">;</span>
#endif</pre><p>You can not use these functions in an <code>#if</code> expression.</p>
<h3><a name="0.1.4"></a>Commandline options</h3>
<pre class="paraverbatim"> Usage:
   ucpp.exe [switches] [settings] &lt;name&gt; &lt;name&gt; ...
 
   &lt;name&gt; is the name of a file or package, depeding on the mode.
 
 Switches (case sensitive):
   -?    This message
   -D&lt;name&gt;=&lt;value&gt;
         Define a &lt;name&gt; with a &lt;value&gt;. This overrides the standards as
         defined in the configuration file
   -env  Import environment variables as declarations
   -imacros &lt;filename&gt;
         Process &lt;filename&gt; for macros. This will be done for every file
         that needs to be processed
   -include &lt;filename&gt;
         Alias for -imacros
   -L    Print the program's license
   -undef
         Do not use predefinitions (like __FILE__)
   -P    Enable package mode. The provided names are package names.
         In package mode the base directory must be defined using
         either the SYSTEM or BASE setting
   -pipe
         Read from the stdin and write to the stdout. Only works for
         single files and not in package mode.
   -q    Be quite, only show errors\warnings
   -stdout
         Similar to -pipe except that the file is not read from the
         standard in, but from the file provided on the commandline.
         So it will just write to the standard output.
   -strip
         Strip the code instead of commenting it out
   -U&lt;name&gt;
         Undefine &lt;name&gt;. Note: this has a lower precedence than
         definitions made in the file
   -V    Show the program version
   -wait Pause at the end of executiong when there where errors
   -WAIT Always pause at the end of processing
 
 Settings are always in the format "&lt;Key&gt;=&lt;Value&gt;". The following
 keys are accepted:
   BASE          The base directory of the game. Required in
                 Package Mode, unless SYSTEM is already given.
   CONFIG        Alternate configuration file to use.
   MOD           The mod name, as used in the enhanced mod
                 architecture.
   SYSTEM        The "System" directory of the game. Required in
                 Package Mode, unless BASE is already given.</pre><p>If an error was produced the exit value will be not zero.</p>
<p>It's easy to configure <a href="wotgreal.html">WOTgreal</a> to execute the preprocessor before compiling the selected packages. The commandline you should use is:</p>
<pre class="paraverbatim"> ucpp.exe SYSTEM=%SYSTEMDIR% MOD=%CURRENTMOD% -DDEBUG=%DEBUGCOMPILE% -P %SELECTEDPACKAGES%</pre><p>This will automatically define the identifier DEBUG either set to 0 or 1 depending on if you made a debug compile in WOTgreal. Note: with this <code>DEBUG</code> is always defined, use it with <code>#if</code> not with <code>#ifdef</code>.</p>
<h2><a name="0.2"></a>Configuration</h2>
<p>UCPP has a few configurable options. Unless <tt>CONFIG=<em class="em1">filename</em></tt> is specified the program will load <tt>ucpp.ini</tt> in the same directory as the location oc <tt>ucpp.exe</tt>. You can set the following items:</p>
<pre class="paraverbatim"> [Options]
 supportIf=1
 supportDefine=1
 supportPreDefine=1
 supportInclude=0
 stripCode=0
 stripMessage=// UCPP: code stripped
 noticeMessage=// NOTICE: This file was automatically generated by UCPP; do not edit this file manualy.</pre><dl><dt>supportIf (<em class="em2">*</em>)</dt><dd>toggles the support for <tt>#if ... #elif ... #else ... #endif</tt> and <tt>#ifdef</tt> directives. This way the original compiler should take care of these directives (Only useful for the games of Irrational: Tribes: Vengeance and SWAT4).</dd><dt>supportDefine (<em class="em2">*</em>)</dt><dd>toggles support for <tt>#define</tt> and <tt>#undef</tt></dd><dt>supportPreDefine (<em class="em2">*</em>)</dt><dd>when turned off it has the same effect as <tt>-undef</tt> on the commandline (commandline will override this)</dd><dt>supportInclude (<em class="em2">*</em>)</dt><dd>enable support for the <tt>#include</tt> macro.</dd><dt>stripCode (<em class="em2">*</em>)</dt><dd>instead of commenting out the code it will be removed, works the same as the <tt>-strip</tt> commandline options (commandline will override this)</dd><dt>stripMessage</dt><dd>the message to use when stripping the code, if you leave it blank it only the whitespace will remain.</dd><dt>noticeMessage</dt><dd>the message to use when the <tt>#ucpp notice</tt> directive is used.</dd></dl>
<p>(<em class="em2">*</em>): these settings can be changed through the <tt>#pragma ucpp config</tt> directive.</p>
<pre class="paraverbatim"> [Defines]
 NAME=Value</pre><p>The same as <tt>#define NAME Value</tt>. You can use this for global definitions, although using an include file has more possibilities.</p>
<h2><a name="0.3"></a>UnrealEngine Licensee Notice</h2>
<p>Since version 1.4 there is a new feature that allows you to pipe the source file through UCPP. With this feature it is possible to hook up UCPP with the UnrealScript compiler. This way you don't need special <tt>.puc</tt> files, when the engine imports the code from the <tt>.uc</tt> file it can pipe it through UCPP. This way the preprocessing will be done on the fly.</p>
<p>For more information on how to add external preprocessor support to the UnrealEngine you can contact me through the <a href="https://udn.epicgames.com/Two/UnDevIRC">[UDN IRC Server]</a>, my nickname is <em class="em1">elmuerte</em> (obviously).</p>
<h2><a name="0.4"></a>Downloads</h2>
<ul><li><em class="em2"><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.6.zip">[Version 1.6]</a></em> - <a href="http://sourceforge.net/project/shownotes.php?release_id=366364">[release notes]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.5.zip">[Version 1.5]</a> - <a href="http://sourceforge.net/project/shownotes.php?release_id=364785">[release notes]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.4.zip">[Version 1.4]</a> - <a href="http://sourceforge.net/project/shownotes.php?release_id=350093">[release notes]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.3.zip">[Version 1.3]</a> - <a href="http://sourceforge.net/project/shownotes.php?release_id=346922">[release notes]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.2.zip">[Version 1.2]</a> - <a href="http://sourceforge.net/project/shownotes.php?release_id=346648">[release notes]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.1.zip">[Version 1.1]</a> - <a href="http://sourceforge.net/project/shownotes.php?release_id=345429">[release notes]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-v1.0.zip">[Version 1.0]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-008beta.zip">[Version 008 beta]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-007beta.zip">[Version 007 beta]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-006beta.zip">[Version 006 beta]</a></li>
<li><a href="http://prdownloads.sourceforge.net/uncodex/ucpp-005beta.zip">[Version 005 beta]</a></li>
</ul>
<p>Since UCPP uses some parts of <a href="uncodex.html">UnCodeX</a> it is included with the UnCodeX project on <a href="http://sourceforge.net/projects/uncodex/">[SourceForge]</a>. UCPP's source code is available in the UnCodeX source in the directory <code>src\ucpp</code>.</p>
<h2><a name="0.5"></a>Known bugs\issues</h2>
<dl><dt>Newlines are not supported</dt><dd>There is no way to insert a newline via definitions or macros. The reason for this is simple: the line numbers of the <em class="em1">puc</em> and <em class="em1">uc</em> file won't be skewed. This way it's easier to find compiler errors.</dd><dt>#include files not processed</dt><dd>Files included via the UnrealEngine built-in #include macro are not processed for macros. Use <tt>#ucpp include <em class="em1">filename</em></tt> to include preprocessor directives. It is possible to enable support for include directives, in this case the <tt>#include</tt> line is replaced with the actual file during rewriting. So the actual unrealscript compiler won't have to include it.</dd><dt>Code obliviousness</dt><dd>the preprocessor is completely oblivious about the actual unrealscript source code it preprocesses. This means definitions made in super classes do not exist in subclasses. For global definitions you should use other means like the configuration file, the commandline or an include file (<tt>#ucpp include <em class="em1">file</em></tt>).</dd><dt>Recursive defines will break</dt><dd><code>#define A(x) B(x) #define B(x) A(x)</code> will break. In 007 and later an error will be generated.</dd><dt>Function defines can not be used in expressions</dt><dd>You can not use function defines in <code>#if</code> expressions, however you can use them in <code>#ifdef</code>, but you will need to reference them by their footprint: <code>FUNC(a,b,c)</code> has the footprint <code>FUNC/3</code></dd></dl>
<h2><a name="0.6"></a>Feature requests</h2>
<p><em class="em1">Please add your feature requests here, or on the <a href="http://sourceforge.net/projects/uncodex/">[SourceForge]</a> project page</em></p>
<h2><a name="0.7"></a>Tips and Tricks</h2>
<h3><a name="0.7.1"></a>Mixing defines and actual functions</h3>
<p>Since only uppercase identifiers will be replaced and because unrealscript is case insensitive you can mix them to add extra functionality.</p>
<pre class="uscript">#define LOG<span class="uscript-operator">(</span>a<span class="uscript-operator">,</span>b<span class="uscript-operator">)</span> log<span class="uscript-operator">(</span>a<span class="uscript-operator">$</span>chr<span class="uscript-operator">(</span><span class="uscript-number">10</span><span class="uscript-operator">)</span><span class="uscript-operator">$</span>__FILE__<span class="uscript-operator">$</span><span class="uscript-string">":"</span><span class="uscript-operator">$</span><span class="uscript-type">string</span><span class="uscript-operator">(</span>__LINE__<span class="uscript-operator">)</span><span class="uscript-operator">,</span> b<span class="uscript-operator">)</span>
#define LOG<span class="uscript-operator">(</span>a<span class="uscript-operator">)</span> LOG<span class="uscript-operator">(</span>a<span class="uscript-operator">,</span> <span class="uscript-type">name</span><span class="uscript-operator">)</span></pre><p>Now if you use the <code>LOG</code> (in uppercase) function it will append the source file and the line number. If the file isn't processed by UCPP it will still work (taking into account that the above macros where defined somewhere else than in the source file).</p>
<h3><a name="0.7.2"></a>Using the current working directory</h3>
<p>If you want to use the current working directory as BASE or SYSTEM just use a ".". BASE and SYSTEM take relative paths, and "." means the current directory. So for example:</p>
<pre class="paraverbatim"> c:\UT2004\System&gt;ucpp -P SYSTEM=. MyPackage</pre><p>The following does the same</p>
<pre class="paraverbatim"> c:\UT2004\System&gt;ucpp -P BASE=.. MyPackage</pre><h2><a name="0.8"></a>Comments</h2>
<p><em class="em2">Tarquin:</em> Sounds interesting!</p>
<p><em class="em2">El Muerte:</em> Aargh, about 30 minutes after I released 007 I found a minor yet stupid bug. Backslashes are not properly escaped. Not a major thing, but just annoying.</p>
<p><em class="em2">El Muerte:</em> There, another release. Implemented pretty much every feature I wanted. Still have to document how to use the config file. But for the rest if this release holds up I think a stable release is close.</p>
<p><em class="em2">El Muerte:</em> ok, here's version 1.0, did quite some testing a found a few minor bugs, also new in the release is support for <code>#elif</code>. I'm delaying the press release a bit, just in case of an serious bug.</p>
<p><em class="em2">Guest:</em> Featured on BU's news page. <img alt=":)" src="emoticons/smile.gif" align="middle"> <a href="http://www.beyondunreal.com/daedalus/singlepost.php?id=8449">http://www.beyondunreal.com/daedalus/singlepost.php?id=8449</a></p>
<p><em class="em2">razialx:</em> El Muerte, you are amazing. Now I feel like starting up coding in UScript again. </p>
<p><em class="em2">Devi:</em> We've just started using this on the game my company is working on (I'm under an NDA, so I can say no more I'm afraid) and I'd just like to say: "Thankyouthankyouthankyouthankthankyou, you have made our lives SO much easier" <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<p><em class="em2">Jon:</em> Soon you'll be speaking in binary code and taking over all our satellites. <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<hr class="thin"><p><a href="category-application.html">Category Application</a></p>
<script type="text/javascript"><!--
 menuItemAdd("Features", "#0.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Directives", "#0.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Expression syntax", "#0.1.1.1");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Examples: defined(<em class=\"em1\">name</em>)", "#0.1.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Examples: strcmp(<em class=\"em1\">arg1</em>, <em class=\"em1\">arg2</em>)", "#0.1.1.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Macros\Identifiers", "#0.1.2");
menuItemAdd("<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>Pre-defined macros", "#0.1.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Function Defines", "#0.1.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Commandline options", "#0.1.4");
menuItemAdd("Configuration", "#0.2");
menuItemAdd("UnrealEngine Licensee Notice", "#0.3");
menuItemAdd("Downloads", "#0.4");
menuItemAdd("Known bugs\issues", "#0.5");
menuItemAdd("Feature requests", "#0.6");
menuItemAdd("Tips and Tricks", "#0.7");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Mixing defines and actual functions", "#0.7.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Using the current working directory", "#0.7.2");
menuItemAdd("Comments", "#0.8");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited October 27, 2005 7:12 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=UCPP">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/UCPP">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>I love the smell of UnrealEd crashing in the morning. (tarquin)</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
