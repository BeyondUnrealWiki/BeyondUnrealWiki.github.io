<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Using UCC Under Linux</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Using_UCC_Under_Linux; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<form class="inline" method="post" action="/wiki" enctype="application/x-www-form-urlencoded"><input type="text" name="search"  size="20" /> <input type="submit" name="search" value="search" /></form>
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="http://wiki.beyondunreal.com/wiki?back=Using UCC Under Linux">Using UCC Under Linux</a></h1>
	<div class="wiki"><p>This page goes through the process of getting <a href="ucc.html">Ucc</a>, the Unreal Script compiler (UT2004), working under the <span class="interwiki"><img 
      alt="Wikipedia logo"
      title="Wikipedia"
      src="shared//InterWiki-Wikipedia.png">&nbsp;<a href="http://www.wikipedia.com/wiki/Linux">Linux</a></span> OS.</p>
<p>Note: currently UCC is not fully implemented in the linux version of UT2004; however, linux is not without hope, we can use the tool <span class="interwiki"><img 
      alt="Wikipedia logo"
      title="Wikipedia"
      src="shared//InterWiki-Wikipedia.png">&nbsp;<a href="http://www.wikipedia.com/wiki/WINE">WINE</a></span> to compile our Unrealscript.  This tutorial shows how to do this as well as some other cool things we can do (so this will be usefull if/when UCC is fully implemented under linux).</p>
<ul><li><em class="em2">WIN_HOME</em> = The directory that contains UT2004 for windows</li>
<li><em class="em2">NIX_HOME</em> = The directory that conatins UT2004 for linux</li>
</ul>
<h2><a name="0.1"></a>Required Tools</h2>
<ul><li>Your favorite flavor of Linux (I'm using Gentoo)</li>
<li>Some version of wine (winex, cedega, wine_cvs, etc)</li>
<li>A <a href="text-editor.html">Text Editor</a> (vim, emacs, nano, pico, etc)</li>
<li>A retail copy of <a href="unreal-tournament-2004.html">UT2004</a> (yep, we actually have to purchase software)</li>
<li>Latest UT patch (3323 as of this writing, but check the page <a href="unreal-tournament-2004.html">UT2004</a>)</li>
<li>UT Source (again 3323)</li>
<li><a href="http://www.parl.clemson.edu/~mspeth/projects/ut2004/">[ut2k4_linux_sdk]</a> (Optional: 42MB)</li>
</ul>
<h2><a name="0.2"></a>Base Setup</h2>
<p>There are several ways of setting up UT under linux so I'll describe the ways below.</p>
<h3><a name="0.2.1"></a>Bloated Setup </h3>
<p>The most generic type of setup that requires the most hard disk space.</p>
<ol><li>Install UT2004 Linux version</li>
<li>Install UT2004 Windows version using wine</li>
<li>Patch both to the latest version of UT</li>
<li>Unpack the unreal source into the <em class="em2">WIN_HOME</em> directory</li>
</ol>
<p>Now you are ready to start writing Unreal Script.</p>
<p>Your source code will be written in the <em class="em2">WIN_HOME</em> directory.  Once you have compiled (shown later) your source then you will need to move a minimum of 3 files to your <em class="em2">NIX_HOME</em> directory.</p>
<p>The 3 files are yourpkg.u, yourpkg.ucl, and yourpkg.int.  These files should be found in your <em class="em2">WIN_HOME/System</em> directory and copied to the <em class="em2">NIX_HOME/System</em> directory.</p>
<h3><a name="0.2.2"></a>Jumbled Setup</h3>
<p>Requires the minimum space but compilation files and binary files get mixed together.</p>
<ol><li>Install UT2004 Linux version</li>
<li>Install UT2004 WIndows version using wine</li>
<li>Patch both</li>
<li>Now Copy all files from the <em class="em2">WIN_HOME/System</em> to <em class="em2">NIX_HOME/System</em></li>
<li>Delete <em class="em2">WIN_HOME</em> and all of its contents</li>
<li>Unpack UT source into <em class="em2">NIX_HOME</em></li>
</ol>
<p>Now you are ready to start compiling and writing your Unreal Script</p>
<h3><a name="0.2.3"></a>Linux SDK setup 1</h3>
<p>Requires ut2004_linux_sdk (This is an "environment" that I have created for making unreal scripting easier on the linux user &ndash; the latest version has handles variables repeatedly used in the old scripts implemented by Chris Guirl and David Redick from <a href="http://clemsonlinux.org/">[CLUG]</a>).</p>
<ol><li>Install UT2004 Linux Version</li>
<li>Unpack the latest version of ut2004_linux_sdk anywhere ( preferably somewhere other then <em class="em2">NIX_HOME</em>)</li>
<li>Run the setup script found in ut2004_linux_sdk directory<ol><li>setup symbolically links files needed to compile UT as well as creates a file in your home directory to store values used in the scripts.</li>
<li>Usage: setup utenv     where ut_env is a directory provided in the sdk.</li>
</ol>
</li>
</ol>
<p>You are now ready to compile your Unreal script code.  Note, that we only have 1 full vesion of UT installed.  The sdk provides all necessary files for compilation.  setup symbolically links directories found in <em class="em2">NIX_HOME</em> that the compiler needs such as Textures, Sounds, etc.  Here you will put your packages inside utenv.</p>
<h3><a name="0.2.4"></a>Linux SDK setup 2</h3>
<p>Basically the same as "Linux SDK setup 1" except your source files can be stored in a directory other then utenv.  Here's what you need to do.</p>
<ol><li>Follow Linux SDK setup 1</li>
<li>Create a directory somewhere for your project.  (example mkdir /home/user/UTMod)</li>
<li>Create a System directory inside your project dir (example mkdir /home/user/UTMod/System)</li>
<li>Use utlinkpkg to symbolically link your new project</li>
<li>Command Line<ol><li>Usage: utlinkpkg pkg_dir<ol><li>where pkg_dir is the full path to your new project directory</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>You can now compile your package like you would if the package was actually in ut_env.</p>
<h2><a name="0.3"></a>Compiling using Wine</h2>
<p>As noted at the top of the page, we cannot use the UCC provided in the linux version.</p>
<p>Hence, we need to use UT's windows version.  By now you should have the necessary tools to compile so lets push on.</p>
<p>I am currently using cedega so the examples listed below will be using "cedega" but you can replace cedega with your version of wine (ie. winex, wine, wine_cvs, etc).</p>
<p>To compile the UT source (without any of your modifications) then you can do this command</p>
<ul><li>cedega UCC.exe make</li>
</ul>
<p>UCC is the unreal script compiler.  Make tells the compiler to compile your source.  </p>
<p><em class="em2"> UCC make doesn't work exactly like gnu make</em></p>
<p>With gnu make, if you modify a source file then make knows about this and recompiles the needed files.</p>
<p>However, UCC does not do this.  It looks in your System directory for the .u files corresponding to the packages listed in the Game .ini file (Think of this as your make file).  If the .u is present, then it doesn't attempt to compile it; however, when the .u file is not present then it looks for your source and tries to compile it.  I have written scripts to make this automatic for you,but if you do it on your own, then you need to remember to delete the .u files that you want to recompile.</p>
<p>To use a different "make file" you can copy and paste the default make file called UT2004.ini located in your System directory to a new file (like UT2004_make.ini).  Here we can edit this file to only compile packages that we need.  Inside this file there will be several lines that have EditPackages= in it.  EditPackages tells the compiler which packages to compile.  In your new file you can remove those packages that are not needed by your package that you want to compile (btw, you need to add your package name like this <em class="em2">EditPackages=UTMod</em>)</p>
<p>Now we are ready to compile with the new .ini file.</p>
<ul><li>cedega UCC.exe make -ini=UT2004_make.ini</li>
</ul>
<p>Thats it, UCC now uses UT2004_make.ini for its make file.</p>
<h2><a name="0.4"></a>Scripts</h2>
<p>These are provided in the SDK to make your Unreal Scripting easier.  Feel free to use, modify, or ignore them, its up to you <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<h3><a name="0.4.1"></a>utmake</h3>
<p>This removes and compiles a package as well as moves the package to the <em class="em2">NIX_HOME</em>.</p>
<ul><li>Usage: utmake [class] [makefile]</li>
</ul>
<p>Where <em class="em2">class</em> is the name of the package to compile and <em class="em2">makefile</em> (optional) is the game .ini to use.</p>
<h3><a name="0.4.2"></a>utfind</h3>
<p>Useful for searching for the location of class files in the source directory.</p>
<ul><li>Usage: utfind [class]</li>
</ul>
<p>Where <em class="em2">class</em> is the source file you are looking for.</p>
<p>Example: I am looking for class xPawn because Monster.uc extends it but xPawn isn't in the same directory as Monster.uc.  so do </p>
<ul><li>utfind xPawn</li>
</ul>
<p>XEffects: xpawngibgroup.uc</p>
<p>XGame: xPawn.uc</p>
<p>XGame: xPawnSoundGroup.uc</p>
<h3><a name="0.4.3"></a>utedit</h3>
<p>Useful for looking at the ut files that you found with utfind.</p>
<ul><li>Usage: utedit [class] [ext]</li>
</ul>
<p>Where <em class="em2">class</em> is the name of the file (without the extension) to be looked in and <em class="em2">ext</em> is the extension (ie .uc, .ucl, .ini, etc). If ext is not given, .uc is assumed.</p>
<h3><a name="0.4.4"></a>utlinkpkg</h3>
<p>Used to symbolically link project directories so that you do not have to move src code into the utenv directory structure.</p>
<ul><li>Usage: utlinkpkg [package]</li>
</ul>
<p>Where <em class="em2">package</em> is the path to the directory with the src code that you want linked.</p>
<h3><a name="0.4.5"></a>utrun</h3>
<p>Ever get tired of clicking through the menus just to play a mod you are working on and you don't remember what the command line parameters are for starting ut with your mod?</p>
<p>Well, utrun does it for you.</p>
<ul><li>Usage: utrun [map] [gametype]</li>
</ul>
<p>Where <em class="em2">map</em> is the map to start wit and <em class="em2">gametype</em> is the gametype to use.</p>
<p>You avoid going through the menus by using this script.</p>
<h2><a name="0.5"></a>Related Topics</h2>
<ul><li><a href="native-coding-on-linux.html">Native Coding On Linux</a></li>
</ul>
<h2><a name="0.6"></a>Comments</h2>
<p><em class="em2">Foxpaw:</em> Should this page possibly be renamed? "The Linux Way" would be a catchy title for a magazine article, but as this is a more reference oriented medium, I think that the title should give some indication to what the page contains, other than just the fact that it has something to do with Linux. "Using UCC under Linux," or "Coding under Linux" or something like that seems better to me. "The Linux Way" is also not very amiable to being linked to.</p>
<p><em class="em2">Conzar:</em> Agreed.  My title is catchy <img alt=":)" src="emoticons/smile.gif" align="middle"> but not the best at describing this page.  So how do I change the title???</p>
<p><em class="em2">Foxpaw:</em> Err, actually you can't. You can make a new page and copy everything there, or we can probrably just leave these comments here and tarquin will probrably see it and change the name.</p>
<p><em class="em2">Conzar:</em> Ok.  Well, I'm going to continue to work on this then.</p>
<p><em class="em2">Tarquin:</em> done <img alt=":)" src="emoticons/smile.gif" align="middle"> Remember to make use of other pages in the wiki by linking to them <img alt=":)" src="emoticons/smile.gif" align="middle"> (I've done a few for you)</p>
<p><em class="em2">Conzar:</em> Thanks for the edits and renaming the page.</p>
<p><em class="em2">Conzar:</em> Note, I updated script definitions to the lastest version.</p>
<p><em class="em2">thelusiv:</em> With the setup script there, are the first two methods (the bloated and jumbled setups) really necessary? They're not really the ideal way to set it up and only seem to make this page more confusing...</p>
<p><em class="em2">Conzar:</em> Well, they are necessary if the user does not want to use the sdk provided.  I think it also helps those understand why the sdk is cool.  But what does everyone else think?  Should we re-order those subtopics, remove them, or leave it be?</p>
<p><em class="em2">thelusiv:</em> Maybe there should be a page dedicated to doing it by hand using Linux, as well as a separate page about the SDK. That would significantly reduce clutter and keep all the information.</p>
<p><em class="em2">strider:</em> I'm tring to compile a mod (Unreal Annihilation) using linux (I'd really rather not have to boot into windows anymore purely because of compiling!)  I try wine ucc.exe make -mod=Annihilation2k4 but I get the following error:  fixme:process:GetProcessWorkingSetSize (0xffffffff,0x40dce6d8,0x40dce6d4): stub.  After this, the CPU goes to 100% until I press ctrl-c, where it exits with the error code 1.</p>
<p>Any ideas?</p>
<p><em class="em2">MythOpus:</em> I'm definately not the hugest Linux person (I don't use it at all, although my dad put it on here) but isn't it unnecesary to type in ucc.exe make -mode=Annihilation2k4?  Doesn't it still look in it's directory for the ut2004.ini and compile all packages neccesary?</p>
<p><em class="em2">strider:</em> It's a seperate mod, a total conversion.  So yeah it's necessary.  Typing ucc make -mod=annihilation2k4 works on windows, but not linux using this setup.</p>
<p><em class="em2">OlgaB:</em> Is there any way to get UCC support in UT1?</p>
<p><em class="em2">Wormbo:</em> Use WINE to run ucc.exe from the Windows version.</p>
<script type="text/javascript"><!--
 menuItemAdd("Required Tools", "#0.1");
menuItemAdd("Base Setup", "#0.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Bloated Setup ", "#0.2.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Jumbled Setup", "#0.2.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Linux SDK setup 1", "#0.2.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>Linux SDK setup 2", "#0.2.4");
menuItemAdd("Compiling using Wine", "#0.3");
menuItemAdd("Scripts", "#0.4");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>utmake", "#0.4.1");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>utfind", "#0.4.2");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>utedit", "#0.4.3");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>utlinkpkg", "#0.4.4");
menuItemAdd("<tt>&nbsp;&nbsp;</tt>utrun", "#0.4.5");
menuItemAdd("Related Topics", "#0.5");
menuItemAdd("Comments", "#0.6");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p><form method="post" action="http://wiki.beyondunreal.com/wiki" enctype="application/x-www-form-urlencoded">
<a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited August 30, 2006 4:30 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Using_UCC_Under_Linux">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Using_UCC_Under_Linux">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>
</form>
	</p>
	<p>Once I get that upgrade to 36-hour days, I will tackle that. (Mychaeel)
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
