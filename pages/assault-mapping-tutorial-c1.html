<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head lang="en">
	<title>UnrealWiki: Assault Mapping Tutorial/Creating Tutorial Valley</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<link rel="stylesheet" type="text/css" media="screen, print"
		href="shared/stylebase.structural.css">	
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/template-default.css">
	<link rel="stylesheet" type="text/css" media="screen"
		href="shared/styles.chblue.css">
	<link rel="stylesheet" type="text/css" media="print"
		href="shared/template-default-print.css">
	<!--[if IE 6]>
			<style>
			/* dirty hack for IE6. */
			#quickbar {
				position: absolute;
				}
			</style>
	<![endif]-->
  <link rel="start" href="http://wiki.beyondunreal.com/">
  <link rel="glossary"  href="http://wiki.beyondunreal.com/wiki/Terminology">
  <link rel="help"  href="http://wiki.beyondunreal.com/wiki/Using_The_Wiki">
<script type="text/javascript" src="shared/dhtml.js"></script>
<script type="text/javascript" src="shared/dhtml-menu.js"></script>
<style type="text/css">#dhtml-menu    { background: #eee; padding: 5px 0px; margin-right: -20px; border: 1px solid #888; border-left: 1px solid #ccc; border-top: 1px solid #ccc;  border-right: 1px solid #888; border-bottom: 1px solid #888 }
#dhtml-menu td { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; padding: 1px 10px; cursor: default }
#dhtml-menu a  { color: #000; font-family: Arial,Helvetica,sans-serif; font-size: 9pt; line-height: 13pt; text-decoration: none }
#dhtml-menu tt { font-family: monospace; font-size: 9pt }
#dhtml-menu-separator { height: 1px; background: red }
#dhtml-menu-anchor { cursor: default }
</style>
<script type="text/javascript" src="shared/expandable.js"></script>
</head>
<body onLoad="menuInit(); document.cookie='page=Assault_Mapping_Tutorial/Creating_Tutorial_Valley; path=/'" class="default">
<div id="scrolling"><!-- contains all except the fixed sidebar -->
<div id="topbar"  class="bar">
	<div class="righthalf">
		<input type="text" name="search"  size="14" /> <input type="button" onclick="location.href='../search-error/index.html';" value="search" />
	</div>
	<div class="lefthalf">
		<script type="text/javascript"><!--
			menuAlignRight = false;
		//--></script>
		<span><script type="text/javascript"><!--
 menuWriteAnchor("Quick Navigation") //--></script></span> | <a href="../index.html">Home Page</a> | <a href="recent-changes.html">Recent Changes</a>
	</div>
</div>

<div id="content"><!-- contains the title and article -->
	<h1 class='pagetitle'><a href="assault-mapping-tutorial.html">Assault Mapping Tutorial</a>/<a href="http://wiki.beyondunreal.com/wiki?back=Assault+Mapping+Tutorial/Creating+Tutorial+Valley">Creating Tutorial Valley</a></h1>
	<div class="wiki"><p>For those following along on the <a href="assault-mapping-tutorial.html">Assault Mapping Tutorial</a> who want to build the tutorial map themselves (or are just curious how it was done), here are the steps needed to build our cozy little place I like to call "Tutorial Valley".  After following these steps you should have something pretty close to the example map (which is also available for download.  See the link from the main page of the tutorial).</p>
<p>Anyway, the steps are as follows:</p>
<ol><li>Set the 3D view to Textured mode.  This will make it easier to see what we're doing before lights are added.</li>
<li><a href="subtract-a-space.html">Subtract a Space</a> of size 8192x8192, height 4096.  (It doesn't matter what texture you give it, because we'll be setting all the walls to "Fake Backdrop" for a skybox later anyway.  In these situations I like to use something semi-transparent like Editor.MaterialArrow to remind me that these walls are there, but they aren't "real")</li>
<li><a href="add-an-actor.html">Add an Actor</a>&gt;&gt;Info&gt;&gt;<a href="zoneinfo.html">ZoneInfo</a> to the subtracted space (doesn't really matter where; I like to put it near the center).</li>
<li>Add a terrain using <a href="terrain-mode.html">Terrain Mode</a>.  Make the terrain 128x128 in size.  Place the new TerrainInfo actor in the center of the subtracted space.  (note that by using the Terrain Tool to create the terrain, it automagically sets TerrainZone to true in the ZoneInfo we just added, which is good, because we'll need that)</li>
<li>Choose an appropriate dirt texture (say AbbaddonTerrain.ground.dirt01GO) in the Texture Browser, and then add a base layer to the new terrain using Terrain Mode tool.  Be sure that the "Alpha Fill" setting in the new layer window is set to white (255,255,255).  (if you now <a href="rebuild.html">rebuild</a> the map, a flat terrain should appear covering the entire width and depth of the subtracted space.  If it doesn't, double-check the TerrainZone setting in the ZoneInfo, and make sure the 3D view is set to Textured mode instead of Dynamic Lighting.)</li>
<li>Use the Paint and Smoothing tools in the Terrain Mode window to shape the terrain into a curved valley, with hilly peaks all around.</li>
<li>Choose an appropriate grass-like texture in the Texture Browser and create a second layer.  This time, set the "Alpha Fill" setting to black (0,0,0) (this will cause the layer to be initially completely hidden).  Use the Paint tool from the Terrain window to paint the grass texture over the floor of the valley.  (Use a little bit of variation, in the real world, grass doesn't all grow uniformally)  [Note: There is apparently no actual "grass" texture shipped in any of the modules of the entire UT2004 game.  I had to create my own (by taking the "ground.moss01ar" texture from the "ArboreaTerrain" package, loading it into a paint program, adjusting the color to be greener, and blurring it slightly).  You can just use the moss01ar texture itself (as many maps apparently do for grass), but it won't look as good.]</li>
<li>Choose a rock texture (such as AbaddonTerrain.ground.flr18go) and create another layer for the Terrain.  Again, set the initial alpha fill to black (0,0,0).  Paint this texture over the hills and peaks surrounding the valley.</li>
<li>Open the Static Mesh Browser and load the "ArboreaHardware" package.  Select the Organics.ArbGrassA static mesh.  Go to the Terrain Mode window and create a new decoration layer using this mesh.  <em class="em2">Tip:</em> We could create a new alphamap for the density of the decoration layer, but instead, set the density map for the deco layer to be the same one already used for the alphamap for the grass layer.  This way, anywhere grass is painted will automatically get grass meshes as well, and the grass meshes will change automatically if you change the grass layer. (Note: the deco layer meshes won't show up yet until you change some of the properties mentioned in the next step)</li>
<li>Now we want to tweak some aspects of our new terrain to make things look a bit better.  Select the TerrainInfo actor in the map, and <a href="set-the-following-propertie.html">set the following properties</a>:<dl><dt>TerrainInfo&rarr;Layers[0] (the dirt)</dt><dd>(No changes needed)</dd><dt>TerrainInfo&rarr;Layers[1] (the grass)</dt><dd><ul><li>UScale = 4</li>
<li>VScale = 4</li>
<li>TextureRotation = 4096</li>
</ul>
</dd><dt>TerrainInfo&rarr;Layers[2] (the rocks)</dt><dd><ul><li>UScale = 32</li>
<li>VScale = 32</li>
</ul>
</dd><dt>TerrainInfo&rarr;DecoLayers[0] (the grass meshes)</dt><dd><ul><li>AlignToTerrain = 1</li>
<li>DensityMultiplier = (Min=0.5, Max=0.5)</li>
<li>DrawOrder = SORT_BackToFront</li>
<li>FadeOutRadius = (Min=1000, Max=2000)</li>
<li>RandomYaw = 1</li>
<li>ScaleMultiplier:<ul><li>X = (Min=0.5, Max=1)</li>
<li>Y = (Min=0.5, Max=1)</li>
<li>Z = (Min=0.25, Max=5)</li>
</ul>
</li>
</ul>
</dd></dl>
</li>
<li><a href="building-a-skybox.html">Create a Skybox</a> outside of the area we're using for the map.  We'll just use a clear blue sky for now, so create a ConstantColor texture with a nice shade of blue and set all the walls of the skybox to that texture (for simplicity, make them unlit, so they show up the right color even without a light in the skybox).  Next, set all the walls of our big space to "Fake Backdrop" so we can see the skybox through them (and so that the sunlight actor in the next step works properly).</li>
<li><p><a href="add-an-actor.html">Add an Actor</a>&gt;&gt;Light&gt;&gt;<a href="sunlight.html">Sunlight</a> inside our space.  Set the LightColor&rarr;Brightness to 80, and point it downwards at a slight angle.  (You should now be able to <a href="rebuild.html">rebuild</a> the map and turn on Dynamic Lighting and see a nice peaceful, sunlit valley)</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[astut-terrain]" src="images/astut-terrain.jpeg"></div>
</td>
</tr>
</table>
</div>
</li>
<li>Open the properties for the ZoneInfo actor and set the ZoneLight&rarr;AmbientBrightness to 32.  In the real world, light gets reflected off of all kinds of things so even if you're not in direct sunlight there's still some light.  This will keep the shadows from being pitch black and make things feel more realistic.  (Note: Don't set AmbientLight too high, though, or static meshes will look strange (for some reason, static meshes don't get lit the same way by AmbientLight as everything else does, so they'll come out looking too light).)</li>
<li>Pick a basic concrete texture, such as HumanoidArchitecture.Bases.bas10HA, and at one end of the valley, add a "cube" brush of size (height=128,width=1024,breadth=3072) and place it on the floor of the valley against the wall.  Add another of the same size and also place it on the ground right in front of the first one.  Use the <a href="vertex-editing.html">Vertex Editing</a> tool to move the front vertexes of the front slab closer together into a trapezoidal shape.  Now we have an underlying slab for our new base structure. (Note that whenever you change the shape of a brush you need to <a href="rebuild.html">rebuild</a> the world geometry before you will see the change in the world.)</li>
<li>Add another box of size (h=896,w=256,b=3072).  Form it into a similar (upright) trapezoidal shape, and place it standing on the base slab, against the wall of the valley.  This will represent the front wall of the part of the base which is dug into the mountain.</li>
<li>Adjust the terrain shape so that it meets our concrete slabs around all the edges, and nothing is poking up through the slabs.</li>
<li>The door to the actual base will be in the center of the upright slab, but we need some protection for it so a frontal attack isn't trivially easy.  Add another vertical concrete slab of size (h=512,w=128,b=1024) about 1024 units in front of the back wall.</li>
<li>For added support, and to give the defenders somewhere good to spawn, we'll build a ceiling stretching out from the back wall to the front wall, but we'll make this one a different texture.  Choose the "Grates.grt025T" texture from the "Shiptech" package, and add another box of size (h=64,w=1024,b=896).  Place it so that it connects the top of the front wall with the back wall.</li>
<li>Now that we have all the basic BSP in place for the base, it's time to fiddle with textures.  Adjust the scaling and position so that they look good and line up well with the edges and other pieces.</li>
<li>Add some appropriate static meshes to make the base look more interesting.  Five HumanoidHardware.Beams.jribbedcolumn01HA meshes (with a Z DrawScale3D of 2)  will give it a good feeling of solidity, and we will add a couple of SG_LO_meshes.Cielings.LO_lee_arch meshes (DrawScale=2, partially embedded into the front wall) to look like extra supports and give a bit of added protection for the front of the roof.  Add an X_cp_Evil.sg_Evildoorframe1 in the center of the back wall, the top should be protruding out of the roof (this both gives us a starting doorframe, and produces a nifty bit of some sort of equipment on the roof, for character).  Finally, take a SG_LO_meshes.Doors.sg_Mech_ruggedframe2, set the X coordinate of its DrawScale3D to 0.75, place it against the back wall, and move it down so that the top forms a base for the "equipment" on the roof, to form an imposing, technological front for our base (this will also serve double-duty as a way for the defenders to climb down from the roof on either side).  I also added a HumanoidHardware.Miscellaneous.MDoor01HA (DrawScale=1.5) around the remaining exposed area of the back wall for an actual door frame.</li>
<li>Now, there is one problem here.  The collision hull for the sg_Mech_ruggedframe2 is broken.  If you try to walk on top of the sides of it when climbing down from the roof, you will notice that your character actually falls partway into the mesh, which just breaks the whole illusion of reality.  To fix this bug in the mesh, we'll need to create a couple of <a href="blockingvolume.html">BlockingVolume</a>s to cover these portions so that people can stand on them correctly.  Since these are an irregular shape, the best way to do this is to open the <a href="2d-shape-editor.html">2D Shape Editor</a>, create a shape which is close to what we want, and extrude it into a brush shape.  Then create the BlockingVolumes from this brush and place them over the "ramps".</li>
<li><p>There's just one last touch left for the entrance to our base:  An actual entrance to our base.  We need to carve a hole in the back wall to lead into the rest of the underground base.  Make the builder brush into a (h=288,w=256,b=512) box, and place it inside the back wall, centered with where we want the door to be (this should be just slightly bigger than the mesh we've got for our doorframe), then hit the subtract button, and presto, we have a hole.  But now we've got another problem: the hole is covered by terrain.  To fix this, go into Terrain Mode and select the "Visibility" tool.  Set the inner and outer radius down to 1, and (very carefully) control-click the particular terrain cells which are blocking the passage. (we will want to actually build the rest of the base later, but for now we'll stop here)</p>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[astut-base]" src="images/astut-base.jpeg"></div>
</td>
</tr>
</table>
</div>
</li>
<li>Now it's time for a bit more decoration of the rest of the landscape.  In the AntalusStatic package, there are a number of static meshes for cedar trees.  Place some of these in appropriate places around the valley.  For dense forest areas, we can overlap some of the tree group meshes to make them look even denser.  Don't forget to vary the sizes appropriately.</li>
<li>There is another problem here.  There is apparently a bug in the rendering engine which causes the grass meshes from our decoration layer to draw even when they should be obscured by the tree leaves, which looks really strange.  This is apparently due to a rendering glitch with Shaders (a Shader is used to make the branch texture in the default tree mesh two-sided, so it shows from underneath too).  Since all we need is for the texture to be two-sided, we can get around this by using something other than a Shader which gives us the option of making something two-sided.  Create a new ColorModifier based on the basic AntalusTextures.All.cedarbranch texture, set it to be two-sided, and we'll use that instead (this gives us the added benefit that we can tweak the tree colors if we want to).  Set this new texture as a skin in place of the default tree branch texture for all of the tree static mesh actors.  Fixed!</li>
<li>Now, in the real world, evergreens and grass do not get along well (evergreens produce too much shade and cover the ground with needles so that grass can't really grow under them).  To emulate this, create another terrain layer using the ArboreaTerrain.ground.Twig01AR texture to look like needles and twigs (UScale=2,VScale=2) and paint this underneath all of the trees.  You will also need to un-paint the grass in those areas (even if the twig layer is on top of the grass, the grass layer is connected to the grass meshes, so you'll get tufts of grass popping up through your nice twigs if you don't).</li>
<li>Now find some nice boulder meshes (such as CB-Desert1.Rocks.AW-PointyRock1a, ArboreaLanscape.Cliffs.littlerock01, and CB-Desert2.Rocks.CB-rock3), and place some of them around the valley in appropriate spots.  Rotate and scale them so they don't all look like the same rock, and to keep things consistent, skin them with the same texture used for the rocky peaks around the valley.</li>
<li>Un-paint the grass under the edges of the rocks where we would expect them to shade it out, so we'll see some dirt instead.</li>
<li>Finally, we need some ambience.  Add two or three AmbientSound actors around the edge of the valley with some wind sounds (OutdoorAmbience.BThunder.wind1, SoundRadius=500, SoundVolume=200, and vary the SoundPitch between 32 and 64).  Now add an AmbientSound with Sound&rarr;AmbientSound set to None, and then add an entry to its Sound&rarr;SoundEmitters property to generate an intermittent sound.  Set the EmitInterval to 10, EmitVariance to 5, and EmitSound to Sound'OutdoorAmbience.BThunder.bird2'. Create similar AmbientSounds with some other bird sounds (such as bird4, bird5, or bird6) and scatter them around the trees to make them sound inhabited.</li>
</ol>
<div class="floatimages"><table border=0 cellspacing=0 cellpadding=0 align=center width=1><tr valign=top><td class="floatimages-block"><div><img alt="[astut-valley]" src="images/astut-valley.jpeg"></div>
</td>
</tr>
</table>
</div>
<p>There we have it, a nice peaceful sunlit little valley full of green grass and happy birds, ready to be drenched in blood!</p>
<p>Now might be a good time to add a temporary PlayerStart, fire up the map in the game, and have a nice leisurely stroll about your new world (make sure all the terrain's navigable, looks and sounds right in-game, etc.)  Then, on to the real fun...</p>
<p>(There are a couple of touches which could still be added.  Our skybox could use a bit of work, for example, by adding some clouds and a sun with a corona, and possibly some continuation of the terrain into the distance so it looks better if somebody goes up high enough in flying camera mode (alternately, we might just want to bring the ceiling down low enough that they can't do this).  Realistically, some blocking volumes should also be erected around the sides of the valley to make sure people don't find a way up onto the peaks where they're not supposed to be (which could potentially screw up the planned assault balance), and we could probably make the base look a bit better with some more carefully chosen meshes, or some custom building, but we'll leave these details for the time being)</p>
<p>(Return to the <a href="assault-mapping-tutorial-ge.html">/Getting Started</a> section of the <a href="assault-mapping-tutorial.html">Assault Mapping Tutorial</a>)</p>
<hr class="thin"><p>This tutorial was originally written and contributed to the Wiki community by <a href="foogod.html">Foogod</a>.  Questions and comments are welcome!  Please either leave them on my personal page or at the bottom of the relevant tutorial page.  If you see something which is wrong or unclear and you think needs some correction, please feel free to edit the text directly (that's what the Wiki is for!), but please try to keep the tutorial flow intact (no thread discussions in the middle of the tutorial text, please).</p>
<p>Note: To reduce clutter, comments on the tutorial pages will be periodically moved to the <a href="assault-mapping-tutorial-di.html">/Discussion</a> page.  Look there for older comments and thread discussions.</p>
<h2><a name="0.1"></a>Comments:</h2>
<p>Stino: Maybe the grass is a little to green <img alt=":d" src="emoticons/biggrin.gif" align="middle"></p>
<p>Hoyr: There is a couple of good grass textures in the ArenaTex package <img alt=":)" src="emoticons/smile.gif" align="middle"></p>
<script type="text/javascript"><!--
 menuItemAdd("Comments:", "#0.1");
 menuWrite() //--></script></div>
</div>

<div id="footer" class="bar">
	<p>
<a href="../index.html">Home Page</a> | <a href="assault-mapping-tutorial.html">Assault Mapping Tutorial</a> | <a href="recent-changes.html">Recent Changes</a><br>
Last edited July 2, 2006 7:56 <a href="http://wiki.beyondunreal.com/wiki?action=browse&diff=1&id=Assault_Mapping_Tutorial/Creating_Tutorial_Valley">(diff)</a><br>Search: <input type="text" name="search"  size="14" /><input type="button" onclick="location.href='../search-error/index.html';" value="search" /><br><br><small><a href="http://wiki.beyondunreal.com/wiki/Assault_Mapping_Tutorial/Creating_Tutorial_Valley">Original page</a> &#150; copy created Sat, Jun 23, 2007</small><div></div>

	</p>
	<p>My program doesn't have bugs. It just develops random features.
</p>
</div>
</div><!-- close of "scrolling" div -->

<div id="quickbar">
	<div id="logo"><a href="../index.html"><img src="shared/wikilogo.jpg" width="143" height="100" border="0"></a>
		</div>
	<div class="qbsitename">
		<p>The Unreal Engine Documentation Site</p>
	</div>
	<div class="qbsection">
<p><a href="metatopics.html">Wiki Community</a></p>
<p><a href="category-category.html">Topic Categories</a></p>


<p><a href="recent-changes.html">Recent Changes</a></p>
<p><a href="offline-wiki.html">Offline Wiki</a></p>
</div><div class="qbsection">
<p><a href="unreal-engine.html">Unreal Engine</a></p>
<p><a href="console-commands.html">Console Commands</a></p>
<p><a href="terminology.html">Terminology</a></p>
<p><a href="category-faq.html">FAQs</a></p>
<p><a href="help-desk.html">Help Desk</a></p>
</div><div class="qbsection">
<p><a href="topics-on-mapping.html">Mapping Topics</a></p>
<p><a href="mapping-lessons.html">Mapping Lessons</a></p>
<p><a href="unrealed-3.html">UnrealEd Interface</a></p>
</div><div class="qbsection">
<p><a href="unrealscript.html">UnrealScript Topics</a></p>
<p><a href="unrealscript-lessons.html">UnrealScript Lessons</a></p>
<p><a href="making-mods.html">Making Mods</a></p>
<p><a href="class-tree.html">Class Tree</a></p>
</div><div class="qbsection">
<p><a href="topics-on-modeling.html">Modeling Topics</a></p>
</div><div class="qbsection">
<p><a href="chongqing-page.html">Chongqing Page</a></p>
<p><a href="log-in.html">Log In</a></p></div>
</div>

</body></html>
